 <h2> Title: How can I access environment variables in Python? </h2> <h3> Amit Yadav, question_id: 4906977 </h3>Score: 3198, Tags: {python,environment-variables} <br><p>How can I get the value of an environment variable in Python?</p>
------------------------------------------------------------------ <br><h3> Answer 11447648 lgriffiths: </h3><p>To check if the key exists (returns <code>True</code> or <code>False</code>)</p>

<pre><code>'HOME' in os.environ
</code></pre>

<p>You can also use <code>get()</code> when printing the key; useful if you want to use a default.</p>

<pre><code>print(os.environ.get('HOME', '/home/username/'))
</code></pre>

<p>where <code>/home/username/</code> is the default</p>
<h4> Comment 84555400 Trenton: </h4>@endolith They do different things. The first returns True or False, while the second returns a value, possibly None.<br><h4> Comment 71231124 endolith: </h4>Which is better, <code>&quot;HOME&quot; in os.environ</code> or <code>os.environ.get(&#39;HOME&#39;)</code>?<br><h4> Comment 103172387 Konstantin Sekeresh: </h4>@endolith, the correct question woud be <code>&quot;HOME&quot; in os.environ</code> vs <code>os.environ.get(&#39;HOME&#39;) is None</code>. As you can see first is far more readable &amp; comfortable to work with.<br>------------------------------------------------------------------ <br><h3> Answer 4907053 Rod: </h3><p>Environment variables are accessed through <a href="https://docs.python.org/library/os.html#os.environ" rel="noreferrer"><code>os.environ</code></a>:</p>
<pre><code>import os
print(os.environ['HOME'])
</code></pre>
<p>To see a list of all environment variables:</p>
<pre><code>print(os.environ)
</code></pre>
<hr />
<p>If a key is not present, attempting to access it will raise a <code>KeyError</code>. To avoid this:</p>
<pre><code># Returns `None` if the key doesn't exist
print(os.environ.get('KEY_THAT_MIGHT_EXIST'))

# Returns `default_value` if the key doesn't exist
print(os.environ.get('KEY_THAT_MIGHT_EXIST', default_value))

# Returns `default_value` if the key doesn't exist
print(os.getenv('KEY_THAT_MIGHT_EXIST', default_value))
</code></pre>
<h4> Comment 74794193 Charlie Parker: </h4>is this a portable solution?<br><h4> Comment 74922309 Rod: </h4>@CharlieParker Yes, as far as I know, it is portable.<br><h4> Comment 91836505 Gringo Suave: </h4><code>.get()</code> can also be given a default.<br><h4> Comment 5466323 Rod: </h4>os.environ is a dictionary. Trying to access a key not present in the dictionary will throw a KeyError. The get method simply returns None when the key does not exists. Do you have PYTHONPATH set? Can you try with a variable such as PATH, that is guaranteed to exist? Does it return a meaningful value?<br><h4> Comment 5484666 Rod: </h4>PYTHONPATH is used to add new search path to Python (sys.path) from outside Python. Have a look at <a href="http://docs.python.org/using/cmdline.html#environment-variables" rel="nofollow noreferrer">docs.python.org/using/cmdline.html#environment-variables</a><br><h4> Comment 5480536 Amit Yadav: </h4>I havenâ€™t set it (PYTHONPATH) before; what I am doing just go with command prompt and type CMD anywhere (since python.exe is in my shell PATH). If I try to access Window ENVIRONMENT variable, it gives mapped value but the problem with Python ENVIRONMENT variable like; PYTHONPATH and PYTHONHOME.<br><h4> Comment 71018152 mrid: </h4>Is there any way to keep this variable persistent ?? When I run python later on the environment variable is gone and gives a <code>raise KeyError(key)</code> instead<br><h4> Comment 71097779 Rod: </h4>@mrid There is no direct way from python to persist the environment variable. On windows you can write them in the registry, on Linux/OSX you might have to change you environment using scripts.<br><h4> Comment 136766575 xuiqzy: </h4>Or you can just handle the <code>KeyError</code> normally in an <code>try... except</code>, handling the case where this env variable under that key is not found. This is not a bad thing, but a common accepted idiomatic python thing to do to handle expected error cases this way. It also prevents outside state to be different between an <code>if</code> check and getting the actual value for example (preventing TOCTTOU issues, time of check to time of use).<br><h4> Comment 132064044 ATL_DEV: </h4>@Rod.  It&#39;s not entirely portable if python is embedded inside another application. It is based on the execution context, ie shell, kind of shell, etc. MacOS environment variables may not exist if launched by double-clicking outside the terminal. In UNIX everything is presumed to be a shell, whereas Windows doesn&#39;t care. So while it does retrieve environment variables, you can&#39;t depend on what it returns.<br><h4> Comment 112105424 RicHincapie: </h4>For checking whether a environmental variable is set to some value, try:  <code>if getenv(&#39;your_variable&#39;) == &#39;your value&#39;:</code><br>------------------------------------------------------------------ <br><h3> Answer 49211023 britodfbr: </h3><p>Actually it can be done this way:</p>
<pre><code>import os

for key, value in os.environ.items():
    print(f'{key}: {value}')
</code></pre>
<p>Or simply:</p>
<pre><code>for key, value in os.environ.items():
    print('{}: {}'.format(key, value))
</code></pre>
<p>or:</p>
<pre><code>for i, j in os.environ.items():
    print(i, j)
</code></pre>
<p>For viewing the value in the parameter:</p>
<pre><code>print(os.environ['HOME'])
</code></pre>
<p>Or:</p>
<pre><code>print(os.environ.get('HOME'))
</code></pre>
<p>To set the value:</p>
<pre><code>os.environ['HOME'] = '/new/value'
</code></pre>
<h4> Comment 87281798 Bart: </h4>No, this answer really doesn&#39;t add anything on top of the existing answers<br><h4> Comment 98240175 moltarze: </h4>This should be removed, it is a duplicate of other answers. <code>str.format</code> is just a fancy addition.<br><h4> Comment 121338541 Noumenon: </h4>The first answer with readable output for the entire env, thanks. To view the env in the PyCharm debugger, I evaluate <code>{k: v for k,v in sorted(os.environ.items())}</code><br><h4> Comment 123957606 M.C.: </h4>it adds how to set the value<br>------------------------------------------------------------------ <br><h3> Answer 9926915 Scott C Wilson: </h3><p>Here's how to check if <code>$FOO</code> is set:</p>
<pre><code>try:  
   os.environ[&quot;FOO&quot;]
except KeyError: 
   print &quot;Please set the environment variable FOO&quot;
   sys.exit(1)
</code></pre>
<h4> Comment 80408159 Dangercrow: </h4>@RandomInsano faster =/= better. This code looks less readable than an <code>&quot;if &#39;FOO&#39; not in os.environ: ...&quot;</code> block<br><h4> Comment 71281469 RandomInsano: </h4>Try can be faster. The case of env vars is likely best for &#39;try&#39;: <a href="http://stackoverflow.com/a/1835844/187769">stackoverflow.com/a/1835844/187769</a><br><h4> Comment 128314389 Shane S: </h4>If you just setup the variable you need to close the Terminal before you can test it.<br><h4> Comment 136766525 xuiqzy: </h4>Could the environment variable change (from another thread or from an outside source) between the if check and the access? Because these TOCTTOU (time of check to time of use) problems are avoided with the try except construct!<br>------------------------------------------------------------------ <br><h3> Answer 4907002 andrei1089: </h3><p>You can access the environment variables using</p>
<pre><code>import os
print os.environ
</code></pre>
<p>Try to see the content of the PYTHONPATH or PYTHONHOME environment variables. Maybe this will be helpful for your second question.</p>
------------------------------------------------------------------ <br><h3> Answer 58958098 Leonardo: </h3><p>For Django, see <a href="https://github.com/joke2k/django-environ" rel="nofollow noreferrer">Django-environ</a>.</p>
<pre><code>$ pip install django-environ

import environ

env = environ.Env(
    # set casting, default value
    DEBUG=(bool, False)
)
# reading .env file
environ.Env.read_env()

# False if not in os.environ
DEBUG = env('DEBUG')

# Raises Django's ImproperlyConfigured exception if SECRET_KEY not in os.environ
SECRET_KEY = env('SECRET_KEY')
</code></pre>
<h4> Comment 121099334 Peter Mortensen: </h4>An explanation would be in order. What is the context - in what context is the code executed? On a server with Django? Locally for testing it out? Somewhere else? What is the idea? What is the code supposed to accomplish?<br>------------------------------------------------------------------ <br><h3> Answer 4907004 Jim Brissom: </h3><p>As for the environment variables:</p>
<pre><code>import os
print os.environ[&quot;HOME&quot;]
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 43074113 Azorian: </h3><pre><code>import os
for a in os.environ:
    print('Var: ', a, 'Value: ', os.getenv(a))
print("all done")
</code></pre>

<p>That will print all of the environment variables along with their values.</p>
------------------------------------------------------------------ <br><h3> Answer 67600405 George Imerlishvili: </h3><p>Import the <code>os</code> module:</p>
<pre class="lang-py prettyprint-override"><code>import os
</code></pre>
<p>To get an environment variable:</p>
<pre class="lang-py prettyprint-override"><code>os.environ.get('Env_var')
</code></pre>
<p>To set an environment variable:</p>
<pre class="lang-py prettyprint-override"><code># Set environment variables
os.environ['Env_var'] = 'Some Value'
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 41561017 Renjith Thankachan: </h3><p>If you are planning to use the code in a production web application code, using any web framework like <a href="https://en.wikipedia.org/wiki/Django_%28web_framework%29" rel="noreferrer">Django</a> and <a href="https://en.wikipedia.org/wiki/Flask_%28web_framework%29" rel="noreferrer">Flask</a>, use projects like <a href="https://github.com/rconradharris/envparse" rel="noreferrer">envparse</a>. Using it, you can read the value as your defined type.</p>
<pre><code>from envparse import env
# will read WHITE_LIST=hello,world,hi to white_list = [&quot;hello&quot;, &quot;world&quot;, &quot;hi&quot;]
white_list = env.list(&quot;WHITE_LIST&quot;, default=[])
# Perfect for reading boolean
DEBUG = env.bool(&quot;DEBUG&quot;, default=False)
</code></pre>
<p>NOTE: kennethreitz's <a href="https://github.com/kennethreitz/autoenv" rel="noreferrer">autoenv</a> is a recommended tool for making project-specific environment variables. For those who are using <code>autoenv</code>, please note to keep the <code>.env</code> file private (inaccessible to public).</p>
<h4> Comment 128220560 Michael Currie: </h4><a href="https://github.com/rconradharris/envparse" rel="nofollow noreferrer">envparse</a> is used by about 4,000 people and has not been maintained since 2015, vs. <a href="https://github.com/theskumar/python-dotenv" rel="nofollow noreferrer">dotenv</a>, which is used by 240,000 people.  The people have spoken.<br>------------------------------------------------------------------ <br><h3> Answer 53854947 Peter Konneker: </h3><p>There are also a number of great libraries. <a href="https://pypi.org/project/envs/" rel="noreferrer">Envs</a>, for example, will allow you to parse objects out of your environment variables, which is rad. For example:</p>
<pre><code>from envs import env
env('SECRET_KEY') # 'your_secret_key_here'
env('SERVER_NAMES',var_type='list') #['your', 'list', 'here']
</code></pre>
<h4> Comment 121099254 Peter Mortensen: </h4>What does &quot;rad&quot; mean in <i>&quot;which is rad&quot;</i>?  <i><a href="https://en.wiktionary.org/wiki/rad#Adjective" rel="nofollow noreferrer">rad</a></i> - <i>&quot;1. (slang) Clipping of radical; excellent&quot;</i><br>------------------------------------------------------------------ <br><h3> Answer 65728905 Meir Gabay: </h3><p><strong>Edited - October 2021</strong></p>
<p>Following @Peter's comment, here's how you can test it:</p>
<p><code>main.py</code></p>
<pre class="lang-py prettyprint-override"><code>#!/usr/bin/env python


from os import environ

# Initialize variables
num_of_vars = 50
for i in range(1, num_of_vars):
    environ[f&quot;_BENCHMARK_{i}&quot;] = f&quot;BENCHMARK VALUE {i}&quot;  

def stopwatch(repeat=1, autorun=True):
    &quot;&quot;&quot;
    Source: https://stackoverflow.com/a/68660080/5285732
    stopwatch decorator to calculate the total time of a function
    &quot;&quot;&quot;
    import timeit
    import functools
    
    def outer_func(func):
        @functools.wraps(func)
        def time_func(*args, **kwargs):
            t1 = timeit.default_timer()
            for _ in range(repeat):
                r = func(*args, **kwargs)
            t2 = timeit.default_timer()
            print(f&quot;Function={func.__name__}, Time={t2 - t1}&quot;)
            return r
        
        if autorun:
            try:
                time_func()
            except TypeError:
                raise Exception(f&quot;{time_func.__name__}: autorun only works with no parameters, you may want to use @stopwatch(autorun=False)&quot;) from None
        
        return time_func
    
    if callable(repeat):
        func = repeat
        repeat = 1
        return outer_func(func)
    
    return outer_func

@stopwatch(repeat=10000)
def using_environ():
    for item in environ:
        pass

@stopwatch
def using_dict(repeat=10000):
    env_vars_dict = dict(environ)
    for item in env_vars_dict:
        pass
</code></pre>
<pre class="lang-sh prettyprint-override"><code>python &quot;main.py&quot;

# Output
Function=using_environ, Time=0.216224731
Function=using_dict, Time=0.00014206099999999888
</code></pre>
<p>If this is true ... It's 1500x faster to use a <code>dict()</code> instead of accessing <code>environ</code> directly.</p>
<hr />
<p>A performance-driven approach - calling <code>environ</code> is expensive, so it's better to call it once and save it to a dictionary. Full example:</p>
<pre class="lang-py prettyprint-override"><code>from os import environ


# Slower
print(environ[&quot;USER&quot;], environ[&quot;NAME&quot;])

# Faster
env_dict = dict(environ)
print(env_dict[&quot;USER&quot;], env_dict[&quot;NAME&quot;])
</code></pre>
<p>P.S- if you worry about exposing private environment variables, then sanitize <code>env_dict</code> after the assignment.</p>
<h4> Comment 131973886 ferreiradev: </h4>What do you mean sanitize? Like remove entries with sensitive data so maybe you don&#39;t accidentally throw api keys or secrets in app logs?<br><h4> Comment 131976500 Meir Gabay: </h4>@ferreiradev yup, exactly that<br>------------------------------------------------------------------ <br><h3> Answer 61104187 Steve Mitto: </h3><p>You can also try this:</p>
<p>First, install <code>python-decouple</code></p>
<pre><code>pip install python-decouple
</code></pre>
<p>Import it in your file</p>
<pre><code>from decouple import config
</code></pre>
<p>Then get the environment variable</p>
<pre><code>SECRET_KEY=config('SECRET_KEY')
</code></pre>
<p>Read more about the Python library <a href="https://pypi.org/project/python-decouple/" rel="noreferrer">here</a>.</p>
------------------------------------------------------------------ <br><h3> Answer 75394156 Ericgit: </h3><p>You can use <code>python-dotenv</code> module to access environment variables</p>
<p>Install the module using:</p>
<pre><code>pip install python-dotenv
</code></pre>
<p>After that, create a <code>.env</code> file that has the following entry:</p>
<pre><code>BASE_URL = &quot;my_base_url&quot;
</code></pre>
<p>Then import the module into your Python file</p>
<pre><code>import os
from dotenv import load_dotenv

# Load the environment variables
load_dotenv()

# Access the environment variable
print(os.getenv(&quot;BASE_URL&quot;))
</code></pre>
<h4> Comment 136621549 Or Yaacov: </h4>why would you install a third party library for something so simple?<br>------------------------------------------------------------------ <br><h3> Answer 66621790 ichirod: </h3><p>You should first import os using</p>
<pre class="lang-py prettyprint-override"><code>import os
</code></pre>
<p>and then actually print the environment variable value</p>
<pre class="lang-py prettyprint-override"><code>print(os.environ['yourvariable'])
</code></pre>
<p>of course, replace yourvariable as the variable you want to access.</p>
------------------------------------------------------------------ <br><h3> Answer 70524904 not2qubit: </h3><p>The tricky part of using nested <em>for-loops</em> in one-liners is that you <strong>have</strong> to use list comprehension. So in order to print <strong>all</strong> your environment variables, without having to import a foreign library, you can use:</p>
<pre class="lang-sh prettyprint-override"><code>python -c &quot;import os;L=[f'{k}={v}' for k,v in os.environ.items()]; print('\n'.join(L))&quot;
</code></pre>
