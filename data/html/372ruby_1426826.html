 <h2> Title: Difference between &quot;and&quot; and &amp;&amp; in Ruby? </h2> <h4> Jakub Arnold, question_id: 1426826 </h4>Score: 372, Tags: {ruby,operators} <br><p>What is the difference between the <code>&amp;&amp;</code> and <code>and</code> operators in Ruby?</p>
<h4> Andrew Marshall, Id: 13805908 Score: 3: </h4>See also <a href="http://stackoverflow.com/q/2083112/211563">Difference between <code>or</code> and <code>||</code></a>.<br>------------------------------------------------------------------ <br><h3> Dominic Rodger, Id: 1426835, Score: 398: </h3><p><code>and</code> is the same as <code>&amp;&amp;</code> but with <a href="http://phrogz.net/ProgrammingRuby/language.html#table_18.4" rel="noreferrer">lower precedence</a>. They both use <a href="http://en.wikipedia.org/wiki/Short-circuit_evaluation" rel="noreferrer">short-circuit evaluation</a>.</p>

<p>WARNING: <code>and</code> even has lower precedence than <code>=</code> so you'll usually want to avoid <code>and</code>. An example when <code>and</code> should be used can be found in the Rails Guide under "<a href="https://guides.rubyonrails.org/layouts_and_rendering.html#avoiding-double-render-errors" rel="noreferrer">Avoiding Double Render Errors</a>".</p>
<h4> Marc-Andr&#233; Lafortune, Comment 12887722 Score: 61: </h4>It would be a good idea to specify that one should usually use <code>&amp;&amp;</code>, while <code>and</code> should be used for very specific cases only.<br><h4> GMA, Comment 29180943 Score: 21: </h4>From Andrew Marshall&#39;s link: &quot;Another way of thinking about <code>and</code> is as a reversed <code>if</code> statement modifier: <code>next if widget = widgets.pop</code> becomes <code>widget = widgets.pop and next</code>. That&#39;s a great way of putting it, really made it &quot;click&quot; in my head. (And <code>or</code> is like a reversed <code>unless</code> modifier.)<br><h4> Eiiki, Comment 50598756 Score: 1: </h4>because of the lower precedence, evaluations such as <code>x = true and false</code> makes x equal to true and <code>x = false or true</code> makes x equal to false<br><h4> Mark Robinson, Comment 111431839 Score: 1: </h4>Updated link from Avdi: <a href="https://avdi.codes/how-to-use-rubys-english-andor-operators-without-going-nuts/" rel="nofollow noreferrer">avdi.codes/&hellip;</a><br><h4> sargas, Comment 35850376 Score: 1: </h4>Combine this answer with the details of tadman&#39;s answer and you get the whole picture.<br>------------------------------------------------------------------ <br><h3> tadman, Id: 1429359, Score: 259: </h3><p>The practical difference is binding strength, which can lead to peculiar behavior if you're not prepared for it:</p>

<pre><code>foo = :foo
bar = nil

a = foo and bar
# =&gt; nil
a
# =&gt; :foo

a = foo &amp;&amp; bar
# =&gt; nil
a
# =&gt; nil

a = (foo and bar)
# =&gt; nil
a
# =&gt; nil

(a = foo) &amp;&amp; bar
# =&gt; nil
a
# =&gt; :foo
</code></pre>

<p>The same thing works for <code>||</code> and <code>or</code>.</p>
<h4> sargas, Comment 35850407 Score: 2: </h4><code>a = foo and bar</code> <i>and</i> <code>(a = foo ) &amp;&amp; bar</code> proves that <code>and</code> has lower precedence than <code>&amp;&amp;</code>.<br><h4> BenKoshy, Comment 61281222 Score: 0: </h4>i don&#39;t get it: what is &quot;foo and bar&quot; meant to return?<br><h4> tadman, Comment 61284281 Score: 0: </h4><code>a = foo and bar</code> is equivalent to <code>(a = :foo) and nil</code>. Since the assignment returns a logically true value (<code>:foo</code>) then the second part evaluates, which fails, returning <code>nil</code>.<br>------------------------------------------------------------------ <br><h3> Andrew Grimm, Id: 10648796, Score: 66: </h3><p>The <a href="https://github.com/bbatsov/ruby-style-guide">Ruby Style Guide</a> says it better than I could:</p>

<blockquote>
  <p>Use &amp;&amp;/|| for boolean expressions, and/or for control flow. (Rule of
  thumb: If you have to use outer parentheses, you are using the wrong
  operators.)</p>
</blockquote>

<pre><code># boolean expression
if some_condition &amp;&amp; some_other_condition
  do_something
end

# control flow
document.saved? or document.save!
</code></pre>
<h4> Yarin, Comment 27727010 Score: 57: </h4>Actually the <a href="https://github.com/bbatsov/ruby-style-guide/commit/5920497452c1f6f604742a735f5684e86d4c0003" rel="nofollow noreferrer"><b>guide now says</b></a> to avoid <code>and</code>/<code>or</code> completely, and they might have a point. Often their usage in control flow <a href="http://devblog.avdi.org/2010/08/02/using-and-and-or-in-ruby/" rel="nofollow noreferrer">could be more obviously written with <code>if</code>/<code>unless</code> operators</a> anyway (e.g. <code>document.save! unless document.saved?</code>)<br><h4> akostadinov, Comment 38057029 Score: 2: </h4>@AndrewGrimm, thanks, good to know. Sorry for trolling but I&#39;m sincerely confused with some aspects of ruby reality. One thing is sure - every ruby project needs strict style policies to keep the codebase maintainable.<br><h4> Andrew Grimm, Comment 38048032 Score: 1: </h4>@akostadinov in case you weren&#39;t trolling: the Ruby Style guide isn&#39;t written by the creators of Ruby. Ruby was created by Yukihiro Matsumoto and others, while the Ruby Style Guide was <a href="https://github.com/bbatsov/ruby-style-guide/graphs/contributors" rel="nofollow noreferrer">mainly</a> by Bozhidar Batsov.<br>------------------------------------------------------------------ <br><h3> Santhosh, Id: 24179006, Score: 22: </h3><p><code>and</code> has lower precedence than <code>&amp;&amp;</code>.</p>

<p>But for an unassuming user, problems might occur if it is used along with other operators  whose precedence are in between, for example, the assignment operator:</p>

<pre><code>def happy?() true; end
def know_it?() true; end

todo = happy? &amp;&amp; know_it? ? "Clap your hands" : "Do Nothing"

todo
# =&gt; "Clap your hands"

todo = happy? and know_it? ? "Clap your hands" : "Do Nothing"

todo
# =&gt; true
</code></pre>
<h4> thutt, Comment 77651735 Score: 3: </h4>@BKSpurgeon See <a href="https://ruby-doc.org/core-2.4.1/doc/syntax/precedence_rdoc.html" rel="nofollow noreferrer">here</a> for a ordered list of operator precedence in Ruby.<br><h4> BenKoshy, Comment 61979694 Score: 1: </h4>Thank you, but how is the precedence of &quot;and&quot; different from &quot;&amp;&amp;&quot;?<br>------------------------------------------------------------------ <br><h3> Gabe Kopley, Id: 12983650, Score: 41: </h3><p><code>||</code> and <code>&amp;&amp;</code> bind with the precedence that you expect from boolean operators in programming languages (<code>&amp;&amp;</code> is very strong, <code>||</code> is slightly less strong).</p>

<p><code>and</code> and <code>or</code> have lower precedence.</p>

<p>For example, unlike <code>||</code>,  <code>or</code> has lower precedence than <code>=</code>:</p>

<pre><code>&gt; a = false || true
 =&gt; true 
&gt; a
 =&gt; true 
&gt; a = false or true
 =&gt; true 
&gt; a
 =&gt; false
</code></pre>

<p>Likewise, unlike <code>&amp;&amp;</code>, <code>and</code> also has lower precedence than <code>=</code>:</p>

<pre><code>&gt; a = true &amp;&amp; false
 =&gt; false 
&gt; a
 =&gt; false 
&gt; a = true and false
 =&gt; false 
&gt; a
 =&gt; true 
</code></pre>

<p>What's more, unlike <code>&amp;&amp;</code> and <code>||</code>, <code>and</code> and <code>or</code> bind with equal precedence:</p>

<pre><code>&gt; !puts(1) || !puts(2) &amp;&amp; !puts(3)
1
 =&gt; true
&gt; !puts(1) or !puts(2) and !puts(3)
1
3
 =&gt; true 
&gt; !puts(1) or (!puts(2) and !puts(3))
1
 =&gt; true
</code></pre>

<p>The weakly-binding <code>and</code> and <code>or</code> may be useful for control-flow purposes: see <a href="http://devblog.avdi.org/2010/08/02/using-and-and-or-in-ruby/" rel="noreferrer">http://devblog.avdi.org/2010/08/02/using-and-and-or-in-ruby/</a> .</p>
<h4> Steph Sharp, Comment 33157742 Score: 2: </h4>&quot;unlike <code>||</code>, <code>or</code> has lower precedence than <code>=</code>&quot; ...now it makes more sense, thanks!<br>------------------------------------------------------------------ <br><h3> Feuda, Id: 40121704, Score: 5: </h3><p><code>and</code> has lower precedence, mostly we use it as a control-flow modifier such as <code>if</code>:</p>

<pre><code>next if widget = widgets.pop
</code></pre>

<p>becomes</p>

<pre><code>widget = widgets.pop and next
</code></pre>

<p>For <code>or</code>:</p>

<pre><code>raise "Not ready!" unless ready_to_rock?
</code></pre>

<p>becomes</p>

<pre><code>ready_to_rock? or raise "Not ready!"
</code></pre>

<p>I prefer to use <code>if</code> but not <code>and</code>, because <code>if</code> is more intelligible, so I just ignore <code>and</code> and <code>or</code>.</p>

<p>Refer to "<a href="http://www.virtuouscode.com/2010/08/02/using-and-and-or-in-ruby/" rel="nofollow noreferrer">Using “and” and “or” in Ruby</a>" for more information.</p>
------------------------------------------------------------------ <br><h3> Dheeraj Maheshwari, Id: 71405417, Score: 1: </h3><p><strong>and</strong> checks only first condition and gives result
on other hand <strong>&amp;&amp;</strong> strongly checks both conditions and gives logical result.</p>
<h4> MDickten, Comment 136542923 Score: 0: </h4>This does not agree with all the other answers.<br>------------------------------------------------------------------ <br><h3> Kevin Ng, Id: 51562979, Score: 0: </h3><p>I don't know if this is Ruby intention or if this is a bug but try this code below. This code was run on Ruby version 2.5.1 and was on a Linux system.</p>

<pre><code>puts 1 &gt; -1 and 257 &lt; 256
# =&gt; false

puts 1 &gt; -1 &amp;&amp; 257 &lt; 256
# =&gt; true
</code></pre>
<h4> BobRodes, Comment 96155192 Score: 1: </h4>@JakubArnold Sarcasm is never helpful. Examples sometimes are.<br><h4> BobRodes, Comment 96192992 Score: 1: </h4>@JakubArnold I still found this example helpful.<br><h4> Rich_F, Comment 98055882 Score: 0: </h4>I&#39;m getting odd results as well.  v1 = true and false p v1					# =&gt; app.rb: true, IRB: false v2 = true &amp;&amp; false p v2					# =&gt; app.rb: false, IRB: false puts 1 &gt; -1 &amp;&amp; 257 &lt; 256	# =&gt; app.rb: false, IRB: false<br><h4> Jakub Arnold, Comment 96162592 Score: 0: </h4>@BobRodes It wasn&#39;t a sarcasm. There are 7 answers, 6 of which already have examples.<br>------------------------------------------------------------------ <br><h3> marcingo, Id: 77742597, Score: 0: </h3><p>For me the behavior of <code>and</code> as opposed to modifier <code>if</code> is preferable if I want to exploit a side effect of the conditional expression - watch the <code>undefined local variable or method 'y'</code> in the first attempt:</p>
<pre><code>km@latika:~$ irb
irb(main):001:0&gt; x=y if (y=&quot;hello&quot;)
(irb):1: warning: found `= literal' in conditional, should be ==
(irb):1:in `&lt;main&gt;': undefined local variable or method `y' for main:Object (NameError)
        from /usr/lib/ruby/gems/3.1.0/gems/irb-1.4.1/exe/irb:11:in `&lt;top (required)&gt;'
        from /bin/irb:25:in `load'
        from /bin/irb:25:in `&lt;main&gt;'
irb(main):002:0&gt; quit
</code></pre>
<p>At this point though <code>y</code> is already assigned, so I restart <code>irb</code> to demonstrate my point with a fresh start:</p>
<pre><code>km@latika:~$ irb
irb(main):001:0&gt; y=&quot;hello&quot; and x=y
=&gt; &quot;hello&quot;
irb(main):002:0&gt; quit
</code></pre>
<p>In my opinion this is the nicest way to override a variable with something not nil (or false, but that is outside the point). Especially if instead of <code>&quot;hello&quot;</code> we have <code>complicated_calculation()</code>.</p>
