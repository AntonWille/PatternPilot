 <h2> Title: How to check whether a string contains a substring in Ruby </h2> <h3> BSalunke, question_id: 8258517 </h3>Score: 873, Tags: {ruby,string} <br><p>I have a string variable with content:</p>

<pre><code>varMessage =   
            "hi/thsid/sdfhsjdf/dfjsd/sdjfsdn\n"


            "/my/name/is/balaji.so\n"
            "call::myFunction(int const&amp;)\n"
            "void::secondFunction(char const&amp;)\n"
             .
             .
             .
            "this/is/last/line/liobrary.so"
</code></pre>

<p>In the string I have to find a sub-string:</p>

<pre><code>"hi/thsid/sdfhsjdf/dfjsd/sdjfsdn\n"

"/my/name/is/balaji.so\n"
"call::myFunction(int const&amp;)\n"
</code></pre>

<p>How can I find it? I need to determine whether the sub-string is present or not.</p>
<h4> Comment 10170107 Andrew Grimm: </h4>Related question: <a href="http://stackoverflow.com/questions/3876246/best-way-to-find-a-sub-string-in-a-string" title="best way to find a sub string in a string">stackoverflow.com/questions/3876246/&hellip;</a><br><h4> Comment 106539238 the Tin Man: </h4>See <a href="https://stackoverflow.com/a/3878656/128421">stackoverflow.com/a/3878656/128421</a> for a breakdown of various ways to do this.<br>------------------------------------------------------------------ <br><h3> Answer 8258571 Adam Lear: </h3><p>You can use the <a href="https://ruby-doc.org/core-1.9.3/String.html#method-i-include-3F" rel="noreferrer"><code>include?</code></a> method:</p>

<pre><code>my_string = "abcdefg"
if my_string.include? "cde"
   puts "String includes 'cde'"
end
</code></pre>
<h4> Comment 34459968 phortx: </h4>Remember that <code>include?</code> is case sensetive. So if <code>my_string</code> in the example above would be something like <code>&quot;abcDefg&quot;</code> (with an uppercase <code>D</code>), <code>include?(&quot;cde&quot;)</code> would return <code>false</code>. You may want to do a <code>downcase()</code> before calling <code>include?()</code>.<br><h4> Comment 87502548 Gary: </h4>Include on it&#39;s own is not ideal as it can throw a NoMethodError if nil      test = nil     test.include?(&quot;test&quot;)  NoMethodError: undefined method `include?&#39; for nil:NilClass   should always convert the value being included to the expected value:-      test.to_s.include?(&quot;test&quot;)<br><h4> Comment 109208432 Luke Griffiths: </h4>@Gary&#39;s advice holds <i>if</i> your goal is to minimize exceptions raised in this part of the code. That is not always the best goal. Generally if you expect a string at this point in the code and a value is nil instead, that implies something unexpected has occurred and an exception being raised is appropriate. If the existence of a nil here is unexpected, using <code>to_s</code> will hide the problem and increase the distance between the source and the detection of the problem, making it harder to debug.<br><h4> Comment 126681619 David Aldridge: </h4>Alternatively, avoid sending methods to nil with a safe navigation operator <code>test&amp;.include?(&quot;test&quot;)</code><br>------------------------------------------------------------------ <br><h3> Answer 24507844 Clint Pachl: </h3><p>If case is irrelevant, then a <strong>case-insensitive regular expression</strong> is a good solution:</p>
<pre><code>/bcd/i =~ 'aBcDe'   # returns nil if no match
</code></pre>
<p>or</p>
<pre><code>/bcd/i === 'aBcDe'  # returns false if no match
</code></pre>
<p>This will also work for multi-line strings.</p>
<p>See Ruby's <a href="https://docs.ruby-lang.org/en/master/Regexp.html" rel="nofollow noreferrer">Regexp</a> class for more information.</p>
<h4> Comment 47842422 Jacklynn: </h4>If you are matching against user input and using this technique, remember to use <code>Regexp.escape</code> on the string.  For most use cases, <code>some_str.include? substr.downcase()</code> should work faster and be more readable.<br><h4> Comment 60168350 the Tin Man: </h4>Using a regular expression this way isn&#39;t necessarily going to be faster than using <code>&#39;aBcDe&#39;.downcase.include?(&#39;bcd&#39;)</code>. Regex have their purpose but don&#39;t use them when the built-in methods are faster. Benchmarking with the actual data being tested can reveal much.<br><h4> Comment 85644703 slindsey3000: </h4>This does NOT evaluate as true. It evaluates to 1 which is not true.<br><h4> Comment 107176061 scrthq: </h4>alternatively, use match? to return a boolean: <code>&#47;bcd&#47;i.match?(&#39;aBcDe&#39;)</code><br><h4> Comment 85644789 slindsey3000: </h4>!!(&#39;aBcDe&#39; =~ /bcd/i) will evaluate to true or false. Use the !! idiom<br><h4> Comment 133288120 ShadowRanger: </h4>@scrthq: Or for minimal characters for code golfing, use <code>===</code> instead, <code>&#47;bcd&#47;i===&#39;aBcDe&#39;</code>. <code>.match?</code> is definitely more descriptive for normal code though.<br>------------------------------------------------------------------ <br><h3> Answer 25053388 Oto Brglez: </h3><p>You can also do this...</p>

<pre><code>my_string = "Hello world"

if my_string["Hello"]
  puts 'It has "Hello"'
else
  puts 'No "Hello" found'
end

# =&gt; 'It has "Hello"'
</code></pre>

<p>This example uses Ruby's String <a href="https://ruby-doc.org/core-2.7.0/String.html#method-i-5B-5D" rel="noreferrer"><code>#[]</code></a> method.</p>
<h4> Comment 95549808 luissimo: </h4><code>#include?</code> doesn&#39;t work when you are working with sentences with spaces inside because <code>#include</code> splits the sentence in words and then uses the words as separate array values. This works perfectly for sentences. +1<br><h4> Comment 121558204 3limin4t0r: </h4>@luissimo <code>include?</code> does not split the string. It simply checks if a string is or isn&#39;t within an other string. <code>&#39;Hello World! How are you?&#39;.include?(&#39;e y&#39;) #=&gt; true</code> This answer does the same thing. <code>&#39;Hello World! How are you?&#39;[&#39;e y&#39;] #=&gt; &quot;e y&quot;</code> (which is truthy), <code>nil</code> is returned if there is no match (which is falsy).<br><h4> Comment 70702203 Shannon Scott Schupbach: </h4>This is a neat trick I&#39;ve not seen before. But <code>#include?</code> is still a little faster.<br><h4> Comment 106516775 the Tin Man: </h4>See Ruby&#39;s String <a href="https://ruby-doc.org/core-2.7.0/String.html#method-i-5B-5D" rel="nofollow noreferrer"><code>[]</code></a> method for more information.<br>------------------------------------------------------------------ <br><h3> Answer 31326018 acib708: </h3><p>Expanding on Clint Pachl's answer:</p>

<p>Regex matching in Ruby returns <code>nil</code> when the expression doesn't match. When it does, it returns the index of the character where the match happens. For example:</p>

<pre><code>"foobar" =~ /bar/  # returns 3
"foobar" =~ /foo/  # returns 0
"foobar" =~ /zzz/  # returns nil
</code></pre>

<p>It's important to note that in Ruby only <code>nil</code> and the boolean expression <code>false</code> evaluate to false. Everything else, including an empty Array, empty Hash, or the Integer 0, evaluates to true.</p>

<p>That's why the <code>/foo/</code> example above works, and why.</p>

<pre><code>if "string" =~ /regex/
</code></pre>

<p>works as expected, only entering the 'true' part of the <code>if</code> block if a match occurred.</p>
<h4> Comment 123015536 mahfuz: </h4><code>if( (&quot;foobar&quot; =~ &#47;foo&#47;) == nil ) puts &#39;Not Found&#39; else puts &#39;Found&#39; end</code> It should work.<br>------------------------------------------------------------------ <br><h3> Answer 29508802 stwr667: </h3><p>A more succinct idiom than the accepted answer above that's available in Rails (from 3.1.0 and above) is <code>.in?</code>:</p>

<pre><code>my_string = "abcdefg"
if "cde".in? my_string
  puts "'cde' is in the String."
  puts "i.e. String includes 'cde'"
end
</code></pre>

<p>I also think it's more readable.</p>

<p>See the <a href="http://apidock.com/rails/v3.1.0/Object/in%3F" rel="noreferrer"><code>in?</code></a> documentation for more information. </p>

<p>Note again that it's only available in <em>Rails</em>, and not pure Ruby.</p>
<h4> Comment 81501952 dft: </h4>This relies on rails, the OP asked for a ruby solution<br><h4> Comment 81547782 stwr667: </h4>That&#39;s right, although since a significant proportion of Ruby developers are using Rails, I thought this might be a preferred solution for some due to its clarity and brevity.<br><h4> Comment 106539094 the Tin Man: </h4>See <a href="https://stackoverflow.com/a/4239625/128421">stackoverflow.com/a/4239625/128421</a>. It&#39;s in Rails, but is easily accessed from regular Ruby using Rails&#39; <a href="https://edgeguides.rubyonrails.org/active_support_core_extensions.html" rel="nofollow noreferrer">Active Support Core Extensions</a> which allow easy cherry-picking of small groups of methods such as only <a href="https://edgeguides.rubyonrails.org/active_support_core_extensions.html#in-questionmark" rel="nofollow noreferrer"><code>in?</code></a>.<br><h4> Comment 106564370 stwr667: </h4>Correct @theTinMan. <code>&quot;cde&quot;.in? my_string</code> in pure Ruby yields <code>NoMethodError</code>. But with <code>require &#39;active_support&#47;core_ext&#47;object&#47;inclusion&#39;</code> it works, which can be loaded either from <a href="https://github.com/rails/rails" rel="nofollow noreferrer">Rails</a> itself or from the cut-down <a href="https://github.com/rails/rails/tree/master/activesupport" rel="nofollow noreferrer">Active Support Core Extensions</a>.<br>------------------------------------------------------------------ <br><h3> Answer 28149520 Mauro: </h3><p>Ternary way</p>

<pre><code>my_string.include?('ahr') ? (puts 'String includes ahr') : (puts 'String does not include ahr')
</code></pre>

<p>OR</p>

<pre><code>puts (my_string.include?('ahr') ? 'String includes ahr' : 'String not includes ahr')
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 44934645 dawg: </h3><p>You can use the <a href="http://ruby-doc.org/core-2.4.1/String.html#method-i-5B-5D" rel="noreferrer">String Element Reference</a> method which is <code>[]</code></p>

<p>Inside the <code>[]</code> can either be a literal substring, an index, or a regex:</p>

<pre><code>&gt; s='abcdefg'
=&gt; "abcdefg"
&gt; s['a']
=&gt; "a"
&gt; s['z']
=&gt; nil
</code></pre>

<p>Since <code>nil</code> is functionally the same as <code>false</code> and any substring returned from <code>[]</code> is <code>true</code> you can use the logic as if you use the method <code>.include?</code>:</p>

<pre><code>0&gt; if s[sub_s]
1&gt;    puts "\"#{s}\" has \"#{sub_s}\""
1&gt; else 
1*    puts "\"#{s}\" does not have \"#{sub_s}\""
1&gt; end
"abcdefg" has "abc"

0&gt; if s[sub_s]
1&gt;    puts "\"#{s}\" has \"#{sub_s}\""
1&gt; else 
1*    puts "\"#{s}\" does not have \"#{sub_s}\""
1&gt; end
"abcdefg" does not have "xyz" 
</code></pre>

<p>Just make sure you don't confuse an index with a sub string:</p>

<pre><code>&gt; '123456790'[8]    # integer is eighth element, or '0'
=&gt; "0"              # would test as 'true' in Ruby
&gt; '123456790'['8']  
=&gt; nil              # correct
</code></pre>

<p>You can also use a regex:</p>

<pre><code>&gt; s[/A/i]
=&gt; "a"
&gt; s[/A/]
=&gt; nil
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 49662890 Sagar Pandya: </h3><blockquote>
  <p>How to check whether a string contains a substring in Ruby?</p>
</blockquote>

<p>When you say 'check', I assume you want a boolean returned in which case you may use <a href="http://ruby-doc.org/core-2.5.0/String.html#method-i-match-3F" rel="nofollow noreferrer"><code>String#match?</code></a>. <code>match?</code> accepts strings or regexes as its first parameter, if it's the former then it's automatically converted to a regex. So your use case would be:</p>

<pre><code>str = 'string'
str.match? 'strings' #=&gt; false
str.match? 'string'  #=&gt; true
str.match? 'strin'   #=&gt; true
str.match? 'trin'    #=&gt; true
str.match? 'tri'     #=&gt; true
</code></pre>

<p><code>String#match?</code> has the added benefit of an optional second argument which specifies an index from which to search the string. By default this is set to <code>0</code>.</p>

<pre><code>str.match? 'tri',0   #=&gt; true
str.match? 'tri',1   #=&gt; true
str.match? 'tri',2   #=&gt; false
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 36348953 Prabhakar: </h3><pre><code>user_input = gets.chomp
user_input.downcase!

if user_input.include?('substring')
  # Do something
end
</code></pre>

<p>This will help you check if the string contains substring or not</p>

<pre><code>puts "Enter a string"
user_input = gets.chomp  # Ex: Tommy
user_input.downcase!    #  tommy


if user_input.include?('s')
    puts "Found"
else
    puts "Not found"
end
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 72749649 d1jhoni1b: </h3><p>In case you can not use one of the libs mentioned above, one could achieve the same with simple text search (this is ignoring cases because of <code>downcase</code>):</p>
<pre><code>ADD_BUTTON_TEXTS = [&quot;add to cart&quot;, &quot;add to basket&quot;].freeze
target_text = &quot;AdD tO cArT&quot;
ADD_BUTTON_TEXTS.each do |text|
  puts &quot;Text was found&quot; if target_text.downcase.include?(text)
end
</code></pre>
