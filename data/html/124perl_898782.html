 <h2> Title: How do I tell CPAN to install all dependencies? </h2> <h4> Nifle, question_id: 898782 </h4>Score: 124, Tags: {perl,dependencies,cpan} <br><p>How do I tell CPAN to install all dependencies?</p>

<p>I tried setting these in <code>cpan</code>:</p>

<pre><code>cpan&gt; o conf prerequisites_policy follow
cpan&gt; o conf commit
</code></pre>

<p>I still had to answer "y" a couple of times (but fewer than before it feels like).</p>

<p>Is there a way to get it to always go ahead and install? I want to make it unattended. </p>

<p>It would seem that I want a flag to always trust CPAN to do the right thing, and if it suggests an answer I would like to follow it (always hit <kbd>Enter</kbd> when it asks something).</p>
<h4> brian d foy, Id: 718509 Score: 1: </h4>Perhaps I should add a feature to my cpan script to set the auto install environment variables based on the CPAN.pm setting. See tsee&#39;s answer, which is the other half of the problem.<br>------------------------------------------------------------------ <br><h3> kbosak, Id: 977996, Score: 83: </h3><p>Try setting PERL_MM_USE_DEFAULT like so:</p>

<pre><code>PERL_MM_USE_DEFAULT=1 perl -MCPAN -e 'install My::Module'
</code></pre>

<p>It should make CPAN answer the default to all prompts.</p>
<h4> andersand, Comment 13599280 Score: 3: </h4>If you&#39;re on linux, add the line <code>export PERL_MM_USE_DEFAULT=1</code> to your ~/.bashrc<br><h4> Yann Sagon, Comment 34620006 Score: 1: </h4>If you get an error <code>Can&#39;t locate object method &quot;install&quot; via package &quot;xxx&quot; at -e line 1.</code> add a &quot;+&quot; right before the module name.<br><h4> Geoff, Comment 11751015 Score: 0: </h4>Any way to make this persistent, so you can just type &quot;install My:Module&quot; into cpan each time and it will remember this?  Edit Config.pm?<br>------------------------------------------------------------------ <br><h3> Joel Berger, Id: 7949374, Score: 60: </h3><p>The latest and greatest answer to this question is to use <a href="http://p3rl.org/App%3a%3acpanminus"><code>cpanm</code></a> instead (also referred to as App::cpanminus or cpanminus)! </p>

<blockquote>
  <p>DESCRIPTION</p>
  
  <p>cpanminus is a script to get, unpack, build and install modules from
  CPAN and does nothing else. </p>
  
  <p>It's dependency free (can bootstrap
  itself), requires zero configuration, and stands alone. When running,
  it requires only 10MB of RAM.</p>
</blockquote>

<p>To bootstrap install it:</p>

<pre><code>curl -L http://cpanmin.us | perl - --sudo App::cpanminus
</code></pre>

<p>or if you are using <a href="http://p3rl.org/App%3a%3aperlbrew"><code>perlbrew</code></a> simply</p>

<pre><code>perlbrew install-cpanm
</code></pre>

<p>or from cpan itself:</p>

<pre><code>cpan install App::cpanminus
</code></pre>

<p>From then on install modules by executing (as root if necessary)</p>

<pre><code>cpanm Foo::Bar
</code></pre>
<h4> reinierpost, Comment 46441902 Score: 3: </h4>I have this problem when I use <code>cpanm</code>, so telling me to use it is not the solution here.<br><h4> Joel Berger, Comment 46526965 Score: 3: </h4>rather than a blind comment, please ask as a new question and link here. I suspect a permissions issue might be your problem<br><h4> Pablo Bianchi, Comment 96003333 Score: 0: </h4>On an Ubuntu 18.04 I installed with <code>sudo apt install cpanminus make</code>.<br><h4> Richard Smith, Comment 107511588 Score: 0: </h4>Down-voting. Don&#39;t recommend that people execute the output of curl.<br><h4> Scott Prive, Comment 116047151 Score: 0: </h4>Up-voting. &quot;The output of curl&quot; is how to install a great MANY things, from k8s to (on some systems) Docker. The curl is used in context of a legitimate project, not random advice to run curl output, but besides that it is out of scope to impose your personal policy here. Be aware you can always save the curl to disk, inspect it then run it.<br>------------------------------------------------------------------ <br><h3> Atento, Id: 21736287, Score: 34: </h3><p>Here is the one-liner making these changes permanent including automatic first-time CPAN configuration:</p>

<pre><code>perl -MCPAN -e 'my $c = "CPAN::HandleConfig"; $c-&gt;load(doit =&gt; 1, autoconfig =&gt; 1); $c-&gt;edit(prerequisites_policy =&gt; "follow"); $c-&gt;edit(build_requires_install_policy =&gt; "yes"); $c-&gt;commit'
</code></pre>

<p>Or combine it with <code>local::lib</code> module for non-privileged users:</p>

<pre><code>perl -MCPAN -Mlocal::lib=~/perl5 -e 'my $c = "CPAN::HandleConfig"; $c-&gt;load(doit =&gt; 1, autoconfig =&gt; 1); $c-&gt;edit(prerequisites_policy =&gt; "follow"); $c-&gt;edit(build_requires_install_policy =&gt; "yes"); $c-&gt;commit'
</code></pre>

<p>Run it before using the CPAN shell or whatever.</p>
<h4> filimonov, Comment 58844983 Score: 1: </h4>isn&#39;t it the same as in @sdf anwer?<br>------------------------------------------------------------------ <br><h3> sdf, Id: 2065608, Score: 32: </h3><p>Changing the following parameter on top of prerequisites_policy follows.</p>

<pre><code>cpan&gt; o conf prerequisites_policy 'follow'
cpan&gt; o conf build_requires_install_policy yes
cpan&gt; o conf commit
</code></pre>

<p>This will change it from "ask/yes" to "yes" and stop it asking you.</p>
<h4> Dat TT, Comment 75186148 Score: 0: </h4>Thanks! I need these two options so that it did not ask me again and again!<br><h4> ikegami, Comment 76236817 Score: 0: </h4>Note that these are the default values for these settings.<br>------------------------------------------------------------------ <br><h3> Mark C, Id: 1931259, Score: 28: </h3><p>Here's what I'm pretty sure you're looking for:</p>

<pre><code>cpan&gt; o conf prerequisites_policy follow
cpan&gt; o conf commit
</code></pre>
------------------------------------------------------------------ <br><h3> Sinan &#220;n&#252;r, Id: 898865, Score: 6: </h3><p>Set </p>

<pre><code>prerequisites_policy
</code></pre>

<p>in the configuration.</p>

<p>See <a href="https://metacpan.org/pod/CPAN#Config-Variables" rel="nofollow noreferrer">Config Variables</a>.</p>
<h4> Sinan &#220;n&#252;r, Comment 706925 Score: 2: </h4>Are the prompts related to downloading module source? If so, see <b>connect_to_internet_ok</b> option. Otherwise, tell us what other prompts you are trying to avoid.<br><h4> OrangeDog, Comment 21421212 Score: 1: </h4>Link now appears to be dead<br><h4> Nifle, Comment 707025 Score: 0: </h4>Well all basically, these last ones was &quot;optional modules&quot;.<br><h4> brian d foy, Comment 718501 Score: 0: </h4>The problem is things that auto-install on their own. CPAN.pm doesn&#39;t get a chance to handle that stuff. See tsee&#39;s answer.<br>------------------------------------------------------------------ <br><h3> tsee, Id: 899368, Score: 6: </h3><p>Maybe it's related to <a href="http://search.cpan.org/dist/ExtUtils-AutoInstall" rel="noreferrer">ExtUtils::AutoInstall</a> or <a href="http://search.cpan.org/dist/Module-AutoInstall" rel="noreferrer">Module::AutoInstall</a> being used. Try setting the PERL_AUTOINSTALL environment variable. (Cf. the documentation of those modules.)</p>
------------------------------------------------------------------ <br><h3> Vladimir Marchenko, Id: 31702930, Score: 4: </h3><p>I found this to be, by far, the quickest and most reliable way to install CPAN modules:</p>

<pre><code>yes | perl -MCPAN -e "CPAN::Shell-&gt;notest(qw!install Your::Module!)"
</code></pre>
<h4> William Turrell, Comment 51344624 Score: 0: </h4>This does not answer the question - the OP wants a way to automatically install dependencies / automatically respond to prompts.<br><h4> Vladimir Marchenko, Comment 51344749 Score: 0: </h4>In fact,  it does install dependencies and automatically responds to prompts. I use it all the time, including this very moment. But  there is a need for a small modification:  <code>yes|&#47;root&#47;bin&#47;perl -MCPAN -e &quot;CPAN::Shell-&gt;notest(qw!install Your::Module!)&quot;</code><br><h4> Peter Mortensen, Comment 70769530 Score: 0: </h4>What is &quot;<code>yes</code>&quot; supposed to do?<br>------------------------------------------------------------------ <br><h3> numberwhun, Id: 900548, Score: 3: </h3><p>Personally I have only tried a couple of times to modify the settings in that way and have actually found it easier to drop into the <code>CPAN.pm</code> shell by giving <code>cpan</code> no arguments, then configuring <code>CPAN.pm</code> from the interactive prompt:</p>

<pre><code>$ cpan
cpan&gt; o conf init
</code></pre>

<p>This will initiate the <code>CPAN.pm</code> interfaces configuration utility. Simply run through it and specify "follow" where you need to (I forget the question offhand), and you should be good to go.</p>
<h4> ikegami, Comment 76236683 Score: 0: </h4>You can pass specific settings to <code>init</code>. For example, <code>o conf init prerequisites_policy</code>. That way, you don&#39;t have to go through the long initialization process, but still get the friendly prompt for the setting in question<br>------------------------------------------------------------------ <br><h3> Joel G Mathew, Id: 45469759, Score: 3: </h3><p>I'm writing this for benefit of people who may have come to this page searching for a way to install all module dependencies needed by a particular perl script. I wrote a script for that:</p>

<p>It should be run as <code>./installdep.pl yourscript.pl</code></p>

<pre><code>#!/usr/bin/perl
`sudo apt install cpanminus`;
while (&lt;&gt;) {
    if (/USE /i)
    {
        my $line=$_;
        $line=~ s/\s//g;
        $line=~ /^(.*)\./;
        $line=~ s/\;//;
        $line=~s/^USE//i;
        $line=~s/lib.*//i;
        $line=~s/feature.*//i;
        $line=~s/strict//i;
        $line=~s/warnings//i;
        $line =~ s/^(.*)\(.*/$1/;
        unless ($line eq '') {
        my $cmd='sudo cpanm '.$line;
        print "Installing $line \n";
        open my $cmd_fh, "$cmd |";
        while (&lt;$cmd_fh&gt;) {
          print "$_";
        }
        close $cmd_fh;
        print "\n";
    }
    }
}
</code></pre>

<p>This will use cpanminus to install all module dependencies required by your script. If cpanm isnt installed, it will install it.    </p>
