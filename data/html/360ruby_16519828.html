 <h2> Title: Rails 4: before_filter vs. before_action </h2> <h3> freemanoid, question_id: 16519828 </h3>Score: 360, Tags: {ruby-on-rails,ruby,ruby-on-rails-4,crud} <br><p>In rails >4.0.0 generators creates CRUD operations with <code>before_action</code> not <code>before_filter</code>. It seems to do the same thing. So what's the difference between these two? </p>
------------------------------------------------------------------ <br><h3> Answer 16519841 freemanoid: </h3><p>As we can <a href="https://github.com/rails/rails/blob/master/actionpack/lib/abstract_controller/callbacks.rb" rel="noreferrer">see</a> in <code>ActionController::Base</code>, <code>before_action</code> is just a <a href="https://github.com/rails/rails/commit/9d62e04838f01f5589fa50b0baa480d60c815e2c" rel="noreferrer">new syntax</a> for <code>before_filter</code>.</p>
<p>However the <code>before_filter</code> syntax <a href="https://github.com/rails/rails/blob/v5.0.0.beta2/actionpack/lib/abstract_controller/callbacks.rb#L190-L193" rel="noreferrer">is deprecated</a> in <strong>Rails 5.0</strong> and will be removed in <strong>Rails 5.1</strong></p>
<h4> Comment 23720191 freemanoid: </h4>On the one hand deprecating has sense but on the other there is a good practice in rails and in ruby to have several aliases for one method so you can use it in different contexts without loss of meaning.<br><h4> Comment 44376649 Grant Birchmeier: </h4>If it&#39;s discouraged, then why <i>wouldn&#39;t</i> you deprecate it?  Silly.<br><h4> Comment 48095617 Grant Birchmeier: </h4>@JohnWhitley - The spamming is for a reason.  Any well-disciplined project should address deprecation warnings by <i>not using deprecated functions</i>.<br><h4> Comment 43035254 onetwopunch: </h4>In 4.2 They are not deprecating it, but removing it from the docs since it is discouraged. <a href="http://edgeguides.rubyonrails.org/4_2_release_notes.html#action-pack-notable-changes" rel="nofollow noreferrer">edgeguides.rubyonrails.org/&hellip;</a><br><h4> Comment 48014180 Grant Birchmeier: </h4>@JohnWhitley - deprecation doesn&#39;t break the API.  That&#39;s the whole point of deprecation.<br><h4> Comment 57174661 Will: </h4>They are officially deprecated in Rails 5 and their use will generate warnings.<br><h4> Comment 58632232 Marius Butuc: </h4>The <code>&lt;callback&gt;_filter</code>s are deprecated in Rails 5.0 and will be removed in 5.1: <a href="https://github.com/rails/rails/blob/v5.0.0.beta2/actionpack/lib/abstract_controller/callbacks.rb#L190-L193" rel="nofollow noreferrer">github.com/rails/rails/blob/v5.0.0.beta2/actionpack/lib/&hellip;</a><br><h4> Comment 48074642 John Whitley: </h4>@GrantBirchmeier yes, you can technically ship with deprecation warnings, but the pain level is high since deprecation invariably spams the heck out of your test suite runs.  For any well-disciplined project that keeps clean test runs, this becomes <i>de facto</i> breakage.  Therefore, turning on deprecation warnings where there isn&#39;t a priority to remove the API in the immediately following release causes an unnecessary fire-drill among the Rails userbase.<br><h4> Comment 51694158 Nerdmaster: </h4>It&#39;s deprecated.  From wikipedia: &quot;Deprecation is an attribute applied to a computer software feature, characteristic, or practice to indicate that it should be avoided&quot;.  So essentially they deprecated it but have yet to mark it as such.  Clear communication of these things is overrated.<br><h4> Comment 52319696 dvdchr: </h4>It&#39;s there: &quot;If your application currently depends on these methods, you should use the replacement <code>*_action</code> methods instead. <b>These methods will be deprecated in the future and will eventually be removed from Rails.</b>&quot; <a href="http://edgeguides.rubyonrails.org/4_2_release_notes.html#action-pack-notable-changes" rel="nofollow noreferrer">edgeguides.rubyonrails.org/&hellip;</a><br><h4> Comment 47973859 John Whitley: </h4>@GrantBirchmeier, it&#39;s &quot;discouraged in favor of the <code>*_action</code> family of methods&quot;, and will be deprecated in the future per @jryancanty&#39;s link above. Even Rails has to occasionally bow to not breaking all of the APIs all of the time.<br>------------------------------------------------------------------ <br><h3> Answer 23495430 Awais: </h3><p>It is just syntax difference, in rails app there is CRUD, and seven actions basically by name <strong>index</strong>, <strong>new</strong>, <strong>create</strong>, <strong>show</strong>, <strong>update</strong>, <strong>edit</strong>, <strong>destroy</strong>.</p>

<p>Rails 4 make it developer friendly to change syntax <strong>before filter</strong> to <strong>before action</strong>.</p>

<p><strong>before_action</strong> call method before the actions which we declare, like</p>

<pre><code>before_action :set_event, only: [:show, :update, :destroy, :edit]
</code></pre>

<p><strong>set_event</strong> is a method which will call always before show, update, edit and destroy.</p>
------------------------------------------------------------------ <br><h3> Answer 16519961 Matthias: </h3><p>It is just a name change. <code>before_action</code> is more specific, because it gets executed before an action.</p>
------------------------------------------------------------------ <br><h3> Answer 43246734 yusefu: </h3><p>To figure out what is the difference between before_action and before_filter, we should understand the difference between action and filter.</p>

<p>An action is a method of a controller to which you can route to.
For example, your user creation page might be routed to UsersController#new - new is the action in this route.</p>

<p>Filters run in respect to controller actions - before, after or around them.
These methods can halt the action processing by redirecting or set up common data to every action in the controller.</p>

<blockquote>
  <p>Rails 4 –> _action</p>
  
  <p>Rails 3 –> _filter</p>
</blockquote>
------------------------------------------------------------------ <br><h3> Answer 50098996 Pankaj Dhote: </h3><p>before_filter/before_action: means anything to be executed before any action executes.</p>

<p>Both are same. they are just alias for each other as their behavior is same.</p>
------------------------------------------------------------------ <br><h3> Answer 67958358 iarunpaul: </h3><p>use only before_action with rspec-rails, capybara as before_filter will misbehave to give surprises during testing</p>
<pre><code>class TodosController &lt; ApplicationController
  before_filter :authenticate

  def index
    @todos = Todo.all
  end
  ## Rest of the code follows
end
</code></pre>
<p>before_filter</p>
<pre><code>feature 'User creates todo' do
  scenario 'successfully' do
    sign_in
    click_on 'Add Todo'
    fill_in 'Title', with: &quot;Buy Milk&quot;
    click_on 'Submit'

    expect(page).to have_css '.todos li', text: &quot;Buy Milk&quot;
  end
end
</code></pre>
<p>the expected failure is</p>
<pre><code>NoMethodError:
       undefined method `authenticate' for #&lt;TodosController:0x0000558b68573f48&gt;
</code></pre>
<p>but before_filter gives...</p>
<pre><code>ActionView::Template::Error:
       undefined method `each' for nil:NilClass
</code></pre>
<p>That is, somehow the hook runs without error and but the controller goes to view with a @todos uninitialized
Better save time, use non deprecated codes...</p>
