 <h2> Title: How to call shell commands from Ruby </h2> <h4> CodingWithoutComments, question_id: 2232 </h4>Score: 1258, Tags: {ruby,shell,interop} <br><p>How do I call shell commands from inside of a Ruby program? How do I then get output from these commands back into Ruby?</p>
<h4> Kelvin, Id: 94171948 Score: 6: </h4>I&#39;m surprised no one mentioned <code>Shellwords.escape</code> (<a href="http://ruby-doc.org/stdlib-2.5.3/libdoc/shellwords/rdoc/Shellwords.html#method-c-shellescape" rel="nofollow noreferrer">doc</a>). You don&#39;t want to be inserting user-input directly into shell commands - escape it first! See also <a href="https://www.owasp.org/index.php/Command_Injection" rel="nofollow noreferrer">command injection</a>.<br><h4> the Tin Man, Id: 74069894 Score: 4: </h4>While this question is useful, it&#39;s not asked well. Ruby has many ways to call sub-shells that are well documented and easily found by reading the <a href="https://ruby-doc.org/core-2.4.1/Kernel.html#method-i-60" rel="nofollow noreferrer">Kernel</a> and <a href="https://ruby-doc.org/stdlib-2.4.1/libdoc/open3/rdoc/index.html" rel="nofollow noreferrer">Open3</a> documentation and searching here on SO.<br><h4> Joshua Cheek, Id: 87962624 Score: 3: </h4>Sadly this topic is quite complex. <code>Open3</code> (<a href="https://www.rubydoc.info/stdlib/open3/Open3" rel="nofollow noreferrer">docs</a>) is the best choice for most situations, IMO, but on older versions of Ruby, it won&#39;t respect a modified <code>PATH</code> (<a href="https://bugs.ruby-lang.org/issues/8004" rel="nofollow noreferrer">bugs.ruby-lang.org/issues/8004</a>), and depending on how you pass args (specifically, if you use opts hash with non-keywords), it can break. But, if you hit those situations, then you&#39;re doing something pretty advanced and you can figure out what to do by reading the implementation of <code>Open3</code>.<br>------------------------------------------------------------------ <br><h3> Steve Willard, Id: 2400, Score: 1468: </h3><p>This explanation is based on a commented <a href="http://gist.github.com/4069" rel="noreferrer">Ruby script</a> from a friend of mine. If you want to improve the script, feel free to update it at the link.</p>

<p>First, note that when Ruby calls out to a shell, it typically calls <code>/bin/sh</code>, <em>not</em> Bash. Some Bash syntax is not supported by <code>/bin/sh</code> on all systems.</p>

<p>Here are ways to execute a shell script:</p>

<pre><code>cmd = "echo 'hi'" # Sample string that can be used
</code></pre>

<ol>
<li><p><code>Kernel#`</code> , commonly called backticks – <code>`cmd`</code></p>

<p>This is like many other languages, including Bash, PHP, and Perl.</p>

<p>Returns the result (i.e. standard output) of the shell command.</p>

<p>Docs: <a href="http://ruby-doc.org/core/Kernel.html#method-i-60" rel="noreferrer">http://ruby-doc.org/core/Kernel.html#method-i-60</a></p>

<pre><code>value = `echo 'hi'`
value = `#{cmd}`
</code></pre></li>
<li><p>Built-in syntax, <code>%x( cmd )</code></p>

<p>Following the <code>x</code> character is a delimiter, which can be any character.
If the delimiter is one of the characters <code>(</code>, <code>[</code>, <code>{</code>, or <code>&lt;</code>,
the literal consists of the characters up to the matching closing delimiter,
taking account of nested delimiter pairs. For all other delimiters, the
literal comprises the characters up to the next occurrence of the
delimiter character.  String interpolation <code>#{ ... }</code> is allowed.</p>

<p>Returns the result (i.e. standard output) of the shell command, just like the backticks.</p>

<p>Docs: <a href="https://docs.ruby-lang.org/en/master/syntax/literals_rdoc.html#label-Percent+Strings" rel="noreferrer">https://docs.ruby-lang.org/en/master/syntax/literals_rdoc.html#label-Percent+Strings</a></p>

<pre><code>value = %x( echo 'hi' )
value = %x[ #{cmd} ]
</code></pre></li>
<li><p><code>Kernel#system</code></p>

<p>Executes the given command in a subshell. </p>

<p>Returns <code>true</code> if the command was found and run successfully, <code>false</code> otherwise.</p>

<p>Docs: <a href="http://ruby-doc.org/core/Kernel.html#method-i-system" rel="noreferrer">http://ruby-doc.org/core/Kernel.html#method-i-system</a></p>

<pre><code>wasGood = system( "echo 'hi'" )
wasGood = system( cmd )
</code></pre></li>
<li><p><code>Kernel#exec</code></p>

<p>Replaces the current process by running the given external command.</p>

<p>Returns none, the current process is replaced and never continues.</p>

<p>Docs: <a href="http://ruby-doc.org/core/Kernel.html#method-i-exec" rel="noreferrer">http://ruby-doc.org/core/Kernel.html#method-i-exec</a></p>

<pre><code>exec( "echo 'hi'" )
exec( cmd ) # Note: this will never be reached because of the line above
</code></pre></li>
</ol>

<p>Here's some extra advice:
<code>$?</code>, which is the same as <code>$CHILD_STATUS</code>, accesses the status of the last system executed command if you use the backticks, <code>system()</code> or <code>%x{}</code>.
You can then access the <code>exitstatus</code> and <code>pid</code> properties:</p>

<pre><code>$?.exitstatus
</code></pre>

<p>For more reading see:</p>

<ul>
<li><a href="http://www.elctech.com/blog/i-m-in-ur-commandline-executin-ma-commands" rel="noreferrer">http://www.elctech.com/blog/i-m-in-ur-commandline-executin-ma-commands</a></li>
<li><a href="http://blog.jayfields.com/2006/06/ruby-kernel-system-exec-and-x.html" rel="noreferrer">http://blog.jayfields.com/2006/06/ruby-kernel-system-exec-and-x.html</a></li>
<li><a href="http://tech.natemurray.com/2007/03/ruby-shell-commands.html" rel="noreferrer">http://tech.natemurray.com/2007/03/ruby-shell-commands.html</a></li>
</ul>
<h4> Andrei Botalov, Comment 20944734 Score: 50: </h4>Backticks don&#39;t capture STDERR by default. Append ` 2&gt;&amp;1` to command if you want to capture<br><h4> skagedal, Comment 46271475 Score: 19: </h4>I think this answer would be slightly improved if it said that backticks and %x returned the &quot;output&quot;, rather than the &quot;result&quot;, of the given command. The latter could be mistaken for exit status. Or is that just me?<br><h4> hughdbrown, Comment 20626937 Score: 7: </h4>And IO#popen() and Open3#popen3(). <a href="http://mentalized.net/journal/2010/03/08/5_ways_to_run_commands_from_ruby/" rel="nofollow noreferrer">mentalized.net/journal/2010/03/08/&hellip;</a><br><h4> sschuberth, Comment 20896204 Score: 6: </h4>For the sake of completeness (as I first thought this would also be a Ruby command): <a href="http://rake.rubyforge.org/" rel="nofollow noreferrer">Rake</a> has <a href="http://rake.rubyforge.org/classes/FileUtils.html#M000018" rel="nofollow noreferrer">sh</a> which does &quot;Run the system command <code>cmd</code>. If multiple arguments are given the command is not run with the shell (same semantics as Kernel::exec and Kernel::system)&quot;.<br><h4> Omer Aslam, Comment 17110070 Score: 5: </h4>I need to log the outputs of my executable on production server but found no way. I used puts <code>#{cmd}</code> and logger.info(<code>#{cmd}</code>). Is there any way to log their outputs on production ?<br><h4> sschuberth, Comment 20896550 Score: 2: </h4>Also, <a href="https://makandracards.com/makandra/1243-execution-of-shell-code-in-ruby-scripts" rel="nofollow noreferrer">this blog post</a> additionally covers <code>spawn</code> and <code>open3</code>.<br><h4> baitisj, Comment 48723767 Score: 2: </h4>Here&#39;s a (good?) example of how spawn can be used in conjunction with an embedded shell script within a ruby program: <a href="https://github.com/baitisj/spark-ping/blob/master/spark-ping" rel="nofollow noreferrer">github.com/baitisj/spark-ping/blob/master/spark-ping</a> Look at lines 76 - 94.<br><h4> oals, Comment 62160974 Score: 1: </h4><code>Kernel#system</code> also has a no-shell-involved mode (as of Ruby 1.9). It&#39;s in the documentation you linked to. AFAIK only <code>Kernel#system</code> and <code>popen</code> variants have that feature. It&#39;s highly desirable for security (no need to escape shell metacharacters) and efficiency (no extra fork).<br><h4> Grant Birchmeier, Comment 102049586 Score: 1: </h4>@skagedal - I went ahead and made that edit, because it tripped me up too (as well as all the others that upvoted your comment).<br><h4> 6ft Dan, Comment 35745535 Score: 1: </h4>exec is nice because you can see the output on the console.<br><h4> sshaw, Comment 45287422 Score: 0: </h4>If you&#39;re going to be shelling out via <code>exec</code> and <code>system</code> and passing along some options I suggest you checkout my library <a href="https://github.com/sshaw/optout" rel="nofollow noreferrer">optout</a>.<br><h4> sshaw, Comment 115150650 Score: 0: </h4>For some use cases you may want to use <a href="https://github.com/sshaw/optout" rel="nofollow noreferrer">optout</a>. It can validate Ruby hashes and transform them into shell-style arguments to pass to <code>system</code>, etc...<br><h4> Keith Bennett, Comment 115152245 Score: 0: </h4>Something to note about <code>$?</code>. Like some other <code>$</code> variables, there is one copy of it per thread. So it&#39;s ok to rely on it not being overwritten by another thread.<br><h4> radiospiel, Comment 129487161 Score: 0: </h4><i>&quot;First, note that when Ruby calls out to a shell, it typically calls /bin/sh, not Bash...&quot;</i> How do we know that? I would assume that ruby is going via exec(2) which, on a script, uses whatever interpreter is set in the <code>#!</code> line, and, only missing this line, defaults to <code>&#47;bin&#47;sh</code><br><h4> kraftydevil, Comment 135183874 Score: 0: </h4>Slight variation - What if I need to call a command-line program using ruby&#39;s system that ruby can&#39;t see? Is there a way to put such a command in whatever path the system command uses?<br>------------------------------------------------------------------ <br><h3> Ian, Id: 37329716, Score: 400: </h3><p>Here's a flowchart based on "<a href="https://stackoverflow.com/questions/7212573/when-to-use-each-method-of-launching-a-subprocess-in-ruby/7263556#7263556">When to use each method of launching a subprocess in Ruby</a>".  See also, "<a href="https://stackoverflow.com/questions/1401002/trick-an-application-into-thinking-its-stdout-is-a-terminal-not-a-pipe/1402389#1402389">Trick an application into thinking its stdout is a terminal, not a pipe</a>".</p>

<p><a href="https://i.stack.imgur.com/1Vuvp.png" rel="noreferrer"><img src="https://i.stack.imgur.com/1Vuvp.png" alt="enter image description here"></a></p>


<h4> Smar, Comment 108819186 Score: 1: </h4>As a side note, I find the spawn() method found in many different places (e.g. <code>Kernel</code> and <code>Process</code> to be most versatile. It’s more or less same with <code>PTY.spawn()</code>, but more generic.<br><h4> Josh Bodah, Comment 69651841 Score: 46: </h4>Wow haha. Very useful even though the fact this has to exist is unfortunate<br><h4> Joshua Cheek, Comment 115202416 Score: 0: </h4>IMO, backticks and <code>%x</code> are only good for scripting, because they don&#39;t return stderr to you, and you can&#39;t pass them arguments (note that you can use <code>$?</code> to get the exit status). So I almost always use <code>Open3.capture3</code> instead of backticks or <code>%x</code><br>------------------------------------------------------------------ <br><h3> cynicalman, Id: 2350, Score: 167: </h3><p>The way I like to do this is using the <code>%x</code> literal, which makes it easy (and readable!) to use quotes in a command, like so:</p>

<pre><code>directorylist = %x[find . -name '*test.rb' | sort]
</code></pre>

<p>Which, in this case, will populate file list with all test files under the current directory, which you can process as expected:</p>

<pre><code>directorylist.each do |filename|
  filename.chomp!
  # work with file
end
</code></pre>
<h4> x-yuri, Comment 36978391 Score: 4: </h4>Does <code>%x[ cmd ]</code> returns an array to you?<br><h4> Nasser, Comment 50008186 Score: 2: </h4>the above does not work for me.  ``&lt;main&gt;&#39;: undefined method <code>each&#39; for :String (NoMethodError)</code>  how did it work for you? I am using <code>ruby -v ruby 1.9.3p484 (2013-11-22 revision 43786) [i686-linux]</code> Are you sure an array is returned from the command so that the loop will actually work?<br><h4> Ian Ellis, Comment 69260816 Score: 0: </h4>%x[ cmd ].split(&quot;\n&quot;) will return a list though :)<br>------------------------------------------------------------------ <br><h3> Mihai A, Id: 39228, Score: 68: </h3><p>Here's the best article in my opinion about running shell scripts in Ruby: "<a href="http://tech.natemurray.com/2007/03/ruby-shell-commands.html" rel="noreferrer">6 Ways to Run Shell Commands in Ruby</a>".</p>

<p>If you only need to get the output use backticks.</p>

<p>I needed more advanced stuff like STDOUT and STDERR so I used the Open4 gem. You have all the methods explained there.</p>
<h4> Mei, Comment 10123617 Score: 3: </h4>The post described here doesn&#39;t discuss the <code>%x</code> syntax option.<br><h4> Brandan, Comment 18414580 Score: 0: </h4>+1 for Open4. I had already started trying to implement my own version of its <code>spawn</code> method when I found this.<br>------------------------------------------------------------------ <br><h3> anshul, Id: 94880, Score: 46: </h3><p>My favourite is <a href="http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html" rel="noreferrer">Open3</a></p>

<pre><code>  require "open3"

  Open3.popen3('nroff -man') { |stdin, stdout, stderr| ... }
</code></pre>
<h4> severin, Comment 23499367 Score: 3: </h4>I also like open3, especially Open3.capture3: <a href="http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-capture3" rel="nofollow noreferrer">ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/&hellip;</a> -&gt;  <code>stdout, stderr, status = Open3.capture3(&#39;nroff -man&#39;, :stdin_data =&gt; stdin)</code><br><h4> FilBot3, Comment 68954783 Score: 0: </h4>Is there any documentation on how to perform Spec and Unit testing with Open3, or other Open&#39;s in the Ruby std-lib? Its hard to test shell outs at my current level of understanding.<br><h4> TheTechRobo the Nerd, Comment 123182304 Score: 0: </h4>What&#39;s the difference between open3 and open4?<br>------------------------------------------------------------------ <br><h3> Nick Brosnahan, Id: 4413, Score: 32: </h3><p>Some things to think about when choosing between these mechanisms are:</p>

<ol>
<li>Do you just want stdout or do you
need stderr as well? Or even
separated out?</li>
<li>How big is your output?  Do you want
to hold the entire result in memory?</li>
<li>Do you want to read some of your
output while the subprocess is still
running?</li>
<li>Do you need result codes?</li>
<li>Do you need a Ruby object that
represents the process and lets you
kill it on demand?</li>
</ol>

<p>You may need anything from simple backticks (``), <code>system()</code>, and <code>IO.popen</code> to full-blown <code>Kernel.fork</code>/<code>Kernel.exec</code> with <code>IO.pipe</code> and <code>IO.select</code>.</p>

<p>You may also want to throw timeouts into the mix if a sub-process takes too long to execute.</p>

<p>Unfortunately, it very much <strong><em>depends</em></strong>.</p>
------------------------------------------------------------------ <br><h3> Steve Willard, Id: 2280, Score: 29: </h3><p>I'm definitely not a Ruby expert, but I'll give it a shot:</p>

<pre><code>$ irb 
system "echo Hi"
Hi
=&gt; true
</code></pre>

<p>You should also be able to do things like:</p>

<pre><code>cmd = 'ls'
system(cmd)
</code></pre>
------------------------------------------------------------------ <br><h3> j-g-faustus, Id: 3050311, Score: 28: </h3><p>One more option:</p>

<p>When you:</p>

<ul>
<li>need stderr as well as stdout </li>
<li>can't/won't use Open3/Open4 (they throw exceptions in NetBeans on my Mac, no idea why)</li>
</ul>

<p>You can use shell redirection:</p>

<pre><code>puts %x[cat bogus.txt].inspect
  =&gt; ""

puts %x[cat bogus.txt 2&gt;&amp;1].inspect
  =&gt; "cat: bogus.txt: No such file or directory\n"
</code></pre>

<p>The <code>2&gt;&amp;1</code> syntax works across <a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html" rel="noreferrer">Linux</a>, Mac and <a href="http://support.microsoft.com/kb/110930" rel="noreferrer">Windows</a> since the early days of MS-DOS.</p>
------------------------------------------------------------------ <br><h3> Utensil, Id: 16975172, Score: 25: </h3><p>The answers above are already quite great, but I really want to share the following summary article: "<a href="http://tech.natemurray.com/2007/03/ruby-shell-commands.html" rel="noreferrer">6 Ways to Run Shell Commands in Ruby</a>"</p>

<p>Basically, it tells us:</p>

<p><code>Kernel#exec</code>:</p>

<pre><code>exec 'echo "hello $HOSTNAME"'
</code></pre>

<p><code>system</code> and <code>$?</code>:</p>

<pre><code>system 'false' 
puts $?
</code></pre>

<p>Backticks (`):</p>

<pre><code>today = `date`
</code></pre>

<p><code>IO#popen</code>:</p>

<pre><code>IO.popen("date") { |f| puts f.gets }
</code></pre>

<p><code>Open3#popen3</code> -- stdlib:</p>

<pre><code>require "open3"
stdin, stdout, stderr = Open3.popen3('dc') 
</code></pre>

<p><code>Open4#popen4</code> -- a gem:</p>

<pre><code>require "open4" 
pid, stdin, stdout, stderr = Open4::popen4 "false" # =&gt; [26327, #&lt;IO:0x6dff24&gt;, #&lt;IO:0x6dfee8&gt;, #&lt;IO:0x6dfe84&gt;]
</code></pre>
------------------------------------------------------------------ <br><h3> dragon788, Id: 44336764, Score: 18: </h3><p>If you really need Bash, per the note in the "best" answer.</p>

<blockquote>
  <p>First, note that when Ruby calls out to a shell, it typically calls <code>/bin/sh</code>, <em>not</em> Bash. Some Bash syntax is not supported by <code>/bin/sh</code> on all systems. </p>
</blockquote>

<p>If you need to use Bash, insert <code>bash -c "your Bash-only command"</code> inside of your desired calling method:</p>

<pre><code>quick_output = system("ls -la")
</code></pre>

<pre><code>quick_bash = system("bash -c 'ls -la'")
</code></pre>

<p>To test:</p>

<pre><code>system("echo $SHELL")
system('bash -c "echo $SHELL"')
</code></pre>

<p>Or if you are running an existing script file like</p>

<pre><code>script_output = system("./my_script.sh")
</code></pre>

<p>Ruby <em>should</em> honor the shebang, but you could always use </p>

<pre><code>system("bash ./my_script.sh")
</code></pre>

<p>to make sure, though there may be a slight overhead from <code>/bin/sh</code> running <code>/bin/bash</code>, you probably won't notice.</p>
------------------------------------------------------------------ <br><h3> Rufo Sanchez, Id: 2334, Score: 13: </h3><p>You can also use the backtick operators (`), similar to Perl:</p>

<pre><code>directoryListing = `ls /`
puts directoryListing # prints the contents of the root directory
</code></pre>

<p>Handy if you need something simple.</p>

<p>Which method you want to use depends on exactly what you're trying to accomplish; check the docs for more details about the different methods.</p>
------------------------------------------------------------------ <br><h3> nkm, Id: 9351735, Score: 12: </h3><p>We can achieve it in multiple ways.</p>

<p>Using <code>Kernel#exec</code>, nothing after this command is executed:</p>

<pre><code>exec('ls ~')
</code></pre>

<p>Using <code>backticks or %x</code></p>

<pre><code>`ls ~`
=&gt; "Applications\nDesktop\nDocuments"
%x(ls ~)
=&gt; "Applications\nDesktop\nDocuments"
</code></pre>

<p>Using <code>Kernel#system</code> command, returns <code>true</code> if successful, <code>false</code> if unsuccessful and returns <code>nil</code> if command execution fails:</p>

<pre><code>system('ls ~')
=&gt; true
</code></pre>
------------------------------------------------------------------ <br><h3> Ryan Tate, Id: 9370070, Score: 12: </h3><p>Using the answers here and linked in Mihai's answer, I put together a function that meets these requirements:</p>

<ol>
<li>Neatly captures STDOUT and STDERR so they don't "leak" when my script is run from the console.</li>
<li>Allows arguments to be passed to the shell as an array, so there's no need to worry about escaping.</li>
<li>Captures the exit status of the command so it is clear when an error has occurred.</li>
</ol>

<p>As a bonus, this one will also return STDOUT in cases where the shell command exits successfully (0) and puts anything on STDOUT. In this manner, it differs from <code>system</code>, which simply returns <code>true</code> in such cases. </p>

<p>Code follows. The specific function is <code>system_quietly</code>:</p>

<pre><code>require 'open3'

class ShellError &lt; StandardError; end

#actual function:
def system_quietly(*cmd)
  exit_status=nil
  err=nil
  out=nil
  Open3.popen3(*cmd) do |stdin, stdout, stderr, wait_thread|
    err = stderr.gets(nil)
    out = stdout.gets(nil)
    [stdin, stdout, stderr].each{|stream| stream.send('close')}
    exit_status = wait_thread.value
  end
  if exit_status.to_i &gt; 0
    err = err.chomp if err
    raise ShellError, err
  elsif out
    return out.chomp
  else
    return true
  end
end

#calling it:
begin
  puts system_quietly('which', 'ruby')
rescue ShellError
  abort "Looks like you don't have the `ruby` command. Odd."
end

#output: =&gt; "/Users/me/.rvm/rubies/ruby-1.9.2-p136/bin/ruby"
</code></pre>
------------------------------------------------------------------ <br><h3> MonsieurDart, Id: 33525154, Score: 12: </h3><p>Don't forget the <code>spawn</code> command to create a background process to execute the specified command. You can even wait for its completion using the <code>Process</code> class and the returned <code>pid</code>:</p>

<pre><code>pid = spawn("tar xf ruby-2.0.0-p195.tar.bz2")
Process.wait pid

pid = spawn(RbConfig.ruby, "-eputs'Hello, world!'")
Process.wait pid
</code></pre>

<p>The doc says: This method is similar to <code>#system</code> but it doesn't wait for the command to finish.</p>
<h4> Kashyap, Comment 56195352 Score: 3: </h4><code>Kernel.spawn()</code> seems to be far more versatile than all other options.<br>------------------------------------------------------------------ <br><h3> Alex Lorsung, Id: 43125428, Score: 11: </h3><p>The easiest way is, for example:</p>

<pre><code>reboot = `init 6`
puts reboot
</code></pre>
------------------------------------------------------------------ <br><h3> Vaisakh VM, Id: 42270536, Score: 9: </h3><p>The backticks (`) method is the easiest one to call shell commands from Ruby. It returns the result of the shell command:</p>

<pre><code>     url_request = 'http://google.com'
     result_of_shell_command = `curl #{url_request}`
</code></pre>
------------------------------------------------------------------ <br><h3> barlop, Id: 47880798, Score: 9: </h3><p>Given a command like <code>attrib</code>:</p>

<pre><code>require 'open3'

a="attrib"
Open3.popen3(a) do |stdin, stdout, stderr|
  puts stdout.read
end
</code></pre>

<p>I've found that while this method isn't as memorable as </p>

<pre><code>system("thecommand")
</code></pre>

<p>or  </p>

<pre><code>`thecommand`
</code></pre>

<p>in backticks,  a good thing about this method compared to other methods is 
 backticks don't seem to let me <code>puts</code> the command I run/store the command I want to run in a variable, and <code>system("thecommand")</code> doesn't seem to let me get the output  whereas this method lets me do both of those things, and it lets me access stdin, stdout and stderr independently.</p>

<p>See "<a href="https://blog.bigbinary.com/2012/10/18/backtick-system-exec-in-ruby.html" rel="noreferrer">Executing commands in ruby</a>" and <a href="http://ruby-doc.org/stdlib-2.4.1/libdoc/open3/rdoc/Open3.html" rel="noreferrer">Ruby's Open3 documentation</a>.</p>
------------------------------------------------------------------ <br><h3> Kashyap, Id: 34226348, Score: 8: </h3><p>If you have a more complex case than the common case that can not be handled with <code>``</code>, then check out  <a href="http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-spawn" rel="nofollow noreferrer"><code>Kernel.spawn()</code></a>. This seems to be the most generic/full-featured provided by stock Ruby to execute external commands.</p>

<p>You can use it to:</p>

<ul>
<li>create process groups (Windows).</li>
<li>redirect in, out, error to files/each-other.</li>
<li>set env vars, umask.</li>
<li>change the directory before executing a command.</li>
<li>set resource limits for CPU/data/etc.</li>
<li>Do everything that can be done with other options in other answers, but with more code.</li>
</ul>

<p>The <a href="http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-spawn" rel="nofollow noreferrer">Ruby documentation</a> has good enough examples:</p>

<pre><code>env: hash
  name =&gt; val : set the environment variable
  name =&gt; nil : unset the environment variable
command...:
  commandline                 : command line string which is passed to the standard shell
  cmdname, arg1, ...          : command name and one or more arguments (no shell)
  [cmdname, argv0], arg1, ... : command name, argv[0] and zero or more arguments (no shell)
options: hash
  clearing environment variables:
    :unsetenv_others =&gt; true   : clear environment variables except specified by env
    :unsetenv_others =&gt; false  : dont clear (default)
  process group:
    :pgroup =&gt; true or 0 : make a new process group
    :pgroup =&gt; pgid      : join to specified process group
    :pgroup =&gt; nil       : dont change the process group (default)
  create new process group: Windows only
    :new_pgroup =&gt; true  : the new process is the root process of a new process group
    :new_pgroup =&gt; false : dont create a new process group (default)
  resource limit: resourcename is core, cpu, data, etc.  See Process.setrlimit.
    :rlimit_resourcename =&gt; limit
    :rlimit_resourcename =&gt; [cur_limit, max_limit]
  current directory:
    :chdir =&gt; str
  umask:
    :umask =&gt; int
  redirection:
    key:
      FD              : single file descriptor in child process
      [FD, FD, ...]   : multiple file descriptor in child process
    value:
      FD                        : redirect to the file descriptor in parent process
      string                    : redirect to file with open(string, "r" or "w")
      [string]                  : redirect to file with open(string, File::RDONLY)
      [string, open_mode]       : redirect to file with open(string, open_mode, 0644)
      [string, open_mode, perm] : redirect to file with open(string, open_mode, perm)
      [:child, FD]              : redirect to the redirected file descriptor
      :close                    : close the file descriptor in child process
    FD is one of follows
      :in     : the file descriptor 0 which is the standard input
      :out    : the file descriptor 1 which is the standard output
      :err    : the file descriptor 2 which is the standard error
      integer : the file descriptor of specified the integer
      io      : the file descriptor specified as io.fileno
  file descriptor inheritance: close non-redirected non-standard fds (3, 4, 5, ...) or not
    :close_others =&gt; false : inherit fds (default for system and exec)
    :close_others =&gt; true  : dont inherit (default for spawn and IO.popen)
</code></pre>
------------------------------------------------------------------ <br><h3> lucaortis, Id: 51191872, Score: 4: </h3><p>This is not really an answer but maybe someone will find it useful:</p>

<p>When using TK GUI on Windows, and you need to call shell commands from rubyw, you will always have an annoying CMD window popping up for less then a second.</p>

<p>To avoid this you can use:</p>

<pre><code>WIN32OLE.new('Shell.Application').ShellExecute('ipconfig &gt; log.txt','','','open',0)
</code></pre>

<p>or </p>

<pre><code>WIN32OLE.new('WScript.Shell').Run('ipconfig &gt; log.txt',0,0)
</code></pre>

<p>Both will store the <code>ipconfig</code> output inside <code>log.txt</code>, but no windows will come up.</p>

<p>You will need to <code>require 'win32ole'</code> inside your script.</p>

<p><code>system()</code>, <code>exec()</code> and <code>spawn()</code> will all pop up that annoying window when using TK and rubyw.</p>
------------------------------------------------------------------ <br><h3> Vasanth Saminathan, Id: 70250573, Score: 3: </h3><p>Not sure about shell commands. I used following for capturing system command's output into a variable <strong>val</strong>:</p>
<pre><code>val = capture(:stdout) do
  system(&quot;pwd&quot;)
end

puts val
</code></pre>
<p>shortened version:</p>
<pre><code>val = capture(:stdout) { system(&quot;pwd&quot;) }
</code></pre>
<p><strong>capture</strong> method is provided by <em>active_support/core_ext/kernel/reporting.rb</em></p>
<p>Simlarly we can also capture standard errors too with <code>:stderr</code></p>
------------------------------------------------------------------ <br><h3> JayCrossler, Id: 26369473, Score: 0: </h3><p>Here's a cool one that I use in a ruby script on OS X (so that I can start a script and get an update even after toggling away from the window):</p>

<pre><code>cmd = %Q|osascript -e 'display notification "Server was reset" with title "Posted Update"'|
system ( cmd )
</code></pre>
------------------------------------------------------------------ <br><h3> Teoman shipahi, Id: 70596513, Score: 0: </h3><p>You can use <code>format</code> method as below to print some information:</p>
<pre><code>puts format('%s', `ps`)
puts format('%d MB', (`ps -o rss= -p #{Process.pid}`.to_i / 1024))
</code></pre>
