 <h2> Title: How can I delete one element from an array by value </h2> <h4> Tamik Soziev, question_id: 10034678 </h4>Score: 429, Tags: {arrays,ruby} <br><p>I have an array of elements in Ruby</p>

<pre><code>[2,4,6,3,8]
</code></pre>

<p>I need to remove  elements with value <code>3</code> for example</p>

<p>How do I do that?</p>
<h4> Mani, Id: 68624482 Score: 2: </h4>may be due to <code>active record</code> method <code>delete</code><br><h4> Ben Amos, Id: 115252641 Score: 2: </h4>The title and body of the question are contradictory. Is your goal to delete ONE element with a given value, as the title implies? Or is your goal to remove ALL elements with a given value, as the body implies? These two goals are exclusive; each has a different solution.<br><h4> Mani, Id: 68624474 Score: 0: </h4>i wonder why <code>delete</code> <code>array.delete(3)</code> not works within ruby on rails controller<br>------------------------------------------------------------------ <br><h3> Steve, Id: 25903210, Score: 77: </h3><p>Another option:</p>

<pre><code>a = [2,4,6,3,8]

a -= [3]
</code></pre>

<p>which results in</p>

<pre><code>=&gt; [2, 4, 6, 8] 
</code></pre>
------------------------------------------------------------------ <br><h3> Tamik Soziev, Id: 10034720, Score: 603: </h3><p>I think I've figured it out:</p>

<pre><code>a = [3, 2, 4, 6, 3, 8]
a.delete(3)
#=&gt; 3
a
#=&gt; [2, 4, 6, 8]
</code></pre>
<h4> Travis, Comment 12835902 Score: 221: </h4>I personally like <code>[1, 2, 3, 4, 5] - [3]</code> which results in <code>=&gt; [1, 2, 4, 5]</code> from <code>irb</code>.<br><h4> Joshua Pinter, Comment 28171360 Score: 128: </h4>Just a heads up that .delete() will return the deleted value, not the modified array with the value removed.<br><h4> Navneet, Comment 17572842 Score: 30: </h4>What if there are multiple entries of 3 and we wanted to delete only one of them? (this is related so asking this here might be best)<br><h4> srt32, Comment 40152618 Score: 28: </h4>The other consequence to consider is that <code>delete</code> mutates the underlying array whereas <code>-</code> creates a new array (that is returned to you) without the deleted value. Depending on your use case either approach may make sense.<br><h4> bkunzi01, Comment 62999591 Score: 3: </h4>@user3721428, delete(3) does not refer to the element in position 3 but instead deletes any element matching the integer 3.  It will remove all occurrences of 3 and has nothing to do with the arrays index or position.<br><h4> madav, Comment 111293725 Score: 3: </h4>Be very careful with this, if you do this on an active record array it will actually delete the element from the database<br><h4> Sachin, Comment 60467654 Score: 0: </h4>Also, <code>array - subArray</code> will not work for <b>Array of Arrays</b>, but <code>array.delete(subArray)</code> will do.<br><h4> Jules Copeland, Comment 42665019 Score: 0: </h4>Something else to bear in mind is that <code>[1,2,3,3] - [3]</code> returns [1,2]. It will delete &#39;all&#39; values of 3. Might or might not be what you need...<br><h4> user456584, Comment 26471772 Score: 0: </h4>@Navneet See <a href="http://stackoverflow.com/questions/4595305/delete-first-instance-of-matching-element-from-array" title="delete first instance of matching element from array">stackoverflow.com/questions/4595305/&hellip;</a><br>------------------------------------------------------------------ <br><h3> Abram, Id: 22465445, Score: 268: </h3><p>Borrowing from <strong>Travis</strong> in the comments, this is a better answer:</p>

<blockquote>
  <p>I personally like <code>[1, 2, 7, 4, 5] - [7]</code> which results in <code>=&gt; [1, 2, 4, 5]</code> from <code>irb</code></p>
</blockquote>

<p><em>I modified his answer seeing that 3 was the third element in his example array. This could lead to some confusion for those who don't realize that 3 is in position 2 in the array.</em> </p>
<h4> Sachin, Comment 60467580 Score: 5: </h4><code>array - subArray</code> will not work for <b>Array of Arrays</b>, but <code>array.delete(subArray)</code> will do.<br><h4> Timothy Kovalev, Comment 68049815 Score: 22: </h4>The very important difference between <code>[1,2,3] - [2]</code> and <code>[1,2,3].delete(2)</code> is that <code>delete</code> method <b>modifies the original array</b>, while <code>[1,2,3] - [3]</code> creates a <b>new array</b>.<br><h4> Argus9, Comment 41692438 Score: 22: </h4>As srt32 points out in the answer, there&#39;s an important distinction to make between using <code>.delete</code> and <code>-</code>. <code>.delete</code> will return the value that was removed from the Array, if any; <code>-</code> will not. So <code>[ 1, 2, 3 ] - [ 2 ]</code> will return <code>[ 1, 3 ]</code>, while <code>[ 1, 2, 3 ].delete( 2 )</code> will return <code>2</code>.<br><h4> Tom Hundt, Comment 102537774 Score: 1: </h4>Re subarrays (@Sachin&#39;s comment above) &quot;Sure it will&quot;, you just need to get the notation right:  <code>[1,2,[2],2,3,4] - [2]</code> gives you <code>[1, [2], 3, 4]</code>, but <code>[1,2,[2],2,3,4] - [[2]]</code> gives you <code>[1, 2, 2, 3, 4]</code>.  :-)<br>------------------------------------------------------------------ <br><h3> Scott, Id: 41410808, Score: 74: </h3><p>I'm not sure if anyone has stated this, but <code>Array.delete()</code> and <code>-= value</code> will delete every instance of the value passed to it within the Array. In order to delete the first instance of the particular element you could do something like</p>
<pre><code>arr = [1,3,2,44,5]
arr.delete_at(arr.index(44))

#=&gt; [1,3,2,5]
</code></pre>
<p>There could be a simpler way. I'm not saying this is best practice, but it is something that should be recognized.</p>
<h4> xeroshogun, Comment 80298948 Score: 1: </h4>I was looking for a way to do this and only delete one instance of the element incase of duplicates and this works great!<br><h4> windmaomao, Comment 105667383 Score: 0: </h4>I think this answer is wrong, simply because arr.index() could go <code>nil</code><br>------------------------------------------------------------------ <br><h3> Sayan, Id: 40829670, Score: 44: </h3><p>Assuming you want to delete 3 by value at multiple places in an array, I think the Ruby way to do this task would be to use the <code>delete_if</code> method:</p>
<pre><code>[2,4,6,3,8,3].delete_if {|x| x == 3 } 
</code></pre>
<p>You can also use <code>delete_if</code> to remove elements in an &quot;array of arrays&quot;.</p>
------------------------------------------------------------------ <br><h3> barlop, Id: 31063519, Score: 32: </h3><p>I like the <code>-=[4]</code> way mentioned in other answers to delete the elements whose value is 4.</p>
<p>But there is this way:</p>
<pre><code>[2,4,6,3,8,6].delete_if { |i| i == 6 }
=&gt; [2, 4, 3, 8]
</code></pre>
<p>mentioned somewhere in &quot;<a href="https://rubymonk.com/learning/books/1-ruby-primer/chapters/1-arrays/lessons/34-arrays-the-basics" rel="noreferrer">Basic Array Operations</a>&quot;, after it mentions the <code>map</code> function.</p>
<h4> Zac, Comment 67086875 Score: 0: </h4>But can&#39;t you just use <code>.delete(6)</code><br><h4> barlop, Comment 67087234 Score: 0: </h4>@Zac of course but that answer has already been mentioned (as has the very concise <code>-=</code> way  <code>a-=[4]</code> i.e. <code>a=a-[4]</code> .  <code>[3,4]-[4]</code>, which I said I liked), but I wanted to mention another possible way.<br><h4> F.Webber, Comment 95997074 Score: 0: </h4>This method also has the advantage of returning the array instead of the deleted element.<br>------------------------------------------------------------------ <br><h3> rilutham, Id: 26420047, Score: 23: </h3><p>You can simply run:</p>

<pre><code>[2,4,6,3,8].delete(3)
</code></pre>
------------------------------------------------------------------ <br><h3> Sawo Cliff, Id: 29314922, Score: 21: </h3><p>A <code>.delete_at(3)</code> <code>3</code> here being the position.</p>
------------------------------------------------------------------ <br><h3> the Tin Man, Id: 36273059, Score: 17: </h3><p>Here are some benchmarks:</p>

<pre><code>require 'fruity'


class Array          
  def rodrigo_except(*values)
    self - values
  end    

  def niels_except value
    value = value.kind_of?(Array) ? value : [value]
    self - value
  end
end

ARY = [2,4,6,3,8]

compare do
  soziev  { a = ARY.dup; a.delete(3);               a }
  steve   { a = ARY.dup; a -= [3];                  a }
  barlop  { a = ARY.dup; a.delete_if{ |i| i == 3 }; a }
  rodrigo { a = ARY.dup; a.rodrigo_except(3);         }
  niels   { a = ARY.dup; a.niels_except(3);           }
end

# &gt;&gt; Running each test 4096 times. Test will take about 2 seconds.
# &gt;&gt; soziev is similar to barlop
# &gt;&gt; barlop is faster than steve by 2x ± 1.0
# &gt;&gt; steve is faster than rodrigo by 4x ± 1.0
# &gt;&gt; rodrigo is similar to niels
</code></pre>

<p>And again with a bigger array containing lots of duplicates:</p>

<pre><code>class Array          
  def rodrigo_except(*values)
    self - values
  end    

  def niels_except value
    value = value.kind_of?(Array) ? value : [value]
    self - value
  end
end

ARY = [2,4,6,3,8] * 1000

compare do
  soziev  { a = ARY.dup; a.delete(3);               a }
  steve   { a = ARY.dup; a -= [3];                  a }
  barlop  { a = ARY.dup; a.delete_if{ |i| i == 3 }; a }
  rodrigo { a = ARY.dup; a.rodrigo_except(3);         }
  niels   { a = ARY.dup; a.niels_except(3);           }
end

# &gt;&gt; Running each test 16 times. Test will take about 1 second.
# &gt;&gt; steve is faster than soziev by 30.000000000000004% ± 10.0%
# &gt;&gt; soziev is faster than barlop by 50.0% ± 10.0%
# &gt;&gt; barlop is faster than rodrigo by 3x ± 0.1
# &gt;&gt; rodrigo is similar to niels
</code></pre>

<p>And even bigger with more duplicates:</p>

<pre><code>class Array          
  def rodrigo_except(*values)
    self - values
  end    

  def niels_except value
    value = value.kind_of?(Array) ? value : [value]
    self - value
  end
end

ARY = [2,4,6,3,8] * 100_000

compare do
  soziev  { a = ARY.dup; a.delete(3);               a }
  steve   { a = ARY.dup; a -= [3];                  a }
  barlop  { a = ARY.dup; a.delete_if{ |i| i == 3 }; a }
  rodrigo { a = ARY.dup; a.rodrigo_except(3);         }
  niels   { a = ARY.dup; a.niels_except(3);           }
end

# &gt;&gt; Running each test once. Test will take about 6 seconds.
# &gt;&gt; steve is similar to soziev
# &gt;&gt; soziev is faster than barlop by 2x ± 0.1
# &gt;&gt; barlop is faster than niels by 3x ± 1.0
# &gt;&gt; niels is similar to rodrigo
</code></pre>
<h4> Kirby, Comment 60689131 Score: 10: </h4>So, what is the best of? :)<br><h4> marzapower, Comment 133670963 Score: 1: </h4>@Kirby it&#39;s pretty straight-forward, looking at the comments in the two test codes. Steve&#39;s solution appears to be the most efficient, while barlop&#39;s and niels&#39; are the least efficient.<br>------------------------------------------------------------------ <br><h3> Rodrigo Mendon&#231;a, Id: 33828691, Score: 9: </h3><p>I improved Niels's solution</p>

<pre><code>class Array          
  def except(*values)
    self - values
  end    
end
</code></pre>

<p>Now you can use</p>

<pre><code>[1, 2, 3, 4].except(3, 4) # return [1, 2]
[1, 2, 3, 4].except(4)    # return [1, 2, 3]
</code></pre>
<h4> Mark Swardstrom, Comment 72259027 Score: 1: </h4>To declare in IRB, you need to add the method to Array <code>class Array; def except(*values); self - values; end; end</code>.<br><h4> hgsongra, Comment 63855409 Score: 0: </h4>Your solution not working on <code>irb</code> console      <code>2.2.1 :007 &gt; [1, 2, 3, 4].except(3, 4)  NoMethodError: undefined method except for [1, 2, 3, 4]:Array 	from (irb):7 	from &#47;usr&#47;share&#47;rvm&#47;rubies&#47;ruby-2.2.1&#47;bin&#47;irb:11:in &lt;main&gt; </code><br>------------------------------------------------------------------ <br><h3> Ankit Agrawal, Id: 59901293, Score: 8: </h3><p>Compiling all the different options for delete in ruby</p>

<blockquote>
  <p><strong>delete</strong> - Deletes matching elements by value. If more than one value matches it will remove all. If you don't care about the number of occurrence or sure about single occurrence, use this method.</p>
</blockquote>

<pre><code>a = [2, 6, 3, 5, 3, 7]
a.delete(3)  # returns 3
puts a       # return [2, 6, 5, 7]
</code></pre>

<blockquote>
  <p><strong>delete_at</strong> - Deletes element at given index. If you know the index use this method.</p>
</blockquote>

<pre><code># continuing from the above example
a.delete_at(2) # returns 5
puts a         # returns [2, 6, 7]
</code></pre>

<blockquote>
  <p><strong>delete_if</strong> - Deletes every element for which block is true. This will modify the array. Array changes instantly as the block is called.</p>
</blockquote>

<pre><code>b = [1, 2, 5, 4, 9, 10, 11]
b.delete_if {|n| n &gt;= 10}.  # returns [1, 2, 5, 4, 9]
</code></pre>

<blockquote>
  <p><strong>reject</strong> - This will return new array with the elements for which the given block is false. The ordering is maintained with this.</p>
</blockquote>

<pre><code>c = [1, 2, 5, 4, 9, 10, 11]
c.reject {|n| n &gt;= 10}.  # returns [1, 2, 5, 4, 9]
</code></pre>

<blockquote>
  <p><strong>reject!</strong> - same as <strong>delete_if</strong>. Array may not change instantly as the block is called.</p>
  
  <p>If you want to delete multiple values from array, the best option is as bellow.</p>
</blockquote>

<pre><code>a = [2, 3, 7, 4, 6, 21, 13]
b = [7, 21]
a = a - b    # a - [2, 3, 4, 6, 13]
</code></pre>
------------------------------------------------------------------ <br><h3> dgilperez, Id: 53123613, Score: 7: </h3><p>If you also want to make this deletion operation chainable, so you can delete some item and keep on chaining operations on the resulting array, use <code>tap</code>: </p>

<pre><code>[2, 4, 6, 3, 8].tap { |ary| ary.delete(3) }.count #=&gt; 4
</code></pre>
------------------------------------------------------------------ <br><h3> Niels Kristian, Id: 31676034, Score: 4: </h3><p>You can also monkey patch it. I never understood why Ruby has an <code>except</code> method for <code>Hash</code> but not for <code>Array</code>:</p>

<pre><code>class Array
  def except value
    value = value.kind_of(Array) ? value : [value]
    self - value
  end
end
</code></pre>

<p>Now you can do:</p>

<pre><code>[1,3,7,"436",354,nil].except(354) #=&gt; [1,3,7,"436",nil]
</code></pre>

<p>Or:</p>

<pre><code>[1,3,7,"436",354,nil].except([354, 1]) #=&gt; [3,7,"436",nil]
</code></pre>
<h4> Sasgorilla, Comment 72429102 Score: 1: </h4>You don&#39;t need the <code>value.kind_of(Array)</code> test. Just use <code>self - Array(value)</code>.<br><h4> Syamlal, Comment 128995630 Score: 0: </h4>i think this method is very complicated. try to simplify your code<br>------------------------------------------------------------------ <br><h3> Lori, Id: 51904668, Score: 4: </h3><p>Non-destructive removal of first occurrence:</p>

<pre><code>a = [2, 4, 6, 3, 8]
n = a.index 3
a.take(n)+a.drop(n+1)
</code></pre>
------------------------------------------------------------------ <br><h3> ashan priyadarshana, Id: 39481963, Score: 3: </h3><p>So when you have multiple occurrences of 3 and you want only to delete the first occurrence of 3, you can simply do some thing as below.</p>

<pre><code>arr = [2, 4, 6, 3, 8, 10, 3, 12]

arr.delete_at arr.index 3

#This will modify arr as [2, 4, 6, 8, 10, 3, 12] where first occurrence of 3 is deleted. Returns the element deleted. In this case =&gt; 3.
</code></pre>
