 <h2> Title: How to write a switch statement in Ruby </h2> <h4> readonly, question_id: 948135 </h4>Score: 2297, Tags: {ruby,switch-statement,conditional-statements} <br><p>How do I write a <code>switch</code> statement in Ruby?</p>
------------------------------------------------------------------ <br><h3> Chuck, Id: 948157, Score: 2954: </h3><p>Ruby uses the <a href="http://ruby-doc.com/docs/ProgrammingRuby/html/tut_expressions.html#S5" rel="noreferrer"><code>case</code> expression</a> instead.</p>
<pre><code>case x
when 1..5
  &quot;It's between 1 and 5&quot;
when 6
  &quot;It's 6&quot;
when &quot;foo&quot;, &quot;bar&quot;
  &quot;It's either foo or bar&quot;
when String
  &quot;You passed a string&quot;
else
  &quot;You gave me #{x} -- I have no idea what to do with that.&quot;
end
</code></pre>
<p>Ruby compares the object in the <code>when</code> clause with the object in the <code>case</code> clause using the <code>===</code> operator. For example, <code>(1..5) === x</code>, and not <code>x === (1..5)</code>.</p>
<p>This allows for sophisticated <code>when</code> clauses as seen above. Ranges, classes and all sorts of things can be tested for rather than just equality.</p>
<p>Unlike <code>switch</code> statements in many other languages, Ruby’s <code>case</code> does not have <a href="https://en.wikipedia.org/wiki/Switch_statement#Fallthrough" rel="noreferrer">fall-through</a>, so there is no need to end each <code>when</code> with a <code>break</code>. You can also specify multiple matches in a single <code>when</code> clause like <code>when &quot;foo&quot;, &quot;bar&quot;</code>.</p>
<h4> janniks, Comment 91244037 Score: 20: </h4><b>Important:</b> Unlike <code>switch</code> statements in many other languages, Ruby’s <code>case</code> does NOT have <a href="https://en.wikipedia.org/wiki/Switch_statement#Fallthrough" rel="nofollow noreferrer"><b>fall-through</b></a>, so there is no need to end each <code>when</code> with a <code>break</code>.<br><h4> Automatico, Comment 20081019 Score: 20: </h4>You can also do regex on the passed argument: when /thisisregex/ <i>next line</i>  puts &quot;This is the found match nr. 1 #{$1}&quot; end<br><h4> Alexander, Comment 87619646 Score: 12: </h4>Also worth noting, you can shorten your code by putting the <code>when</code> and <code>return</code> statement on the same line: <code>when &quot;foo&quot; then &quot;bar&quot;</code><br><h4> Clint Pachl, Comment 99497853 Score: 5: </h4>So many up votes yet not even a mention of the keyword <code>then</code>. Please also see the other answers.<br>------------------------------------------------------------------ <br><h3> kikito, Id: 5694333, Score: 497: </h3><p><code>case...when</code> behaves a bit unexpectedly when handling classes. This is due to the fact that it uses the <code>===</code> operator.</p>
<p>That operator works as expected with literals, but not with classes:</p>
<pre><code>1 === 1           # =&gt; true
Fixnum === Fixnum # =&gt; false
</code></pre>
<p>This means that if you want to do a <code>case ... when</code> over an object's class, this will not work:</p>
<pre><code>obj = 'hello'
case obj.class
when String
  print('It is a string')
when Fixnum
  print('It is a number')
else
  print('It is not a string or number')
end
</code></pre>
<p>Will print &quot;It is not a string or number&quot;.</p>
<p>Fortunately, this is easily solved. The <code>===</code> operator has been defined so that it returns <code>true</code> if you use it with a class and supply an instance of that class as the second operand:</p>
<pre><code>Fixnum === 1 # =&gt; true
</code></pre>
<p>In short, the code above can be fixed by removing the <code>.class</code> from <code>case obj.class</code>:</p>
<pre><code>obj = 'hello'
case obj  # was case obj.class
when String
  print('It is a string')
when Fixnum
  print('It is a number')
else
  print('It is not a string or number')
end
</code></pre>
<p>I hit this problem today while looking for an answer, and this was the first appearing page, so I figured it would be useful to others in my same situation.</p>
<h4> Russell Fulton, Comment 111488994 Score: 1: </h4>thanks for this!  this is more elegant than my solution which was to use &quot;case obj.class.to_s&quot;<br><h4> Sugumar Venkatesan, Comment 71478241 Score: 0: </h4>obj=&#39;hello&#39;;case obj; when &#39;hello&#39; then puts &quot;It&#39;s hello&quot; end<br><h4> lindes, Comment 97945282 Score: 0: </h4>Having the <code>.class</code> part in is interesting to note, thanks.  Of course, this is entirely appropriate behavior (though I could see how it might be a common mistake to think that would print <code>It is a string</code>)... you&#39;re testing the <i>class</i> of some arbitrary object, not the object itself.  So, for example: <code>case &#39;hello&#39;.class when String then &quot;String!&quot; when Class then &quot;Class!&quot; else &quot;Something else&quot; end</code> results in: <code>&quot;Class!&quot;</code> This works the same for <code>1.class</code>, <code>{}.class</code>, etc. Dropping <code>.class</code>, we get <code>&quot;String!&quot;</code> or <code>&quot;Something else&quot;</code> for these various values.<br><h4> Daniel Viglione, Comment 131027440 Score: 0: </h4>The implicit === in case statements can be a little tricky, but if you remember about it, it is powerful.<br><h4> Marvin, Comment 132850957 Score: 0: </h4>Sigh &quot;but if you remember about it, it is powerful&quot;.  And if you don&#39;t it&#39;s a nice source of bugs that no linter/code tools can ever pick up.  Sorry, all the implicit behavior is really problematic.<br><h4> kikito, Comment 133014001 Score: 0: </h4>@Marvin that is actually something that could be added to Ruboto. &quot;If you make a case with <code>.class</code> and there&#39;s classes on the <code>when</code>s, error&quot;<br>------------------------------------------------------------------ <br><h3> nonopolarity, Id: 948142, Score: 251: </h3><p>It is done using <a href="http://www.techotopia.com/index.php/The_Ruby_case_Statement" rel="noreferrer"><code>case</code></a> in Ruby. Also see "<a href="http://en.wikipedia.org/wiki/Switch_statement#Ruby" rel="noreferrer">Switch statement</a>" on Wikipedia.</p>

<p>Quoted:</p>

<pre><code>case n
when 0
  puts 'You typed zero'
when 1, 9
  puts 'n is a perfect square'
when 2
  puts 'n is a prime number'
  puts 'n is an even number'
when 3, 5, 7
  puts 'n is a prime number'
when 4, 6, 8
  puts 'n is an even number'
else
  puts 'Only single-digit numbers are allowed'
end
</code></pre>

<p>Another example:</p>

<pre><code>score = 70

result = case score
   when 0..40 then "Fail"
   when 41..60 then "Pass"
   when 61..70 then "Pass with Merit"
   when 71..100 then "Pass with Distinction"
   else "Invalid Score"
end

puts result
</code></pre>

<p>On around page 123 of <em>The Ruby Programming Language</em> (1st Edition, O'Reilly) on my Kindle, it says the <code>then</code> keyword following the <code>when</code> clauses can be replaced with a newline or semicolon (just like in the <code>if then else</code> syntax). (Ruby 1.8 also allows a colon in place of <code>then</code>, but this syntax is no longer allowed in Ruby 1.9.)</p>
<h4> Andrew Grimm, Comment 6509499 Score: 47: </h4><code>when (-1.0&#47;0.0)..-1 then &quot;Epic fail&quot;</code><br><h4> onebree, Comment 48491528 Score: 2: </h4>This is the answer I used, because I am defining a variable based on the results of a case switch. Rather than saying <code>type = #{score}</code> each line, I can simply copy what you did. Much more elegant I also like the one-liners much better (if possible)<br><h4> Julian A Avar C, Comment 111478256 Score: 1: </h4>I love ruby so much for letting me just put a switch statement on a variable like that, less clutter and gets right to the point :D<br>------------------------------------------------------------------ <br><h3> mmdemirbas, Id: 11345195, Score: 121: </h3><h1>    case...when</h1>

<p>To add more examples to <a href="https://stackoverflow.com/a/948157/471214">Chuck's answer</a>:</p>

<p><strong>With parameter:</strong></p>

<pre><code>case a
when 1
  puts "Single value"
when 2, 3
  puts "One of comma-separated values"
when 4..6
  puts "One of 4, 5, 6"
when 7...9
  puts "One of 7, 8, but not 9"
else
  puts "Any other thing"
end
</code></pre>

<p><strong>Without parameter:</strong></p>

<pre><code>case
when b &lt; 3
  puts "Little than 3"
when b == 3
  puts "Equal to 3"
when (1..10) === b
  puts "Something in closed range of [1..10]"
end
</code></pre>

<p>Please, be aware of "<a href="https://stackoverflow.com/questions/948135/how-to-write-a-switch-statement-in-ruby/5694333#5694333">How to write a switch statement in Ruby</a>" that kikito warns about.</p>
<h4> sixty4bit, Comment 43223988 Score: 0: </h4>Thanks, this was helpful for having multiple options on one line. I had been trying to use <code>or</code><br>------------------------------------------------------------------ <br><h3> James Lim, Id: 17983076, Score: 82: </h3><p>In Ruby 2.0, you can also use lambdas in <code>case</code> statements, as follows:</p>

<pre><code>is_even = -&gt;(x) { x % 2 == 0 }

case number
when 0 then puts 'zero'
when is_even then puts 'even'
else puts 'odd'
end
</code></pre>

<p>You can also create your own comparators easily using a Struct with a custom <code>===</code></p>

<pre><code>Moddable = Struct.new(:n) do
  def ===(numeric)
    numeric % n == 0
  end
end

mod4 = Moddable.new(4)
mod3 = Moddable.new(3)

case number
when mod4 then puts 'multiple of 4'
when mod3 then puts 'multiple of 3'
end
</code></pre>

<p>(Example taken from "<a href="https://stackoverflow.com/questions/16662295/can-procs-be-used-with-case-statements-in-ruby-2-0">Can procs be used with case statements in Ruby 2.0?</a>".)</p>

<p>Or, with a complete class:</p>

<pre><code>class Vehicle
  def ===(another_vehicle)
    self.number_of_wheels == another_vehicle.number_of_wheels
  end
end

four_wheeler = Vehicle.new 4
two_wheeler = Vehicle.new 2

case vehicle
when two_wheeler
  puts 'two wheeler'
when four_wheeler
  puts 'four wheeler'
end
</code></pre>

<p>(Example taken from "<a href="http://www.skorks.com/2009/08/how-a-ruby-case-statement-works-and-what-you-can-do-with-it/" rel="noreferrer">How A Ruby Case Statement Works And What You Can Do With It</a>".)</p>
------------------------------------------------------------------ <br><h3> Robert Kajic, Id: 20441220, Score: 82: </h3><p>Many programming languages, especially those derived from C, have support for the so-called <a href="http://en.wikipedia.org/wiki/Switch_statement#Fallthrough">Switch Fallthrough</a>. I was searching for the best way to do the same in Ruby and thought it might be useful to others:</p>

<p>In C-like languages fallthrough typically looks like this:</p>

<pre class="lang-c prettyprint-override"><code>switch (expression) {
    case 'a':
    case 'b':
    case 'c':
        // Do something for a, b or c
        break;
    case 'd':
    case 'e':
        // Do something else for d or e
        break;
}
</code></pre>

<p>In Ruby, the same can be achieved in the following way:</p>

<pre><code>case expression
when 'a', 'b', 'c'
  # Do something for a, b or c
when 'd', 'e'
  # Do something else for d or e
end
</code></pre>

<p>This is not strictly equivalent, because it's not possible to let <code>'a'</code> execute a block of code before falling through to <code>'b'</code> or <code>'c'</code>, but for the most part I find it similar enough to be useful in the same way.</p>
<h4> karatedog, Comment 128558684 Score: 0: </h4>Fallthrough is more of a problem than a feature. If Ruby supported the imitation of the fallthrough it would be easily solved by accepting the same condition on multiple <code>when</code> lines, and executing that block where the condition matches. But it does not support it.<br>------------------------------------------------------------------ <br><h3> Haris Krajina, Id: 12914530, Score: 53: </h3><p>You can use regular expressions, such as finding a type of string:</p>

<pre><code>case foo
when /^(true|false)$/
   puts "Given string is boolean"
when /^[0-9]+$/ 
   puts "Given string is integer"
when /^[0-9\.]+$/
   puts "Given string is float"
else
   puts "Given string is probably string"
end
</code></pre>

<p>Ruby's <code>case</code> will use the equality operand <code>===</code> for this (thanks @JimDeville). Additional information is available at "<a href="http://www.tutorialspoint.com/ruby/ruby_operators.htm">Ruby Operators</a>". This also can be done using @mmdemirbas example (without parameter), only this approach is cleaner for these types of cases.</p>
------------------------------------------------------------------ <br><h3> DigitalRoss, Id: 35233112, Score: 38: </h3><p>It's called <code>case</code> and it works like you would expect, plus lots more fun stuff courtesy of <code>===</code> which implements the tests.</p>

<pre><code>case 5
  when 5
    puts 'yes'
  else
    puts 'else'
end
</code></pre>

<p>Now for some fun:</p>

<pre><code>case 5 # every selector below would fire (if first)
  when 3..7    # OK, this is nice
  when 3,4,5,6 # also nice
  when Fixnum  # or
  when Integer # or
  when Numeric # or
  when Comparable # (?!) or
  when Object  # (duhh) or
  when Kernel  # (?!) or
  when BasicObject # (enough already)
    ...
end
</code></pre>

<p>And it turns out you can also replace an arbitrary if/else chain (that is, even if the tests don't involve a common variable) with <code>case</code> by leaving out the initial <code>case</code> parameter and just writing expressions where the first match is what you want.</p>

<pre><code>case
  when x.nil?
    ...
  when (x.match /'^fn'/)
    ...
  when (x.include? 'substring')
    ...
  when x.gsub('o', 'z') == 'fnzrq'
    ...
  when Time.now.tuesday?
    ...
end
</code></pre>
------------------------------------------------------------------ <br><h3> Manish Shrivastava, Id: 24546727, Score: 33: </h3><p>If you are eager to know how to use an OR condition in a Ruby switch case:</p>

<p>So, in a <code>case</code> statement, a <code>,</code> is the equivalent of <code>||</code> in an <code>if</code> statement.</p>

<pre><code>case car
   when 'Maruti', 'Hyundai'
      # Code here
end
</code></pre>

<p>See "<a href="http://www.skorks.com/2009/08/how-a-ruby-case-statement-works-and-what-you-can-do-with-it/" rel="nofollow noreferrer">How A Ruby Case Statement Works And What You Can Do With It</a>".</p>
------------------------------------------------------------------ <br><h3> Lahiru Jayaratne, Id: 38445037, Score: 26: </h3><p>Ruby uses the <code>case</code> for writing switch statements.</p>

<p>As per the <a href="http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-case" rel="noreferrer"><code>case</code></a> documentation:</p>

<blockquote>
  <p>Case statements consist of an optional condition, which is in the
  position of an argument to <code>case</code>, and zero or more <code>when</code> clauses.
  The first <code>when</code> clause to match the condition (or to evaluate to
  Boolean truth, if the condition is null) “wins”, and its code stanza
  is executed. The value of the case statement is the value of the
  successful <code>when</code> clause, or <code>nil</code> if there is no such clause.</p>
  
  <p>A case statement can end with an <code>else</code> clause. Each <code>when</code> a
  statement can have multiple candidate values, separated by commas.</p>
</blockquote>

<p>Example:</p>

<pre><code>case x
when 1,2,3
  puts "1, 2, or 3"
when 10
  puts "10"
else
  puts "Some other number"
end
</code></pre>

<p>Shorter version:</p>

<pre><code>case x
when 1,2,3 then puts "1, 2, or 3"
when 10 then puts "10"
else puts "Some other number"
end
</code></pre>

<hr>

<p>And as "<a href="http://blog.honeybadger.io/rubys-case-statement-advanced-techniques/" rel="noreferrer">Ruby's case statement - advanced techniques</a>" describes Ruby <code>case</code>;</p>

<p>Can be used with <a href="http://ruby-doc.org/core-2.2.0/Range.html" rel="noreferrer">Ranges</a>:</p>

<pre><code>case 5
when (1..10)
  puts "case statements match inclusion in a range"
end

## =&gt; "case statements match inclusion in a range"
</code></pre>

<p>Can be used with <a href="https://en.wikipedia.org/wiki/Regular_expression" rel="noreferrer">Regex</a>:</p>

<pre><code>case "FOOBAR"
when /BAR$/
  puts "they can match regular expressions!"
end

## =&gt; "they can match regular expressions!"
</code></pre>

<p>Can be used with <a href="https://rubymonk.com/learning/books/4-ruby-primer-ascent/chapters/18-blocks/lessons/64-blocks-procs-lambdas" rel="noreferrer">Procs and Lambdas</a>:</p>

<pre><code>case 40
when -&gt; (n) { n.to_s == "40" }
  puts "lambdas!"
end

## =&gt; "lambdas"
</code></pre>

<p>Also, can be used with your own match classes:</p>

<pre><code>class Success
  def self.===(item)
    item.status &gt;= 200 &amp;&amp; item.status &lt; 300
  end
end

class Empty
  def self.===(item)
    item.response_size == 0
  end
end

case http_response
when Empty
  puts "response was empty"
when Success
  puts "response was a success"
end
</code></pre>
------------------------------------------------------------------ <br><h3> Alexander, Id: 25915911, Score: 22: </h3><p>Depending on your case, you could prefer to use a hash of methods.</p>

<p>If there is a long list of <code>when</code>s and each of them has a concrete value to compare with (not an interval), it will be more effective to declare a hash of methods and then to call the relevant method from the hash like that.</p>

<pre><code># Define the hash
menu = {a: :menu1, b: :menu2, c: :menu2, d: :menu3}

# Define the methods
def menu1
  puts 'menu 1'
end

def menu2
  puts 'menu 2'
end

def menu3
  puts 'menu3'
end

# Let's say we case by selected_menu = :a
selected_menu = :a

# Then just call the relevant method from the hash
send(menu[selected_menu])
</code></pre>
------------------------------------------------------------------ <br><h3> Sonu Oommen, Id: 19783800, Score: 21: </h3><p>Since <code>switch case</code> always returns a single object, we can directly print its result:</p>

<pre><code>puts case a
     when 0
        "It's zero"
     when 1
        "It's one"
     end
</code></pre>
------------------------------------------------------------------ <br><h3> 123, Id: 21233188, Score: 20: </h3><p>Multi-value when and no-value case:</p>

<pre><code>print "Enter your grade: "
grade = gets.chomp
case grade
when "A", "B"
  puts 'You pretty smart!'
when "C", "D"
  puts 'You pretty dumb!!'
else
  puts "You can't even use a computer!"
end
</code></pre>

<p>And a <a href="http://en.wikipedia.org/wiki/Regular_expression">regular expression</a> solution here:</p>

<pre><code>print "Enter a string: "
some_string = gets.chomp
case
when some_string.match(/\d/)
  puts 'String has numbers'
when some_string.match(/[a-zA-Z]/)
  puts 'String has letters'
else
  puts 'String has no numbers or letters'
end
</code></pre>
<h4> tckmn, Comment 32206245 Score: 3: </h4>why not just <code>case some_string, when &#47;\d&#47;, (stuff), when &#47;[a-zA-Z]&#47;, (stuff), end</code> (where <code>,</code> means newline)<br><h4> tckmn, Comment 32206272 Score: 2: </h4>oh, and the first part is already covered in <a href="http://stackoverflow.com/a/20441220/1223693">this answer</a>, and many answers already mention regex. Frankly, this answer adds nothing new, and I&#39;m downvoting and voting to delete it.<br><h4> 123, Comment 32231928 Score: 1: </h4>@DoorknobofSnow This is to show that you can use Regex solution and comma seperated values in switch case. Not sure why the solution is giving you so much ache.<br><h4> Mike Graf, Comment 37616692 Score: 0: </h4>so if they got a &quot;F&quot;, a legit grade, its their fault your code is missing a case?<br><h4> CPHPython, Comment 86808744 Score: 0: </h4>@Doorknob I also agree that this is just a repetition of previous answers, but the fact that he presented instead an empty <i>case</i> using the <code>.match()</code> method is indeed an alternative answer to the <a href="https://stackoverflow.com/a/12914530/6225838">first and previous Regex answer in here</a>. I <b>can&#39;t see how and why this method would be preferable</b> though...<br>------------------------------------------------------------------ <br><h3> Vaisakh VM, Id: 42269911, Score: 14: </h3><p>You can write <code>case</code> expressions in two different ways in Ruby:</p>

<ol>
<li>Similar to a series of <code>if</code> statements</li>
<li>Specify a target next to the <code>case</code> and each <code>when</code> clause is compared to the target.</li>
</ol>

<pre><code>age = 20
case 
when age &gt;= 21
puts "display something"
when 1 == 0
puts "omg"
else
puts "default condition"
end
</code></pre>

<p>or:</p>

<pre><code>case params[:unknown]
when /Something/ then 'Nothing'
when /Something else/ then 'I dont know'
end
</code></pre>
<h4> user1438038, Comment 71698010 Score: 0: </h4>Though your code might answer the question, you should add at least a short description on what your code does and <i>how</i> it solves the initial problem.<br>------------------------------------------------------------------ <br><h3> Navin, Id: 37456498, Score: 11: </h3><p>You can do like this in more natural way,</p>

<pre><code>case expression
when condtion1
   function
when condition2
   function
else
   function
end
</code></pre>
------------------------------------------------------------------ <br><h3> jmansurf, Id: 18089662, Score: 9: </h3><p>Lots of great answers but I thought I would add one factoid.. If you are attempting to compare objects (Classes) make sure you have a space ship method (not a joke) or understand how they are being compared</p>

<p>"<a href="http://www.skorks.com/2009/09/ruby-equality-and-object-comparison/" rel="nofollow noreferrer">Ruby Equality And Object Comparison</a>" is a good discussion on the topic.</p>
<h4> the Tin Man, Comment 27627774 Score: 10: </h4>For reference, the &quot;space-ship&quot; method is <code>&lt;=&gt;</code>, which is used to return -1, 0, 1, or nil depending on whether the comparison returns less-than, equal, greater-than, or not-comparable respectively. Ruby&#39;s <a href="http://ruby-doc.org/core-2.0.0/Comparable.html" rel="nofollow noreferrer">Comparable</a> module documentation explains it.<br>------------------------------------------------------------------ <br><h3> BrunoF, Id: 38228649, Score: 8: </h3><p>As stated in many of the above answers, the <code>===</code> operator is used under the hood on <code>case</code>/<code>when</code> statements.</p>
<p>Here is additional information about that operator:</p>
<h2>Case equality operator: <code>===</code></h2>
<p>Many of Ruby's built-in classes, such as String, Range, and Regexp, provide their own implementations of the <code>===</code> operator, also known as &quot;case-equality&quot;, &quot;triple equals&quot; or &quot;threequals&quot;. Because it's implemented differently in each class, it will behave differently depending on the type of object it was called on. Generally, it returns true if the object on the right &quot;belongs to&quot; or &quot;is a member of&quot; the object on the left. For instance, it can be used to test if an object is an instance of a class (or one of its sub-classes).</p>
<pre><code>String === &quot;zen&quot;  # Output: =&gt; true
Range === (1..2)   # Output: =&gt; true
Array === [1,2,3]   # Output: =&gt; true
Integer === 2   # Output: =&gt; true
</code></pre>
<p>The same result can be achieved with other methods which are probably best suited for the job, such as <code>is_a?</code> and <code>instance_of?</code>.</p>
<h3>Range Implementation of <code>===</code></h3>
<p>When the <code>===</code> operator is called on a range object, it returns true if the value on the right falls within the range on the left.</p>
<pre><code>(1..4) === 3  # Output: =&gt; true
(1..4) === 2.345 # Output: =&gt; true
(1..4) === 6  # Output: =&gt; false

(&quot;a&quot;..&quot;d&quot;) === &quot;c&quot; # Output: =&gt; true
(&quot;a&quot;..&quot;d&quot;) === &quot;e&quot; # Output: =&gt; false
</code></pre>
<p>Remember that the <code>===</code> operator invokes the <code>===</code> method of the left-hand object. So <code>(1..4) === 3</code> is equivalent to <code>(1..4).=== 3</code>. In other words, the class of the left-hand operand will define which implementation of the <code>===</code> method will be called, so the operand positions are not interchangeable.</p>
<h3>Regexp Implementation of <code>===</code></h3>
<p>Returns true if the string on the right matches the regular expression on the left.</p>
<pre><code>/zen/ === &quot;practice zazen today&quot;  # Output: =&gt; true
# is similar to
&quot;practice zazen today&quot;=~ /zen/
</code></pre>
<p>The only relevant difference between the two examples above is that, when there is a match, <code>===</code> returns true and <code>=~</code> returns an integer, which is a truthy value in Ruby. We will get back to this soon.</p>
------------------------------------------------------------------ <br><h3> Paulo Belo, Id: 67314580, Score: 6: </h3><p><strong>If you need &quot;less than&quot; or &quot;greater than&quot;:</strong></p>
<pre><code>case x
when 1..5
  &quot;It's between 1 and 5&quot;
when 6
  &quot;It's 6&quot;
when 7..1.0/0
  &quot;It's equal or greater than 7&quot;
when -1.0/0..0
  &quot;It's equal or less than 0&quot;
end
</code></pre>
<p><code>1.0/0</code> is equal to <code>Float::INFINITY</code>, so you can use which you prefer.</p>
<p><strong>After Ruby 2.6</strong> you can use <a href="https://ruby-doc.org/core-2.6.1/Range.html#class-Range-label-Endless+Ranges" rel="nofollow noreferrer">Endless Ranges</a>,
<strong>After Ruby 2.7</strong> you can also use <a href="https://ruby-doc.org/core-2.7.0/Range.html#class-Range-label-Beginless-2FEndless+Ranges" rel="nofollow noreferrer">Beginless Ranges</a>, so you can do for example:</p>
<pre><code>case x
when 1..5
  &quot;It's between 1 and 5&quot;
when 6
  &quot;It's 6&quot;
when (7..)
  &quot;It's equal or greater than 7&quot;
when (..0)
  &quot;It's equal or less than 0&quot;
end
</code></pre>
------------------------------------------------------------------ <br><h3> Prabhakar, Id: 35954569, Score: 5: </h3><pre><code>puts "Recommend me a language to learn?"
input = gets.chomp.downcase.to_s

case input
when 'ruby'
    puts "Learn Ruby"
when 'python'
    puts "Learn Python"
when 'java'
    puts "Learn Java"
when 'php'
    puts "Learn PHP"
else
    "Go to Sleep!"
end
</code></pre>
------------------------------------------------------------------ <br><h3> deepfritz, Id: 24620053, Score: 4: </h3><p>I've started to use:</p>

<pre><code>a = "secondcase"

var_name = case a
  when "firstcase" then "foo"
  when "secondcase" then "bar"
end

puts var_name
&gt;&gt; "bar"
</code></pre>

<p>It helps compact code in some cases.</p>
<h4> Tom Lord, Comment 64206739 Score: 1: </h4>Code like this should usually be done using a <code>Hash</code>, rather than a <code>case</code> statement.<br><h4> the Tin Man, Comment 104355849 Score: 0: </h4>Using a hash would be faster when that switch gets big.<br>------------------------------------------------------------------ <br><h3> Navneet, Id: 47259477, Score: 4: </h3><pre><code>$age =  5
case $age
when 0 .. 2
   puts "baby"
when 3 .. 6
   puts "little child"
when 7 .. 12
   puts "child"
when 13 .. 18
   puts "youth"
else
   puts "adult"
end
</code></pre>

<p>See "<a href="https://www.tutorialspoint.com/ruby/ruby_if_else.htm" rel="nofollow noreferrer">Ruby - if...else, case, unless</a>" for more information.</p>
------------------------------------------------------------------ <br><h3> CPHPython, Id: 49898610, Score: 3: </h3><p>No support for regular expressions in your environment? E.g. <a href="https://help.shopify.com/manual/apps/apps-by-shopify/script-editor/limitations#regular-expressions" rel="nofollow noreferrer"><strong>Shopify</strong> Script Editor</a> (April, 2018):</p>
<blockquote>
<p>[Error]: uninitialized constant <strong>RegExp</strong></p>
</blockquote>
<p>A workaround following a combination of methods already previously covered in <a href="https://stackoverflow.com/a/38445037/6225838">here</a> and <a href="https://stackoverflow.com/a/20441220/6225838">here</a>:</p>
<pre><code>code = '!ADD-SUPER-BONUS!'

class StrContains
  def self.===(item)
    item.include? 'SUPER' or item.include? 'MEGA' or\
    item.include? 'MINI' or item.include? 'UBER'
  end
end

case code.upcase
when '12345PROMO', 'CODE-007', StrContains
  puts &quot;Code #{code} is a discount code!&quot;
when '!ADD-BONUS!'
  puts 'This is a bonus code!'
else
  puts 'Sorry, we can\'t do anything with the code you added...'
end
</code></pre>
<p>I used <code>or</code>s in the class method statement since <code>||</code> has higher precedence than
<code>.include?</code>.</p>
<p>If you still prefer using <code>||</code>, <a href="https://stackoverflow.com/a/49814089/6225838">even though <code>or</code> is preferable in this case</a>, you can do this instead: <code>(item.include? 'A') || ...</code>.
You can test it in this <a href="https://repl.it/repls/LightyellowCloseAddition" rel="nofollow noreferrer">repl.it</a>.</p>
------------------------------------------------------------------ <br><h3> Daniel Viglione, Id: 55269478, Score: 3: </h3><p>It's critical to emphasize the comma (<code>,</code>) in a <code>when</code> clause. It acts as an <code>||</code> of an <code>if</code> statement, that is, it does an <em>OR</em> comparison and not an <em>AND</em> comparison between the delimited expressions of the <code>when</code> clause. See the following case statement:</p>

<pre><code>x = 3
case x
  when 3, x &lt; 2 then 'apple'
  when 3, x &gt; 2 then 'orange'
end
 =&gt; "apple"
</code></pre>

<p><code>x</code> is not less than 2, yet the return value is <code>"apple"</code>. Why? Because <code>x</code> was 3 and since <code>',`` acts as an</code>||<code>, it did not bother to evaluate the expression</code>x &lt; 2'.</p>

<p>You might think that to perform an <em>AND</em>, you can do something like this below, but it doesn't work:</p>

<pre><code>case x
  when (3 &amp;&amp; x &lt; 2) then 'apple'
  when (3 &amp;&amp; x &gt; 2) then 'orange'
end
 =&gt; nil 
</code></pre>

<p>It doesn't work because <code>(3 &amp;&amp; x &gt; 2)</code> evaluates to true, and Ruby takes the True value and compares it to <code>x</code> with <code>===</code>, which is not true, since <code>x</code> is 3. </p>

<p>To do an <code>&amp;&amp;</code> comparison, you will have to treat <code>case</code> like an <code>if</code>/<code>else</code> block:</p>

<pre><code>case
  when x == 3 &amp;&amp; x &lt; 2 then 'apple'
  when x == 3 &amp;&amp; x &gt; 2 then 'orange'
end
</code></pre>

<p>In the Ruby Programming Language book, Matz says this latter form is the simple (and infrequently used) form, which is nothing more than an alternative syntax for <code>if</code>/<code>elsif</code>/<code>else</code>. However, whether it is infrequently used or not, I do not see any other way to attach multiple <code>&amp;&amp;</code> expressions for a given <code>when</code> clause.</p>
<h4> sondra.kinsey, Comment 99064866 Score: 0: </h4>This doesn&#39;t seem like good coding style to me. Using a rare alternate syntax unnecessarily obfuscates. Why not use normal <code>if...elsif</code>? It seems you&#39;re trying to mix a case statement and a condition. Why? Just put the conditional <i>inside</i> the when block, eg. <code>when 3; ( x &lt; 2 ) ? &#39;apple&#39; : &#39;orange&#39;</code><br>------------------------------------------------------------------ <br><h3> Ben96, Id: 58660144, Score: 2: </h3><p>The <code>case</code> statement operator is like <code>switch</code> in the other languages.</p>

<p>This is the syntax of <code>switch...case</code> in C:</p>

<pre class="lang-c prettyprint-override"><code>switch (expression)
​{
    case constant1:
      // statements
      break;
    case constant2:
      // statements
      break;
    .
    .
    .
    default:
      // default statements
}
</code></pre>

<p>This is the syntax of <code>case...when</code> in Ruby:</p>

<pre class="lang-rb prettyprint-override"><code>case expression
  when constant1, constant2 #Each when statement can have multiple candidate values, separated by commas.
     # statements 
     next # is like continue in other languages
  when constant3
     # statements 
     exit # exit is like break in other languages
  .
  .
  .
  else
     # statements
end
</code></pre>

<p>For example:</p>

<pre><code>x = 10
case x
when 1,2,3
  puts "1, 2, or 3"
  exit
when 10
  puts "10" # it will stop here and execute that line
  exit # then it'll exit
else
  puts "Some other number"
end
</code></pre>

<p>For more information see the <a href="https://ruby-doc.org/core-2.6.5/doc/syntax/control_expressions_rdoc.html#label-case+Expression" rel="nofollow noreferrer"><code>case</code></a> documentation.</p>
------------------------------------------------------------------ <br><h3> Foram, Id: 54360808, Score: 1: </h3><p>We can write switch statement for multiple conditions. </p>

<p>For Example,</p>

<pre><code>x = 22

CASE x
  WHEN 0..14 THEN puts "#{x} is less than 15"    
  WHEN 15 THEN puts "#{x} equals 15" 
  WHEN 15 THEN puts "#{x} equals 15" 
  WHEN 15..20 THEN puts "#{x} is greater than 15" 
  ELSE puts "Not in the range, value #{x} " 
END
</code></pre>
<h4> sondra.kinsey, Comment 99064929 Score: 2: </h4>This won&#39;t work; Ruby keywords (eg. <code>case</code>, <code>when</code>, <code>end</code>) are case-sensitive and cannot be uppercase like this.<br><h4> the Tin Man, Comment 104356443 Score: 0: </h4><code>NoMethodError (undefined method </code>CASE&#39; for main:Object)`. As @sondra.kinsey said, you can&#39;t use upper-case. Ruby will think it&#39;s a CONSTANT.<br>------------------------------------------------------------------ <br><h3> AlexSh, Id: 66248357, Score: 1: </h3><p>I prefer to use case + then</p>
<pre><code>number = 10

case number
when 1...8 then # ...
when 8...15 then # ...
when 15.. then # ...
end
</code></pre>
------------------------------------------------------------------ <br><h3> Moriarty, Id: 68492547, Score: 1: </h3><p>Ruby supports a case expression instead.</p>
<p><strong>Class matching:</strong></p>
<pre><code>case e = StandardError.new(&quot;testing&quot;)
when Exception then puts &quot;error!&quot;
else puts &quot;ok!&quot;
end # =&gt; error! 
</code></pre>
<p><strong>Multiple value matching:</strong></p>
<pre><code>case 3
when 1,2,3 then puts &quot;1..3&quot;
when 4,5,6 then puts &quot;4..6&quot;
else puts &quot;?&quot;
end # =&gt; 1..3
</code></pre>
<p><strong>Regex evaluation:</strong></p>
<pre><code>case &quot;monkey&quot;
when /mon/ then puts &quot;banana&quot;
else puts &quot;?&quot; 
end # =&gt; banana
</code></pre>
------------------------------------------------------------------ <br><h3> mechnicov, Id: 73715598, Score: 1: </h3><p>Ruby introduced <a href="https://docs.ruby-lang.org/en/master/syntax/pattern_matching_rdoc.html" rel="nofollow noreferrer">pattern matching</a> in 2.7</p>
<p>It is super powerful feature</p>
<p>It also use <code>case</code>, but have another syntax</p>
<p>There is also find pattern feature</p>
<pre class="lang-rb prettyprint-override"><code>users =
  { users:
    [
      { user: 'user', email: 'user@user.com' },
      { user: 'admin', email: 'admin@admin.com' },
    ]
  }

case users
in users: [*, { user:, email: /admin/ =&gt; admin_email }, *]
  puts admin_email
else
  puts &quot;No admin&quot;
end

# will print admin@admin.com
</code></pre>
<p>Unlike the usual <code>case</code>, if the conditions are not matched, <code>NoMatchingPatternError</code> will be thrown. So you may have to use the <code>else</code> branch</p>
