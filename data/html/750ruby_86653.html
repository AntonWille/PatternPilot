 <h2> Title: How to &quot;pretty&quot; format JSON output </h2> <h3> JP Richardson, question_id: 86653 </h3>Score: 750, Tags: {ruby-on-rails,ruby,json,pretty-print} <br><p>I would like my JSON output in Ruby on Rails to be "pretty" or nicely formatted. </p>

<p>Right now, I call <code>to_json</code> and my JSON is all on one line.  At times this can be difficult to see if there is a problem in the JSON output stream.</p>

<p>Is there way to configure to make my JSON "pretty" or nicely formatted in Rails?</p>
<h4> Comment 7336896 the Tin Man: </h4>One thing to remember when doing this, is that your JSON content&#39;s size will balloon because of the additional whitespace. In a development environment it is often helpful to have the JSON easy to read, but in a production environment you want your content to be as lean as you can get it for speed and responsiveness in the user&#39;s browser.<br><h4> Comment 22722134 nurettin: </h4>@randomor <code>undefined method &#39;y&#39; for main:Object</code><br><h4> Comment 13607804 Ryan Florence: </h4>Not sure where you&#39;re looking at it, but in webkit&#39;s console it creates a nice tree out of any JSON logged or requested.<br><h4> Comment 20502948 randomor: </h4>use <code>y my_json</code> will nicely format stuff if you wanna some quick fix.<br><h4> Comment 63360746 Sophia Feng: </h4><code>y</code> is available in rails console.<br><h4> Comment 88621061 PJSCopeland: </h4><code>y</code> prints out YAML formatting (which is always pretty); <code>j</code> prints out JSON formatting, but not prettified. <a href="https://stackoverflow.com/questions/86653/how-can-i-pretty-format-my-json-output-in-ruby-on-rails#comment4599397_1823885">TheDeadSerious&#39;s comment</a> shows you how you can get pretty printouts instead.<br>------------------------------------------------------------------ <br><h3> Answer 1823885 lambshaanxy: </h3><p>Use the <code>pretty_generate()</code> function, built into later versions of JSON. For example:</p>

<pre><code>require 'json'
my_object = { :array =&gt; [1, 2, 3, { :sample =&gt; "hash"} ], :foo =&gt; "bar" }
puts JSON.pretty_generate(my_object)
</code></pre>

<p>Which gets you:</p>

<pre><code>{
  "array": [
    1,
    2,
    3,
    {
      "sample": "hash"
    }
  ],
  "foo": "bar"
}
</code></pre>
<h4> Comment 9073600 lambshaanxy: </h4>The original poster said nothing about <i>where</i> in a Rails app he wants to use this, so I answered with a line of Ruby that will work anywhere.  To use it to generate the JSON response in a Rails <i>controller</i>, you already answered your own question: <code>format.json { render :json =&gt; JSON.pretty_generate(my_json) }</code>.<br><h4> Comment 4599397 TheDeadSerious: </h4>Nifty! I&#39;ve put this into my ~/.irbrc: def json_pp(json)   puts JSON.pretty_generate(JSON.parse(json)) end<br><h4> Comment 9051788 iconoclast: </h4>To make this useful in Rails, it seems that you should give an answer which includes code that can be used in the same context as <code>format.json { render :json =&gt; @whatever }</code><br><h4> Comment 9052715 lambshaanxy: </h4>Surely prettyprinting should only be used for server-side debugging?  If you stick the code above in a controller, you&#39;ll have tons of useless whitespace in all responses, which isn&#39;t even needed for client-side debugging as any tools worth their salt (eg. Firebug) already handle prettyprinting JSON.<br><h4> Comment 9063068 iconoclast: </h4>@jpatokal: you may consider there to be other better options, but the question was how to get this to work in Rails.  Saying &quot;you don&#39;t want to do that in Rails&quot; is a non-answer.  Obviously a lot of people want to do it in Rails.<br><h4> Comment 84640280 Lev Lukomskyi: </h4>There is also handy method in console <code>jj</code>, which pretty prints json object to STDOUT<br><h4> Comment 28190083 Sheharyar: </h4>@jpatokal&#39;s comment above for <code>render</code> didn&#39;t work for me. I had to modify it a bit: <code>render :json =&gt; JSON.pretty_generate(JSON.parse(my_json))</code><br><h4> Comment 28199674 lambshaanxy: </h4>If you have to call <code>JSON.parse</code> on it, your <code>my_json</code> is a string, not JSON!<br><h4> Comment 94266774 sekmo: </h4>Is there a better way to do something like <code>JSON.pretty_generate(JSON.parse(json_stuff))</code> if you have a json and not a hash?<br>------------------------------------------------------------------ <br><h3> Answer 17455728 Roger Garza: </h3><p>The <code>&lt;pre&gt;</code> tag in HTML, used with <code>JSON.pretty_generate</code>, will render the JSON pretty in your view. I was so happy when my illustrious boss showed me this:</p>

<pre><code>&lt;% if @data.present? %&gt;
   &lt;pre&gt;&lt;%= JSON.pretty_generate(@data) %&gt;&lt;/pre&gt;
&lt;% end %&gt;
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 13029297 gertas: </h3><p>Thanks to Rack Middleware and Rails 3 you can output pretty JSON for every request without changing any controller of your app. I have written such middleware snippet and I get nicely printed JSON in browser and <code>curl</code> output.</p>

<pre><code>class PrettyJsonResponse
  def initialize(app)
    @app = app
  end

  def call(env)
    status, headers, response = @app.call(env)
    if headers["Content-Type"] =~ /^application\/json/
      obj = JSON.parse(response.body)
      pretty_str = JSON.pretty_unparse(obj)
      response = [pretty_str]
      headers["Content-Length"] = pretty_str.bytesize.to_s
    end
    [status, headers, response]
  end
end
</code></pre>

<p>The above code should be placed in <code>app/middleware/pretty_json_response.rb</code> of your Rails project.
And the final step is to register the middleware in <code>config/environments/development.rb</code>:</p>

<pre><code>config.middleware.use PrettyJsonResponse
</code></pre>

<p><strong>I don't recommend to use it in <code>production.rb</code></strong>. The JSON reparsing may degrade response time and throughput of your production app. Eventually extra logic such as 'X-Pretty-Json: true' header may be introduced to trigger formatting for manual curl requests on demand.</p>

<p>(Tested with Rails 3.2.8-5.0.0, Ruby 1.9.3-2.2.0, Linux)</p>
<h4> Comment 31981797 elsurudo: </h4>Works great in Rails 4 as well... thanks! I prefer this to the more library-specific methods (as in the accepted answer). Since you should only use this in dev mode anyways, the performance hit isn&#39;t a big deal.<br><h4> Comment 64691785 panteo: </h4>In Rails 5 I had to change <code>Rack::Utils.bytesize(pretty_str).to_s</code> to <code>pretty_str.bytesize.to_s</code> and it works great!<br><h4> Comment 27260797 Ammo Goettsch: </h4>How are you getting around ActiveSupport&#39;s <a href="https://github.com/rails/rails/blob/3-0-stable/activesupport/lib/active_support/core_ext/object/to_json.rb" rel="nofollow noreferrer">redefinition</a> of to_json?  This keeps me from pretty printing while ActiveSupport is present.<br><h4> Comment 27293867 gertas: </h4>I don&#39;t care really, to_json, as_json, <a href="https://github.com/rails/jbuilder" rel="nofollow noreferrer">jbuilder</a> which I use mostly - whatever, middleware transforms any JSON output. I try to avoid opening classes whenever possible.<br><h4> Comment 28270685 Kimmo Lehto: </h4>I had to change the parse line to <code>obj = JSON.parse(response.body.first)</code> to make it work.<br><h4> Comment 71414118 Xavier: </h4>Fantastic, thanks!  I made a gem out of this: <a href="https://github.com/zeiv/rails_pretty_json" rel="nofollow noreferrer">github.com/zeiv/rails_pretty_json</a><br><h4> Comment 59386987 counterbeing: </h4>Working wonderfully for me with rails 4.2.5 and Puma as my server. Absolutely lovely. Thank you!<br><h4> Comment 39024723 Matthew Brown: </h4>I like this one, and I am looking forward to using it.<br><h4> Comment 41617405 Wayne Conrad: </h4>See <a href="http://stackoverflow.com/a/26491790/238886">stackoverflow.com/a/26491790/238886</a> for an evolution of this solution that does not call <code>response.body</code> and should work in any Rack app.<br><h4> Comment 28284662 gertas: </h4>Just tried your advice and it failed as <code>body</code> is a string under both Thin and Passenger in development mode. RoR3/4 and Ruby 2.0. The <code>response.body</code> is <a href="http://apidock.com/rails/v3.2.13/ActionDispatch/Response/body" rel="nofollow noreferrer">apidock.com/rails/v3.2.13/ActionDispatch/Response/body</a><br>------------------------------------------------------------------ <br><h3> Answer 38108045 Synthead: </h3><p>Check out <a href="https://github.com/awesome-print/awesome_print" rel="noreferrer">Awesome Print</a>.  Parse the JSON string into a Ruby Hash, then display it with <code>ap</code> like so:</p>

<pre><code>require "awesome_print"
require "json"

json = '{"holy": ["nested", "json"], "batman!": {"a": 1, "b": 2}}'

ap(JSON.parse(json))
</code></pre>

<p>With the above, you'll see:</p>

<pre><code>{
  "holy" =&gt; [
    [0] "nested",
    [1] "json"
  ],
  "batman!" =&gt; {
    "a" =&gt; 1,
    "b" =&gt; 2
  }
}
</code></pre>

<p>Awesome Print will also add some color that Stack Overflow won't show you.</p>
<h4> Comment 131318922 Alireza mohagheghi: </h4>This one is really good and makes the results easier to read. It shows the results in different colors and is great for Active-record, hash or array...<br>------------------------------------------------------------------ <br><h3> Answer 23018176 Ed Lebert: </h3><p>If you want to:</p>

<ol>
<li>Prettify all outgoing JSON responses from your app automatically.</li>
<li>Avoid polluting Object#to_json/#as_json</li>
<li>Avoid parsing/re-rendering JSON using middleware (YUCK!)</li>
<li>Do it the RAILS WAY!</li>
</ol>

<p>Then ... replace the ActionController::Renderer for JSON! Just add the following code to your ApplicationController:</p>

<pre><code>ActionController::Renderers.add :json do |json, options|
  unless json.kind_of?(String)
    json = json.as_json(options) if json.respond_to?(:as_json)
    json = JSON.pretty_generate(json, options)
  end

  if options[:callback].present?
    self.content_type ||= Mime::JS
    "#{options[:callback]}(#{json})"
  else
    self.content_type ||= Mime::JSON
    json
  end
end
</code></pre>
<h4> Comment 52069827 Christopher Oezbek: </h4>Several problems with this: (1) JSON.pretty_generate requires <code>json.respond_to?(:to_h)</code> or <code>:to_hash</code>. (2) pretty_generate can choke on things that to_json does not.<br><h4> Comment 47516432 nornagon: </h4>This is awesome, but it actually causes dates/times to render differently: <a href="https://gist.github.com/nornagon/9c24b68bd6d3e871add3" rel="nofollow noreferrer">gist.github.com/nornagon/9c24b68bd6d3e871add3</a><br><h4> Comment 92022621 ConorSheehan1: </h4>@nornagon I haven&#39;t applied this change and I&#39;m getting the same difference you saw between .to_json and pretty_generate. I only see it in a rails console, not plain irb. I think this could be a general rails thing, nothing to do with this patch. Also, Time.parse returns the same result when you convert the string back to time for both formats. It&#39;d only be a minor inconvenience when searching logs for time stamps, but if you&#39;re grepping anyway adding a few \s+ isn&#39;t really a big deal.<br><h4> Comment 92116161 ConorSheehan1: </h4>@nornagon looks like the issue you saw was ActiveSupport&#39;s <a href="https://github.com/rails/rails/blob/3-0-stable/activesupport/lib/active_support/core_ext/object/to_json.rb" rel="nofollow noreferrer">redefinition</a> of to_json, as mentioned in <a href="https://stackoverflow.com/a/13029297/6305204">Ammo Goettsch&#39;s comment</a><br>------------------------------------------------------------------ <br><h3> Answer 22864283 Thomas Klemm: </h3><p>Dumping an ActiveRecord object to JSON (in the Rails console):</p>

<pre><code>pp User.first.as_json

# =&gt; {
 "id" =&gt; 1,
 "first_name" =&gt; "Polar",
 "last_name" =&gt; "Bear"
}
</code></pre>
<h4> Comment 69525328 Johnny Wong: </h4>to get a string from <code>pp</code> instead of printing to standard output, use <code>User.first.as_json.pretty_inspect</code>.  Works well for me.<br>------------------------------------------------------------------ <br><h3> Answer 44000539 Буянбат Чойжилсүрэн: </h3><pre><code>#At Controller
def branch
    @data = Model.all
    render json: JSON.pretty_generate(@data.as_json)
end
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 29679793 Phrogz: </h3><p>If you  find that the <code>pretty_generate</code> option built into Ruby's JSON library is not "pretty" enough, I recommend my own <a href="https://github.com/Phrogz/NeatJSON" rel="noreferrer">NeatJSON</a> gem for your formatting.</p>

<p>To use it:</p>

<pre><code>gem install neatjson
</code></pre>

<p>and then use</p>

<pre><code>JSON.neat_generate
</code></pre>

<p>instead of</p>

<pre><code>JSON.pretty_generate
</code></pre>

<p>Like Ruby's <code>pp</code> it will keep objects and arrays on one line when they fit, but wrap to multiple as needed. For example:</p>

<pre class="lang-json prettyprint-override"><code>{
  "navigation.createroute.poi":[
    {"text":"Lay in a course to the Hilton","params":{"poi":"Hilton"}},
    {"text":"Take me to the airport","params":{"poi":"airport"}},
    {"text":"Let's go to IHOP","params":{"poi":"IHOP"}},
    {"text":"Show me how to get to The Med","params":{"poi":"The Med"}},
    {"text":"Create a route to Arby's","params":{"poi":"Arby's"}},
    {
      "text":"Go to the Hilton by the Airport",
      "params":{"poi":"Hilton","location":"Airport"}
    },
    {
      "text":"Take me to the Fry's in Fresno",
      "params":{"poi":"Fry's","location":"Fresno"}
    }
  ],
  "navigation.eta":[
    {"text":"When will we get there?"},
    {"text":"When will I arrive?"},
    {"text":"What time will I get to the destination?"},
    {"text":"What time will I reach the destination?"},
    {"text":"What time will it be when I arrive?"}
  ]
}
</code></pre>

<p>It also supports a variety of <a href="https://github.com/Phrogz/NeatJSON#options" rel="noreferrer">formatting options</a> to further customize your output. For example, how many spaces before/after colons? Before/after commas? Inside the brackets of arrays and objects? Do you want to sort the keys of your object? Do you want the colons to all be lined up?</p>
------------------------------------------------------------------ <br><h3> Answer 38733065 oj5th: </h3><p>Using <code>&lt;pre&gt;</code> HTML code and <code>pretty_generate</code> is good trick:</p>

<pre><code>&lt;%
  require 'json'

  hash = JSON[{hey: "test", num: [{one: 1, two: 2, threes: [{three: 3, tthree: 33}]}]}.to_json] 
%&gt;

&lt;pre&gt;
  &lt;%=  JSON.pretty_generate(hash) %&gt;
&lt;/pre&gt;
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 26491790 Wayne Conrad: </h3><p>Here is a middleware solution modified from <a href="https://stackoverflow.com/a/13029297/238886">this excellent answer by @gertas</a>.  This solution is not Rails specific--it should work with any Rack application.</p>

<p>The middleware technique used here, using #each, is explained at <a href="http://asciicasts.com/episodes/151-rack-middleware" rel="noreferrer">ASCIIcasts 151: Rack Middleware</a> by Eifion Bedford.</p>

<p>This code goes in <em>app/middleware/pretty_json_response.rb</em>:</p>

<pre><code>class PrettyJsonResponse

  def initialize(app)
    @app = app
  end

  def call(env)
    @status, @headers, @response = @app.call(env)
    [@status, @headers, self]
  end

  def each(&amp;block)
    @response.each do |body|
      if @headers["Content-Type"] =~ /^application\/json/
        body = pretty_print(body)
      end
      block.call(body)
    end
  end

  private

  def pretty_print(json)
    obj = JSON.parse(json)  
    JSON.pretty_unparse(obj)
  end

end
</code></pre>

<p>To turn it on, add this to config/environments/test.rb and config/environments/development.rb:</p>

<pre><code>config.middleware.use "PrettyJsonResponse"
</code></pre>

<p>As @gertas warns in his version of this solution, avoid using it in production.  It's somewhat slow.</p>

<p>Tested with Rails 4.1.6.</p>
------------------------------------------------------------------ <br><h3> Answer 35445669 sealocal: </h3><p>If you're looking to quickly implement this in a Rails controller action to send a JSON response:</p>

<pre><code>def index
  my_json = '{ "key": "value" }'
  render json: JSON.pretty_generate( JSON.parse my_json )
end
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 14008507 Christopher Mullins: </h3><p>Here's my solution which I derived from other posts during my own search.</p>

<p>This allows you to send the pp and jj output to a file as needed.</p>

<pre><code>require "pp"
require "json"

class File
  def pp(*objs)
    objs.each {|obj|
      PP.pp(obj, self)
    }
    objs.size &lt;= 1 ? objs.first : objs
  end
  def jj(*objs)
    objs.each {|obj|
      obj = JSON.parse(obj.to_json)
      self.puts JSON.pretty_generate(obj)
    }
    objs.size &lt;= 1 ? objs.first : objs
  end
end

test_object = { :name =&gt; { first: "Christopher", last: "Mullins" }, :grades =&gt; [ "English" =&gt; "B+", "Algebra" =&gt; "A+" ] }

test_json_object = JSON.parse(test_object.to_json)

File.open("log/object_dump.txt", "w") do |file|
  file.pp(test_object)
end

File.open("log/json_dump.txt", "w") do |file|
  file.jj(test_json_object)
end
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 20132986 Tony: </h3><p>I have used the gem CodeRay and it works pretty well. The format includes colors and it recognises a lot of different formats.</p>

<p>I have used it on a gem that can be used for debugging rails APIs and it works pretty well.</p>

<p>By the way, the gem is named 'api_explorer' (<a href="http://www.github.com/toptierlabs/api_explorer" rel="noreferrer">http://www.github.com/toptierlabs/api_explorer</a>)</p>
------------------------------------------------------------------ <br><h3> Answer 70187118 TorvaldsDB: </h3><h3>if you want to handle active_record object, <code>puts</code> is enough.</h3>
<p>for example:</p>
<ul>
<li>without <code>puts</code></li>
</ul>
<pre class="lang-rb prettyprint-override"><code>2.6.0 (main):0 &gt; User.first.to_json
  User Load (0.4ms)  SELECT  &quot;users&quot;.* FROM &quot;users&quot; ORDER BY &quot;users&quot;.&quot;id&quot; ASC LIMIT $1  [[&quot;LIMIT&quot;, 1]]
=&gt; &quot;{\&quot;id\&quot;:1,\&quot;admin\&quot;:true,\&quot;email\&quot;:\&quot;admin@gmail.com\&quot;,\&quot;password_digest\&quot;:\&quot;$2a$10$TQy3P7NT8KrdCzliNUsZzuhmo40LGKoth2hwD3OI.kD0lYiIEwB1y\&quot;,\&quot;created_at\&quot;:\&quot;2021-07-20T08:34:19.350Z\&quot;,\&quot;updated_at\&quot;:\&quot;2021-07-20T08:34:19.350Z\&quot;,\&quot;name\&quot;:\&quot;Arden Stark\&quot;}&quot;
</code></pre>
<ul>
<li>with <code>puts</code></li>
</ul>
<pre class="lang-rb prettyprint-override"><code>2.6.0 (main):0 &gt; puts User.first.to_json
  User Load (0.3ms)  SELECT  &quot;users&quot;.* FROM &quot;users&quot; ORDER BY &quot;users&quot;.&quot;id&quot; ASC LIMIT $1  [[&quot;LIMIT&quot;, 1]]
{&quot;id&quot;:1,&quot;admin&quot;:true,&quot;email&quot;:&quot;admin@gmail.com&quot;,&quot;password_digest&quot;:&quot;$2a$10$TQy3P7NT8KrdCzliNUsZzuhmo40LGKoth2hwD3OI.kD0lYiIEwB1y&quot;,&quot;created_at&quot;:&quot;2021-07-20T08:34:19.350Z&quot;,&quot;updated_at&quot;:&quot;2021-07-20T08:34:19.350Z&quot;,&quot;name&quot;:&quot;Arden Stark&quot;}
=&gt; nil
</code></pre>
<h3>if you are handle the json data, <a href="https://devdocs.io/ruby%7E3/json#method-i-pretty_generate" rel="noreferrer">JSON.pretty_generate</a> is a good alternative</h3>
<p>Example:</p>
<pre class="lang-rb prettyprint-override"><code>obj = {foo: [:bar, :baz], bat: {bam: 0, bad: 1}}
json = JSON.pretty_generate(obj)
puts json
</code></pre>
<p>Output:</p>
<pre class="lang-rb prettyprint-override"><code>{
  &quot;foo&quot;: [
    &quot;bar&quot;,
    &quot;baz&quot;
  ],
  &quot;bat&quot;: {
    &quot;bam&quot;: 0,
    &quot;bad&quot;: 1
  }
}
</code></pre>
<h3>if it's in the ROR project, I always prefer to use gem <code>pry-rails</code> to format my codes in the <code>rails console</code> rather than <code>awesome_print</code> which is too verbose.</h3>
<p>Example of <code>pry-rails</code>:</p>
<p><a href="https://i.stack.imgur.com/qrDLG.png" rel="noreferrer"><img src="https://i.stack.imgur.com/qrDLG.png" alt="enter image description here" /></a></p>
<p>it also has syntax highlight.</p>
------------------------------------------------------------------ <br><h3> Answer 56272398 SergA: </h3><p>Pretty print variant (<strong>Rails</strong>):</p>
<pre class="lang-rb prettyprint-override"><code>my_obj = {
  'array' =&gt; [1, 2, 3, { &quot;sample&quot; =&gt; &quot;hash&quot;}, 44455, 677778, nil ],
  foo: &quot;bar&quot;, rrr: {&quot;pid&quot;: 63, &quot;state with nil and \&quot;nil\&quot;&quot;: false},
  wwww: 'w' * 74
}
</code></pre>
<pre class="lang-rb prettyprint-override"><code>require 'pp'
puts my_obj.as_json.pretty_inspect.
            gsub('=&gt;', ': ').
            gsub(/&quot;(?:[^&quot;\\]|\\.)*&quot;|\bnil\b/) {|m| m == 'nil' ? 'null' : m }.
            gsub(/\s+$/, &quot;&quot;)
</code></pre>
<p>Result:</p>
<pre class="lang-json prettyprint-override"><code>{&quot;array&quot;: [1, 2, 3, {&quot;sample&quot;: &quot;hash&quot;}, 44455, 677778, null],
 &quot;foo&quot;: &quot;bar&quot;,
 &quot;rrr&quot;: {&quot;pid&quot;: 63, &quot;state with nil and \&quot;nil\&quot;&quot;: false},
 &quot;wwww&quot;:
  &quot;wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww&quot;}

</code></pre>
------------------------------------------------------------------ <br><h3> Answer 33993183 Sergio Belevskij: </h3><pre><code>
# example of use:
a_hash = {user_info: {type: "query_service", e_mail: "my@email.com", phone: "+79876543322"}, cars_makers: ["bmw", "mitsubishi"], car_models: [bmw: {model: "1er", year_mfc: 2006}, mitsubishi: {model: "pajero", year_mfc: 1997}]}
pretty_html = a_hash.pretty_html

# include this module to your libs:
module MyPrettyPrint
    def pretty_html indent = 0
        result = ""
        if self.class == Hash
            self.each do |key, value|
                result += "#{key}</p>: #{[Array, Hash].include?(value.class) ? value.pretty_html(indent+1) : value}</p></li>"
            end
        elsif self.class == Array
            result = "[#{self.join(', ')}]"
        end
        "#{result}"
    end

end

class Hash
    include MyPrettyPrint
end

class Array
    include MyPrettyPrint
end
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 58530985 Martin Carstens: </h3><p>Simplest example, I could think of:</p>

<pre><code>my_json = '{ "name":"John", "age":30, "car":null }'
puts JSON.pretty_generate(JSON.parse(my_json))
</code></pre>

<p>Rails console example:</p>

<pre><code>core dev 1555:0&gt; my_json = '{ "name":"John", "age":30, "car":null }'
=&gt; "{ \"name\":\"John\", \"age\":30, \"car\":null }"
core dev 1556:0&gt; puts JSON.pretty_generate(JSON.parse(my_json))
{
  "name": "John",
  "age": 30,
  "car": null
}
=&gt; nil
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 32404082 Jim Flood: </h3><p>If you are using <a href="https://github.com/nesquena/rabl" rel="nofollow">RABL</a> you can configure it as described <a href="https://github.com/nesquena/rabl/issues/301" rel="nofollow">here</a> to use JSON.pretty_generate:</p>

<pre><code>class PrettyJson
  def self.dump(object)
    JSON.pretty_generate(object, {:indent =&gt; "  "})
  end
end

Rabl.configure do |config|
  ...
  config.json_engine = PrettyJson if Rails.env.development?
  ...
end
</code></pre>

<p>A problem with using JSON.pretty_generate is that JSON schema validators will no longer be happy with your datetime strings. You can fix those in your config/initializers/rabl_config.rb with:</p>

<pre><code>ActiveSupport::TimeWithZone.class_eval do
  alias_method :orig_to_s, :to_s
  def to_s(format = :default)
    format == :default ? iso8601 : orig_to_s(format)
  end
end
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 22776594 TheDadman: </h3><p>I use the following as I find the headers, status and JSON output useful as
a set. The call routine is broken out on recommendation from a railscasts presentation at: <a href="http://railscasts.com/episodes/151-rack-middleware?autoplay=true" rel="nofollow">http://railscasts.com/episodes/151-rack-middleware?autoplay=true</a></p>

<pre><code>  class LogJson

  def initialize(app)
    @app = app
  end

  def call(env)
    dup._call(env)
  end

  def _call(env)
    @status, @headers, @response = @app.call(env)
    [@status, @headers, self]
  end

  def each(&amp;block)
    if @headers["Content-Type"] =~ /^application\/json/
      obj = JSON.parse(@response.body)
      pretty_str = JSON.pretty_unparse(obj)
      @headers["Content-Length"] = Rack::Utils.bytesize(pretty_str).to_s
      Rails.logger.info ("HTTP Headers:  #{ @headers } ")
      Rails.logger.info ("HTTP Status:  #{ @status } ")
      Rails.logger.info ("JSON Response:  #{ pretty_str} ")
    end

    @response.each(&amp;block)
  end
  end
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 72740405 stevec: </h3><p>I had a JSON object in the rails console, and wanted to display it nicely in the console (as opposed to displaying like a massive concatenated string), it was as simple as:</p>
<pre class="lang-rb prettyprint-override"><code>data.as_json
</code></pre>
<h4> Comment 131892641 stevec: </h4>I arrived back at my own answer (again after trying all the others) 6 months later. The mistake I was making a lot of was using <code>.to_json</code> instead of <code>.as_json</code>.<br>