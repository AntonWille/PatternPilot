 <h2> Title: How can I de-install a Perl module installed via `cpan`? </h2> <h4> user181548, question_id: 2626449 </h4>Score: 90, Tags: {perl,module,cpan} <br><p>I am using Perl running in user space (not installed via root) and installing modules via the command-line <code>cpan</code>. I would like to know if there is a simple way to remove a module without having to do a lot of work deleting individual files.</p>

<p>I searched for this question on the internet and found some answers, but the answers I've found seem to either discuss using the Perl package manager (specific for Microsoft Windows), otherwise operating-system specific (BSDpan), suggesting using cpanplus (which I've had several bad experiences with), or ended by pointing to a dead link as follows: <code>http://www.cpan.org/misc/cpan-faq.html#How_delete_Perl_modules</code>.</p>

<p>My question is specifically whether there is a clean way to remove a module installed via <code>cpan</code>.</p>
<h4> user181548, Id: 2642373 Score: 38: </h4>You really can&#39;t think of any reason to want to remove any Perl module from any system?<br><h4> AlwaysLearning, Id: 41514099 Score: 8: </h4>@AmbroseChapel: an obvious reason is to test code that detects whether end users have the required Perl module installed during start up. Which is where I&#39;m at now. I guess I have to run up a clean VM to run that test instead.<br><h4> felwithe, Id: 52759854 Score: 6: </h4>@AmbroseChapel &quot;Why&quot; is not necessary to answer a technical question.<br><h4> Ray, Id: 21123783 Score: 5: </h4>I for one, need to get rid of a few modules so I will have space on my 2GB Raspberry Pi<br><h4> Richlv, Id: 91569026 Score: 3: </h4>And another reason (even though the original comment seems to be deleted) - you installed a module via <code>cpan</code>, then found out it&#39;s available in the distribution packages.<br><h4> FearlessHyena, Id: 86106492 Score: 1: </h4>Use cpanp (cpanplus) as <a href="https://stackoverflow.com/questions/7777252/uninstall-all-perl-modules-installed-by-cpan">mentioned here</a><br><h4> jrockway, Id: 2642813 Score: 1: </h4>To manage packages, use a package manager -- which CPAN is not.<br><h4> Bodo Hugo Barwich, Id: 136700908 Score: 0: </h4>You might want to remove a package because it was installed in a different directory than in a distribution package and that does not let up update or replace it. Thanks to @FearlessHyena for the tip with <code>cpanp</code>. it saved my day!<br>------------------------------------------------------------------ <br><h3> Aedla, Id: 29468484, Score: 76: </h3><ol>
<li>Install <a href="http://www.metacpan.org/pod/App::cpanminus" rel="noreferrer"><code>App::cpanminus</code></a> from CPAN (use: <code>cpan App::cpanminus</code> for this).</li>
<li>Type <code>cpanm --uninstall Module::Name</code> (note the "<code>m</code>") to uninstall the module with cpanminus.</li>
</ol>

<p>This should work.</p>
<h4> Pablo Bianchi, Comment 86381602 Score: 4: </h4>Using Perl v5.22.1 I did <code>sudo cpan install &quot;DateTime::Format::Builder&quot;</code>, everything OK, then <code>cpanm --uninstall &quot;DateTime::Format::Builder&quot;</code> and I get <i>is not found in the following directories and can&#39;t be uninstalled</i>. Those are: <code>&#47;usr&#47;local&#47;lib&#47;x86_64-linux-gnu&#47;perl&#47;5.22.1</code> and <code>&#47;usr&#47;local&#47;share&#47;perl&#47;5.22.1</code>. I installed <code>cpanm</code> with <code>sudo apt install cpanminus</code> (v1.7040). Any Idea?<br><h4> tonix, Comment 52963201 Score: 0: </h4>It seems that installing the <code>App::cpanminus</code> module with <code>cpan App::cpanminus</code> doesn&#39;t install any <code>cpanm</code> tool, if I type <code>cpanm --uninstall Module::Name</code> I get <code>-bash: cpanm: command not found</code> on OS X. Am I missing something<br><h4> reinierpost, Comment 72113615 Score: 0: </h4>@tonix: Check if its location is in your <code>$PATH</code>.<br><h4> tonix, Comment 72145397 Score: 0: </h4>It was an old comment. Do you mean using <code>find . -name &#39;*cpanm&#39; | grep -E &#39;cpanm&#39;</code> ?<br><h4> xeruf, Comment 122343934 Score: 0: </h4>This only uninstalls libs, not binaries from <code>&#47;usr&#47;bin</code> :/<br><h4> Reuben Thomas, Comment 136345865 Score: 0: </h4><code>cpanm</code> worked for me, with one addition: I needed to specify <code>-l ~&#47;.local</code> to point it to my per-user Perl directory. Contrary to the previous comment, it <i>did</i> also uninstall scripts.<br><h4> Armand, Comment 80588603 Score: 0: </h4>on a mac, you do not need to use find.  It is much faster to use spotlight <code>mdfind cpanm</code><br>------------------------------------------------------------------ <br><h3> brian d foy, Id: 2627547, Score: 49: </h3><p>You can't. There isn't a feature in my CPAN client to do such a thing. We were talking about how we might do something like that at this weekend's Perl QA Workshop, but it's generally hard for all the reasons that Ether mentioned.</p>
<h4> jubilatious1, Comment 134173251 Score: 0: </h4>2023: has this situation not changed in the past 13 years? Is there a more recent source for info? Can you add an <b><i>ADDENDUM (2023):</i></b> to this post?<br><h4> brian d foy, Comment 134220991 Score: 0: </h4>Things have not changed. The answer is as good now as it was then.<br><h4> ivan_pozdeev, Comment 52049932 Score: 0: </h4>Python had the same problem with <code>setuptools</code>. It was solved in <code>pip</code> by using (or generating upon installation) package metadata that includes the list of files.<br><h4> brian d foy, Comment 52060077 Score: 0: </h4>Python doesn&#39;t really solve that problem. People have been talking about doing the same thing in Perl, but it won&#39;t work reliably because modules may not make their metadata available.<br>------------------------------------------------------------------ <br><h3> bsb, Id: 11183651, Score: 25: </h3><p>There are scripts on CPAN which attempt to uninstall modules:</p>

<ul>
<li><a href="http://p3rl.org/pm-uninstall" rel="noreferrer">pm-uninstall</a></li>
<li><a href="http://p3rl.org/perlrocks" rel="noreferrer">perlrocks</a></li>
</ul>

<p><a href="http://p3rl.org/ExtUtils::Packlist#EXAMPLE" rel="noreferrer">ExtUtils::Packlist</a> shows sample module removing code, <code>modrm</code>.</p>
<h4> felwithe, Comment 52759884 Score: 2: </h4>I guess the real question is: is there anything wrong with just deleting it from your Perl directory?<br>------------------------------------------------------------------ <br><h3> Ether, Id: 2626551, Score: 32: </h3><p>As a general rule, there is not a specific 'uninstall' mechanism that comes with CPAN modules. But you might try <code>make uninstall</code> in the original directory the module unpacked into (this is often under <code>/root/.cpan</code> or <code>~/.cpan</code>), as some packages do contain this directive in their install script.  (However, since you've installed modules into a local (non-root) library directory, you also have the option of blowing away this entire directory and reinstalling everything else that you want to keep.)</p>

<p>A lot of the time you can simply get away with removing the <code>A/B.pm</code> file (for the <code>A::B</code> module) from your perllib -- that will at least render the module unusable.  Most modules also contain a list of files to be installed (called a "manifest"), so if you can find that, you'll know which files you can delete.</p>

<p>However, none of these approaches will address any modules that were installed as dependencies. There's no good (automated) way of knowing if something else is dependent on that module, so you'll have to uninstall it manually as well once you're sure.</p>

<p>The difficulty in uninstalling modules is one reason why many Perl developers are moving towards using a revision control system to keep track of installations -- e.g. see the <a href="http://www.effectiveperlprogramming.com/2010/02/manage-your-perl-modules-with-git/" rel="noreferrer">article by brian d foy as a supplement to his upcoming book</a> that discusses using git for package management.</p>
<h4> brian d foy, Comment 2640530 Score: 3: </h4>That&#39;s not an excerpt from the book. It&#39;s extra stuff you won&#39;t find in Effective Perl Programming.<br><h4> user181548, Comment 2640741 Score: 1: </h4>&quot;There&#39;s no good (automated) way of knowing if something else is dependent on that module&quot; - why isn&#39;t there a way of knowing?<br><h4> Ether, Comment 2644425 Score: 1: </h4>@brian: ah sorry, I misunderstood the nature of that site then!<br>------------------------------------------------------------------ <br><h3> daxim, Id: 2627896, Score: 19: </h3><p>Update 2013: This code is obsolescent. Upvote <a href="https://stackoverflow.com/a/11183651">bsb's late-coming answer</a> instead.</p>

<hr>

<p>I don't need to uninstall modules often, but the <code>.packlist</code> file based approach has never failed me so far.</p>

<pre><code>use 5.010;
use ExtUtils::Installed qw();
use ExtUtils::Packlist qw();

die "Usage: $0 Module::Name Module::Name\n" unless @ARGV;

for my $mod (@ARGV) {
    my $inst = ExtUtils::Installed-&gt;new;

    foreach my $item (sort($inst-&gt;files($mod))) {
        say "removing $item";
        unlink $item or warn "could not remove $item: $!\n";
    }

    my $packfile = $inst-&gt;packlist($mod)-&gt;packlist_file;
    print "removing $packfile\n";
    unlink $packfile or warn "could not remove $packfile: $!\n";
}
</code></pre>
------------------------------------------------------------------ <br><h3> shivams, Id: 30365462, Score: 2: </h3><p>Since at the time of installing of any module it mainly put corresponding .pm files in respective directories. 
So if you want to remove module only for some testing purpose or temporarily best is to find the path where module is stored using <code>perldoc -l &lt;MODULE&gt;</code> and then simply move the module from there to some other location. 
This approach can also be tried as a more permanent solution but i am not aware of any negative consequences as i do it mainly for testing.</p>
