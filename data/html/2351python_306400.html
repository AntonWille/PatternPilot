 <h2> Title: How can I randomly select (choose) an item from a list (get a random element)? </h2> <h3> Ray, question_id: 306400 </h3>Score: 2351, Tags: {python,list,random} <br><p>How do I retrieve an item at random from the following list?</p>
<pre class="lang-py prettyprint-override"><code>foo = ['a', 'b', 'c', 'd', 'e']
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 306417 Pēteris Caune: </h3><p>Use <a href="https://docs.python.org/library/random.html#random.choice" rel="noreferrer"><code>random.choice()</code></a>:</p>
<pre><code>import random

foo = ['a', 'b', 'c', 'd', 'e']
print(random.choice(foo))
</code></pre>
<p>For <a href="https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator" rel="noreferrer">cryptographically secure</a> random choices (e.g., for generating a passphrase from a wordlist), use <a href="https://docs.python.org/library/secrets.html#secrets.choice" rel="noreferrer"><code>secrets.choice()</code></a>:</p>
<pre><code>import secrets

foo = ['battery', 'correct', 'horse', 'staple']
print(secrets.choice(foo))
</code></pre>
<p><code>secrets</code> is new in Python 3.6. On older versions of Python you can use the <a href="https://docs.python.org/library/random.html#random.SystemRandom" rel="noreferrer"><code>random.SystemRandom</code></a> class:</p>
<pre><code>import random

secure_random = random.SystemRandom()
print(secure_random.choice(foo))
</code></pre>
<h4> Comment 94655560 Graham: </h4>@EduardoPignatelli Each choice is random, so it <i>can</i> return two different results, but depending on the start seed, it&#39;s not guaranteed. If you want to select <i>n</i> distinct random elements from a list <i>lst</i>, use <a href="https://docs.python.org/library/random.html#random.sample" rel="nofollow noreferrer"><code>random.sample(lst, n)</code></a><br><h4> Comment 95705722 XoXo: </h4>on a related note, <code>Standard pseudo-random generators are not suitable for security&#47;cryptographic purposes.</code> <a href="https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b311-random" rel="nofollow noreferrer">ref</a><br><h4> Comment 94205669 Eduardo Pignatelli: </h4>Does making two consecutive calls of <code>random.choice(foo)</code> return two different results?<br>------------------------------------------------------------------ <br><h3> Answer 30488952 Paul: </h3><p>If you want to randomly select more than one item from a list, or select an item from a set, I'd recommend using <code>random.sample</code> instead.</p>
<pre><code>import random
group_of_items = {'a', 'b', 'c', 'd', 'e'}  # a sequence or set will work here.
num_to_select = 2                           # set the number to select here.
list_of_random_items = random.sample(group_of_items, num_to_select)
first_random_item = list_of_random_items[0]
second_random_item = list_of_random_items[1] 
</code></pre>
<p>If you're only pulling a single item from a list though, choice is less clunky, as using sample would have the syntax <code>random.sample(some_list, 1)[0]</code> instead of <code>random.choice(some_list)</code>.</p>
<p>Unfortunately though, choice only works for a single output from sequences (such as lists or tuples).  Though <code>random.choice(tuple(some_set))</code> may be an option for getting a single item from a set.</p>
<p><strong>EDIT: Using Secrets</strong></p>
<p>As many have pointed out, if you require more secure pseudorandom samples, you should use the secrets module:</p>
<pre><code>import secrets                              # imports secure module.
secure_random = secrets.SystemRandom()      # creates a secure random object.
group_of_items = {'a', 'b', 'c', 'd', 'e'}  # a sequence or set will work here.
num_to_select = 2                           # set the number to select here.
list_of_random_items = secure_random.sample(group_of_items, num_to_select)
first_random_item = list_of_random_items[0]
second_random_item = list_of_random_items[1]
</code></pre>
<p><strong>EDIT: Pythonic One-Liner</strong></p>
<p>If you want a more pythonic one-liner for selecting multiple items, you can use unpacking.</p>
<pre><code>import random
first_random_item, second_random_item = random.sample({'a', 'b', 'c', 'd', 'e'}, 2)
</code></pre>
<h4> Comment 104835760 and1er: </h4>BTW <code>secrets</code> module was added to Python standard library in version 3.6 <a href="https://www.python.org/dev/peps/pep-0506/" rel="nofollow noreferrer">python.org/dev/peps/pep-0506</a><br>------------------------------------------------------------------ <br><h3> Answer 12373205 Juan Pablo Rinaldi: </h3><p>If you also need the index, use <a href="https://docs.python.org/3/library/random.html#random.randrange" rel="noreferrer"><code>random.randrange</code></a></p>

<pre><code>from random import randrange
random_index = randrange(len(foo))
print(foo[random_index])
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 40979298 Chris_Rands: </h3><p>As of Python 3.6 you can use the <a href="https://docs.python.org/3.6/library/secrets.html#module-secrets" rel="noreferrer"><code>secrets</code></a> module, which is preferable to the <a href="https://docs.python.org/3.6/library/random.html#module-random" rel="noreferrer"><code>random</code></a> module for cryptography or security uses.</p>

<p>To print a random element from a list:</p>

<pre><code>import secrets
foo = ['a', 'b', 'c', 'd', 'e']
print(secrets.choice(foo))
</code></pre>

<p>To print a random index:</p>

<pre><code>print(secrets.randbelow(len(foo)))
</code></pre>

<p>For details, see <a href="https://www.python.org/dev/peps/pep-0506/" rel="noreferrer">PEP 506</a>.</p>
------------------------------------------------------------------ <br><h3> Answer 16514203 kiriloff: </h3><p>I propose a script for removing randomly picked up items off a list until it is empty:</p>

<p>Maintain a <code>set</code> and remove randomly picked up element (with <code>choice</code>) until list is empty.</p>

<pre><code>s=set(range(1,6))
import random

while len(s)&gt;0:
  s.remove(random.choice(list(s)))
  print(s)
</code></pre>

<p>Three runs give three different answers:</p>

<pre><code>&gt;&gt;&gt; 
set([1, 3, 4, 5])
set([3, 4, 5])
set([3, 4])
set([4])
set([])
&gt;&gt;&gt; 
set([1, 2, 3, 5])
set([2, 3, 5])
set([2, 3])
set([2])
set([])

&gt;&gt;&gt; 
set([1, 2, 3, 5])
set([1, 2, 3])
set([1, 2])
set([1])
set([])
</code></pre>
<h4> Comment 56661574 ShadowRanger: </h4>Or you could just <code>random.shuffle</code> the <code>list</code> once and either iterate it or pop it to produce results. Either would result in a perfectly adequate &quot;select randomly with no repeats&quot; stream, it&#39;s just that the randomness would be introduced at the beginning.<br><h4> Comment 63205934 Joubarc: </h4>Theoretically you can use the <a href="https://docs.python.org/3.4/library/stdtypes.html#set.pop" rel="nofollow noreferrer">pop()</a> method of a set to remove an arbitrary element from a set and return it, but it&#39;s probably not random enough.<br>------------------------------------------------------------------ <br><h3> Answer 69782467 Pratik Thorat: </h3><p>I usually use the <a href="https://docs.python.org/3/library/random.html" rel="noreferrer">random</a> module for working with lists and randomization:</p>
<pre class="lang-py prettyprint-override"><code>import random
foo = ['a', 'b', 'c', 'd', 'e']
print(random.choice(foo))
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 47557650 Fardin Abdi: </h3><pre><code>foo = ['a', 'b', 'c', 'd', 'e']
number_of_samples = 1
</code></pre>
<p>In Python 2:</p>
<pre><code>random_items = random.sample(population=foo, k=number_of_samples)
</code></pre>
<p>In Python 3:</p>
<pre><code>random_items = random.choices(population=foo, k=number_of_samples)
</code></pre>
<h4> Comment 85247972 CentAu: </h4>Note that <code>random.choices</code> is with replacement while <code>random.sample</code> is without replacement.<br><h4> Comment 92719698 Cyril N.: </h4>Also note that random.choices is available from 3.6 and later, not before!<br>------------------------------------------------------------------ <br><h3> Answer 51386126 C8H10N4O2: </h3><p><a href="https://en.wikipedia.org/wiki/NumPy" rel="noreferrer">NumPy</a> solution: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.choice.html" rel="noreferrer"><code>numpy.random.choice</code></a></p>
<p>For this question, it works the same as the accepted answer (<code>import random; random.choice()</code>), but I added it because the programmer may have imported NumPy already (like me)</p>
<p>And also there are <a href="https://stackoverflow.com/q/43664994/2573061">some differences between the two methods</a> that may concern your actual use case.</p>
<pre><code>import numpy as np
np.random.choice(foo) # randomly selects a single item
</code></pre>
<p>For reproducibility, you can do:</p>
<pre><code>np.random.seed(123)
np.random.choice(foo) # first call will always return 'c'
</code></pre>
<p>For samples of <strong>one or more items</strong>, returned as an <code>array</code>, pass the <code>size</code> argument:</p>
<pre><code>np.random.choice(foo, 5)          # sample with replacement (default)
np.random.choice(foo, 5, False)   # sample without replacement
</code></pre>
<h4> Comment 125219594 xuiqzy: </h4>Note that this should not be used for cryptographic purposes, see the <code>secrets</code> module from other answers such as the one from Pēteris Caune! And a working link to documentation for <code>numpy.random.choice</code>: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.choice.html" rel="nofollow noreferrer">numpy.org/doc/stable/reference/random/generated/&hellip;</a><br>------------------------------------------------------------------ <br><h3> Answer 14015085 Janek Olszak: </h3><p>If you need the index, just use:</p>
<pre><code>import random
foo = ['a', 'b', 'c', 'd', 'e']
print int(random.random() * len(foo))
print foo[int(random.random() * len(foo))]
</code></pre>
<p><em>random.choice</em> does the same:)</p>
<h4> Comment 31935450 tc.: </h4>@kevinsa5 Ultimately it&#39;s because a <code>float</code> (an IEEE double) can only take a finite number of values in [0,1). <code>Random.random()</code> generates its output in the traditional way: pick a random integer in <code>[0, 2**53)</code> and divide by <code>2**53</code> (53 is the number of bits in a double). So <code>random()</code> returns 2**53 equiprobable doubles, and you can divide this evenly into N outputs only if N is a power of 2. The bias is small for small N, but see <code>collections.Counter(random.SystemRandom().randrange(3&lt;&lt;51)%6 for i in range(100000)).most_common()</code>. (Java&#39;s Random.nextInt() avoids such bias.)<br><h4> Comment 22751680 wim: </h4>@tc. Actually, it does do essentially the same.  Implementation of <code>random.choice(self, seq)</code> is <code>return seq[int(self.random() * len(seq))]</code>.<br><h4> Comment 22804972 tc.: </h4>@wim That&#39;s a little disappointing, but the <i>very</i> disappointing thing is that&#39;s also the definition of <code>randrange()</code> which means e.g. <code>random.SystemRandom().randrange(3&lt;&lt;51)</code> exhibits significant bias. <i>Sigh...</i><br><h4> Comment 49114146 Evgeni Sergeev: </h4>@tc. I suppose anything less than about <code>2**40</code>, (which is 1099511627776), would be small enough for the bias to not matter in practice? This should really be pointed out in the documentation, because if somebody is not meticulous, they might not expect problems to come from this part of their code.<br><h4> Comment 56661649 ShadowRanger: </h4>@tc.: Actually, <code>random</code> uses <code>getrandbits</code> to get an adequate number of bits to generate a result for larger <code>randrange</code>s (<code>random.choice</code> is also using that). This is true on both 2.7 and 3.5. It only uses <code>self.random() * len(seq)</code> when <code>getrandbits</code> is not available. It&#39;s not doing the stupid thing you think it is.<br>------------------------------------------------------------------ <br><h3> Answer 44730691 Russia Must Remove Putin: </h3><blockquote>
<h2>How to randomly select an item from a list?</h2>
<p>Assume I have the following list:</p>
<pre><code>foo = ['a', 'b', 'c', 'd', 'e']  
</code></pre>
<p>What is the simplest way to retrieve an item at random from this list?</p>
</blockquote>
<p>If you want <em>close</em> to <strong>truly random</strong>, then I suggest <code>secrets.choice</code> from the standard library (New in Python 3.6.):</p>
<pre><code>&gt;&gt;&gt; from secrets import choice         # Python 3 only
&gt;&gt;&gt; choice(list('abcde'))
'c'
</code></pre>
<p>The above is equivalent to my former recommendation, using a <code>SystemRandom</code> object from the <code>random</code> module with the <code>choice</code> method - available earlier in Python 2:</p>
<pre><code>&gt;&gt;&gt; import random                      # Python 2 compatible
&gt;&gt;&gt; sr = random.SystemRandom()
&gt;&gt;&gt; foo = list('abcde')
&gt;&gt;&gt; foo
['a', 'b', 'c', 'd', 'e']
</code></pre>
<p>And now:</p>
<pre><code>&gt;&gt;&gt; sr.choice(foo)
'd'
&gt;&gt;&gt; sr.choice(foo)
'e'
&gt;&gt;&gt; sr.choice(foo)
'a'
&gt;&gt;&gt; sr.choice(foo)
'b'
&gt;&gt;&gt; sr.choice(foo)
'a'
&gt;&gt;&gt; sr.choice(foo)
'c'
&gt;&gt;&gt; sr.choice(foo)
'c'
</code></pre>
<p>If you want a deterministic pseudorandom selection, use the <code>choice</code> function (which is actually a bound method on a <code>Random</code> object):</p>
<pre><code>&gt;&gt;&gt; random.choice
&lt;bound method Random.choice of &lt;random.Random object at 0x800c1034&gt;&gt;
</code></pre>
<p>It seems random, but it's actually not, which we can see if we reseed it repeatedly:</p>
<pre><code>&gt;&gt;&gt; random.seed(42); random.choice(foo), random.choice(foo), random.choice(foo)
('d', 'a', 'b')
&gt;&gt;&gt; random.seed(42); random.choice(foo), random.choice(foo), random.choice(foo)
('d', 'a', 'b')
&gt;&gt;&gt; random.seed(42); random.choice(foo), random.choice(foo), random.choice(foo)
('d', 'a', 'b')
&gt;&gt;&gt; random.seed(42); random.choice(foo), random.choice(foo), random.choice(foo)
('d', 'a', 'b')
&gt;&gt;&gt; random.seed(42); random.choice(foo), random.choice(foo), random.choice(foo)
('d', 'a', 'b')
</code></pre>
<h3>A comment:</h3>
<blockquote>
<p>This is not about whether random.choice is truly random or not. If you fix the seed, you will get the reproducible results -- and that's what seed is designed for. You can pass a seed to SystemRandom, too. <code>sr = random.SystemRandom(42)</code></p>
</blockquote>
<p>Well, yes you can pass it a &quot;seed&quot; argument, but you'll see that the <a href="https://github.com/python/cpython/blob/master/Lib/random.py#L836" rel="noreferrer"><code>SystemRandom</code> object simply ignores it</a>:</p>
<pre><code>def seed(self, *args, **kwds):
    &quot;Stub method.  Not used for a system random number generator.&quot;
    return None
</code></pre>
<h4> Comment 116088126 Paul: </h4>This is just pedantic, but secrets isn&#39;t truly random, it&#39;s cryptographically secure pseudorandom.<br>------------------------------------------------------------------ <br><h3> Answer 52782969 Memin: </h3><h2>In short, use <code>random.sample</code> method</h2>
<p>The <code>sample</code> method returns a new list containing elements from the population while leaving the original population unchanged. The resulting list is in selection order so that all sub-slices will also be valid random samples.</p>
<pre><code>import random
lst = ['a', 'b', 'c', 'd', 'e']
random.seed(0)  # remove this line, if you want different results for each run
rand_lst = random.sample(lst,3)  # 3 is the number of sample you want to retrieve
print(rand_lst)

Output:['d', 'e', 'a']
</code></pre>
<p>here is a running code
<a href="https://onecompiler.com/python/3xem5jjvz" rel="noreferrer">https://onecompiler.com/python/3xem5jjvz</a></p>
<h4> Comment 122924681 spuder: </h4>Not working for me <code>AttributeError: &#39;module&#39; object has no attribute &#39;seed&#39;</code><br><h4> Comment 123019568 Memin: </h4>Here is an online tutorial (with Python3) shows the code with seed works <a href="https://onecompiler.com/python/3xem5jjvz" rel="nofollow noreferrer">onecompiler.com/python/3xem5jjvz</a> .<br>------------------------------------------------------------------ <br><h3> Answer 30441100 Liam: </h3><p>This is the code with a variable that defines the random index:</p>

<pre><code>import random

foo = ['a', 'b', 'c', 'd', 'e']
randomindex = random.randint(0,len(foo)-1) 
print (foo[randomindex])
## print (randomindex)
</code></pre>

<p>This is the code without the variable:</p>

<pre><code>import random

foo = ['a', 'b', 'c', 'd', 'e']
print (foo[random.randint(0,len(foo)-1)])
</code></pre>

<p>And this is the code in the shortest and smartest way to do it:</p>

<pre><code>import random

foo = ['a', 'b', 'c', 'd', 'e']
print(random.choice(foo))
</code></pre>

<p>(python 2.7)</p>
------------------------------------------------------------------ <br><h3> Answer 57682492 Solomon Vimal: </h3><h1>Random item selection:</h1>

<pre><code>import random

my_list = [1, 2, 3, 4, 5]
num_selections = 2

new_list = random.sample(my_list, num_selections)
</code></pre>

<h1>To preserve the order of the list, you could do:</h1>

<pre><code>randIndex = random.sample(range(len(my_list)), n_selections)
randIndex.sort()
new_list = [my_list[i] for i in randIndex]
</code></pre>

<p>Duplicate of <a href="https://stackoverflow.com/a/49682832/4383027">https://stackoverflow.com/a/49682832/4383027</a></p>
------------------------------------------------------------------ <br><h3> Answer 62058049 Evan Schwartzentruber: </h3><p>You could just:</p>

<pre class="lang-py prettyprint-override"><code>from random import randint

foo = ["a", "b", "c", "d", "e"]

print(foo[randint(0,4)])
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 64708525 Jax: </h3><p>This may already be an answer, but you can use <a href="https://docs.python.org/3/library/random.html#random.shuffle" rel="nofollow noreferrer"><code>random.shuffle</code></a>. Example:</p>
<pre><code>import random
foo = ['a', 'b', 'c', 'd', 'e']
random.shuffle(foo)
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 69267260 iacob: </h3><p>The <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.choice.html" rel="nofollow noreferrer">recommended <code>numpy</code> way</a> is now to use an explicit RNG:</p>
<pre class="lang-py prettyprint-override"><code>from numpy.random import default_rng

rng = default_rng()
rng.choice(foo)
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 76990399 cottontail: </h3><p>To select multiple values from a list <code>foo = ['a', 'b', 'c', 'd', 'e']</code>, see the following table for the relevant method in each module.</p>
<div class="s-table-container">
<table class="s-table">
<thead>
<tr>
<th style="text-align: center;"></th>
<th style="text-align: left;">        with replacement</th>
<th style="text-align: left;">            without replacement</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><code>random</code></td>
<td style="text-align: left;"><pre>random.choices(foo, k=4)</pre></td>
<td style="text-align: left;"><pre>random.sample(foo, k=4)</pre></td>
</tr>
<tr>
<td style="text-align: center;"><code>numpy</code></td>
<td style="text-align: left;"><pre>rng = np.random.default_rng()<br>rng.choice(foo, size=4)</pre></td>
<td style="text-align: left;"><pre>rng = np.random.default_rng()<br>rng.choice(foo, size=4, replace=False)</pre></td>
</tr>
<tr>
<td style="text-align: center;"><code>pandas</code></td>
<td style="text-align: left;"><pre>s = pd.Series(foo)<br>s.sample(n=4, replace=True)</pre></td>
<td style="text-align: left;"><pre>s = pd.Series(foo)<br>s.sample(n=4)</pre></td>
</tr>
</tbody>
</table>
</div>
<p>In terms of performance, it depends on the size of the original data and the size of the sampled data but in general, it's better to use <code>random</code> if the data type is a Python data structure such as a list, whereas <code>numpy</code>/<code>pandas</code> perform best on their native objects, e.g. numpy ndarray, pandas Series.</p>
<p>For example, in the following benchmark (tested on Python 3.11.4, numpy 1.25.2 and pandas 2.0.3) where 20k items are sampled from an object of length 100k, numpy and pandas are very fast on an array and a Series but slow on a list, while <code>random.choices</code> is the fastest on a list.</p>
<pre class="lang-py prettyprint-override"><code>import timeit

setup = &quot;&quot;&quot;
import random
import pandas as pd
import numpy as np

li = list(range(100000))
ar = np.array(li)
sr = pd.Series(li)
n = len(li)//5
&quot;&quot;&quot;

min(timeit.repeat(&quot;random.choices(li, k=n)&quot;, setup, number=100))                     # 0.5333051000052365 
min(timeit.repeat(&quot;np.random.default_rng().choice(li, size=n)&quot;, setup, number=100))  # 0.9663617000041995 
min(timeit.repeat(&quot;pd.Series(li).sample(n=n, replace=True)&quot;, setup, number=100))     # 3.30128049999621 

min(timeit.repeat(&quot;random.choices(ar, k=n)&quot;, setup, number=100))                     # 0.5489860999950906 
min(timeit.repeat(&quot;np.random.default_rng().choice(ar, size=n)&quot;, setup, number=100))  # 0.030448100005742162 
min(timeit.repeat(&quot;pd.Series(ar).sample(n=n, replace=True)&quot;, setup, number=100))     # 0.07655550000345102 

min(timeit.repeat(&quot;random.choices(sr, k=n)&quot;, setup, number=100))                     # 6.577740900000208 
min(timeit.repeat(&quot;np.random.default_rng().choice(sr, size=n)&quot;, setup, number=100))  # 0.0323493999967468 
min(timeit.repeat(&quot;sr.sample(n=n, replace=True)&quot;, setup, number=100))                # 0.06925690000207396
</code></pre>
------------------------------------------------------------------ <br><h3> Answer 25133330 Abdul Majeed: </h3><p>We can also do this using randint.</p>

<pre><code>from random import randint
l= ['a','b','c']

def get_rand_element(l):
    if l:
        return l[randint(0,len(l)-1)]
    else:
        return None

get_rand_element(l)
</code></pre>
<h4> Comment 59849257 alexis: </h4>Why on earth would you do it this way, when there&#39;s <code>random.choice()</code> and <code>random.randrange()</code>?<br><h4> Comment 79062276 alexis: </h4>As it should: that&#39;s what exceptions are for. Choosing from an empty list is an error. Returning <code>None</code> just kicks the can to some random later point where the invalid &quot;element&quot; triggers an exception; or worse yet, you get an incorrect program instead of an exception, and you don&#39;t even know it.<br><h4> Comment 121243743 Peter Mortensen: </h4>Can you add a reference to <i>randint</i>, preferably to the official documentation?<br><h4> Comment 79054873 Abdul Majeed: </h4>&quot;random.choice()&quot;  will give you  &quot;IndexError: list index out of range&quot;  on empty list.<br>