 <h2> Title: What is the difference between &lt;%, &lt;%=, &lt;%# and -%&gt; in ERB in Rails? </h2> <h4> simo, question_id: 7996695 </h4>Score: 410, Tags: {ruby-on-rails,ruby,templates,erb} <br><p>Can some one please describe the usage of the following characters which is used in ERB file:</p>

<pre><code>&lt;%   %&gt;
&lt;%=  %&gt;
&lt;%  -%&gt;
&lt;%#  %&gt;
</code></pre>

<p>what's the usage of each one ? </p>
<h4> Brad Werth, Id: 40017847 Score: 0: </h4>@Ciro Santilli: Despite the age, this one seems more complete than your references. I&#39;m voting to close those as dupes of this one..<br><h4> Shiva, Id: 52620870 Score: 0: </h4><code>&lt;%= %&gt;</code> and <code>&lt;%= -%&gt;</code> are different: only the latter removes trailing whitespaces.<br><h4> Ciro Santilli OurBigBook.com, Id: 40012558 Score: 1: </h4>possible duplicate of <a href="http://stackoverflow.com/questions/998979/difference-between-and-in-rails">Difference between -%&gt; and %&gt; in rails</a> for <code>-%&gt;</code>, and <a href="http://stackoverflow.com/questions/3952403/without-equal-in-ruby-erb-means" title="without equal in ruby erb means">stackoverflow.com/questions/3952403/&hellip;</a> for <code>&lt;%=</code>, <a href="http://stackoverflow.com/questions/3901619/how-to-comment-lines-in-rails-html-erb-files" title="how to comment lines in rails html erb files">stackoverflow.com/questions/3901619/&hellip;</a> for <code>&lt;%#</code>.<br><h4> simo, Id: 14158704 Score: 1: </h4>Yes, it is much easier to deal with than ERb<br><h4> Marnen Laibow-Koser, Id: 9786586 Score: 1: </h4>You&#39;ve got some great answers here. Also note that Haml is often a superior alternative to ERb.<br>------------------------------------------------------------------ <br><h3> auralbee, Id: 7996827, Score: 535: </h3><pre><code>&lt;% %&gt;
</code></pre>
<p>Executes the ruby code within the brackets.</p>
<pre><code>&lt;%= %&gt;
</code></pre>
<p>Prints something into erb file.</p>
<pre><code>&lt;%== %&gt;
</code></pre>
<p>Equivalent to <code>&lt;%= raw %&gt;</code>. Prints something verbatim (i.e. w/o escaping) into erb file. (Taken from <a href="https://edgeguides.rubyonrails.org/active_support_core_extensions.html#output-safety" rel="noreferrer">Ruby on Rails Guides</a>.)</p>
<pre><code>&lt;% -%&gt;
</code></pre>
<p>Avoids line break after expression.</p>
<pre><code>&lt;%# %&gt;
</code></pre>
<p>Comments out code within brackets; not sent to client (as opposed to HTML comments).</p>
<p>Visit <a href="http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html" rel="noreferrer">Ruby Doc</a> for more infos about ERB.</p>
<h4> Richard_G, Comment 34435273 Score: 40: </h4>The double equal means that the string is not escaped, as in raw.<br><h4> okliv, Comment 15090510 Score: 18: </h4>i have met somewhere in code this variant else &lt;%== %&gt; does anyone know what is it?<br><h4> Ciro Santilli OurBigBook.com, Comment 40035344 Score: 7: </h4>Rails does not use the stdlib ERB: it uses erubis: <a href="https://github.com/rails/rails/issues/16766#issuecomment-54148778" rel="nofollow noreferrer">github.com/rails/rails/issues/16766#issuecomment-54148778</a><br><h4> Joshua Grosso, Comment 57210397 Score: 6: </h4>@QPaysTaxes sorry about that, you&#39;re right... For example, if you have multiline ERB <code>&lt;%...%&gt;</code>, <code>&lt;%#...%&gt;</code> comments out <i>all</i> of it, which it wouldn&#39;t do if it was just a normal comment (i.e. it would only comment out the line it&#39;s on).<br><h4> Joshua Grosso, Comment 56124339 Score: 4: </h4>But... but... <code>&lt;%#</code> is just a normal <code>&lt;%</code> with a Ruby comment <code>#</code> right after it.... Yeah, it&#39;s fun to think it&#39;s something special, but isn&#39;t it just an ERB idiom rather than a special syntactic construct?<br><h4> anon, Comment 56206074 Score: 1: </h4>@BalinKingOfMoria I&#39;m fairly certain it&#39;s treated specially -- as in, instead of the comment being read and processed, like it would be if it was just a Ruby comment, it&#39;s skipped entirely. The effect is the same, though.<br><h4> bkunzi01, Comment 62930196 Score: 0: </h4>DONT FORGET &#39;&lt;%%&#39;   If anyone has used Chart.js in an erb template they&#39;ve needed to do this for tooltips lol the &lt;%% basically means dont interpret the &#39;&lt;%&#39; .<br><h4> Jochem Schulenklopper, Comment 93224322 Score: 0: </h4>Nowadays, Rails uses Erubi, a simplified fork of Erubis. <a href="https://rubygems.org/gems/erubi" rel="nofollow noreferrer">rubygems.org/gems/erubi</a><br>------------------------------------------------------------------ <br><h3> yalestar, Id: 7996834, Score: 94: </h3><p><code>&lt;% %&gt;</code> and <code>&lt;%- and -%&gt;</code> are for any Ruby code, but doesn't output the results (e.g. if statements). the two are the same.</p>

<p><code>&lt;%= %&gt;</code> is for outputting the results of Ruby code</p>

<p><code>&lt;%# %&gt;</code> is an ERB comment</p>

<p>Here's a good guide:
<a href="http://api.rubyonrails.org/classes/ActionView/Base.html">http://api.rubyonrails.org/classes/ActionView/Base.html</a></p>
<h4> Bogdan Gusiev, Comment 40936650 Score: 6: </h4>How to suppress leading whitespace for &lt;%= %&gt; ?<br><h4> Andrew Vit, Comment 22469824 Score: 1: </h4>I don&#39;t see that opening <code>&lt;%-</code> does anything for leading whitespace, and I don&#39;t see it documented anywhere. Are you sure about that? Maybe it&#39;s a different flavour of ERB. There&#39;s no option shown for it on the stdlib docs.<br><h4> Earl Jenkins, Comment 29677558 Score: 1: </h4>@AndrewVit - From the page referenced in this answer (ActionView::Base docs page):  &quot;&lt;%- and -%&gt; suppress leading and trailing whitespace, including the trailing newline, and can be used interchangeably with &lt;% and %&gt;.&quot;<br>------------------------------------------------------------------ <br><h3> Ciro Santilli OurBigBook.com, Id: 25626629, Score: 69: </h3><p>Rails does <strong>not</strong> use the <a href="http://ruby-doc.org/stdlib-2.1.1/libdoc/erb/rdoc/ERB.html" rel="noreferrer">stdlib's ERB</a> by default, it uses <a href="http://www.kuwata-lab.com/erubis/" rel="noreferrer">erubis</a>. Sources: <a href="https://github.com/rails/rails/issues/16766#issuecomment-54148778" rel="noreferrer">this dev's comment</a>, <a href="https://github.com/rails/rails/blob/master/actionview/actionview.gemspec#L25" rel="noreferrer">ActionView's gemspec</a>, <a href="https://github.com/rails/rails/pull/16774" rel="noreferrer">accepted merge request I did while writing this</a>.</p>

<p>There <em>are</em> behavior differences between them, in particular on how the hyphen operators <code>%-</code> and <code>-%</code> work.</p>

<p>Documentation is scarce, <a href="https://stackoverflow.com/questions/20910212/where-is-rubys-erb-format-officially-defined">Where is Ruby&#39;s ERB format &quot;officially&quot; defined?</a> so what follows are empirical conclusions.</p>

<p>All tests suppose:</p>

<pre><code>require 'erb'
require 'erubis'
</code></pre>

<p><strong>When you can use <code>-</code></strong></p>

<ul>
<li>ERB: you must pass <code>-</code> to <code>trim_mode</code> option of <code>ERB.new</code> to use it.</li>
<li>erubis: enabled by default.</li>
</ul>

<p>Examples:</p>

<pre><code>begin ERB.new("&lt;%= 'a' -%&gt;\nb").result; rescue SyntaxError ; else raise; end
ERB.new("&lt;%= 'a' -%&gt;\nb"  , nil, '-') .result == 'ab'  or raise
Erubis::Eruby.new("&lt;%= 'a' -%&gt;  \n b").result == 'a b' or raise
</code></pre>

<p><strong>What <code>-%</code> does:</strong></p>

<ul>
<li><p>ERB: remove the next character if it is a newline.</p></li>
<li><p>erubis:</p>

<ul>
<li><p>in <code>&lt;% %&gt;</code> (without <code>=</code>), <code>-</code> is useless because <code>&lt;% %&gt;</code> and <code>&lt;% -%&gt;</code> are the same. <code>&lt;% %&gt;</code> removes the current line if it only contains whitespaces, and does nothing otherwise.</p></li>
<li><p>in <code>&lt;%= -%&gt;</code> (with <code>=</code>):</p>

<ul>
<li>remove the entire line if it only contains whitespaces</li>
<li>else, if there is a non-space before the tag, and only whitesapces after, remove the whitespces that come after</li>
<li>else, there is a non-space after the tag: do nothing</li>
</ul></li>
</ul></li>
</ul>

<p>Examples:</p>

<pre><code># Remove
ERB.new("a \nb &lt;% 0 -%&gt;\n c", nil, '-').result == "a \nb  c" or raise

# Don't do anything: not followed by newline, but by space:
ERB.new("a\n&lt;% 0 -%&gt; \nc", nil, '-').result == "a\nb \nc" or raise

# Remove the current line because only whitesapaces:
Erubis::Eruby.new(" &lt;% 0 %&gt; \nb").result == 'b' or raise

# Same as above, thus useless because longer.
Erubis::Eruby.new(" &lt;% 0 -%&gt; \nb").result == 'b' or raise

# Don't do anything because line not empty.
Erubis::Eruby.new("a &lt;% 0 %&gt; \nb").result == "a  \nb" or raise
Erubis::Eruby.new(" &lt;% 0 %&gt; a\nb").result == "  a\nb" or raise
Erubis::Eruby.new(" &lt;% 0 -%&gt; a\nb").result == "  a\nb" or raise

# Don't remove the current line because of `=`:
Erubis::Eruby.new(" &lt;%= 0 %&gt; \nb").result == " 0 \nb" or raise

# Remove the current line even with `=`:
Erubis::Eruby.new(" &lt;%= 0 -%&gt; \nb").result == " 0b"   or raise

# Remove forward only because of `-` and non space before:
Erubis::Eruby.new("a &lt;%= 0 -%&gt; \nb").result == "a 0b"   or raise

# Don't do anything because non-whitespace forward:
Erubis::Eruby.new(" &lt;%= 0 -%&gt; a\nb").result == " 0 a\nb"   or raise
</code></pre>

<p><strong>What <code>%-</code> does:</strong></p>

<ul>
<li><p>ERB: remove whitespaces before tag and after previous newlines, but only if there are only whitespaces before.</p></li>
<li><p>erubis: useless because <code>&lt;%- %&gt;</code> is the same as <code>&lt;% %&gt;</code> (without <code>=</code>), and this cannot be used with <code>=</code> which is the only case where <code>-%</code> can be useful. So never use this.</p></li>
</ul>

<p>Examples:</p>

<pre><code># Remove
ERB.new("a \n  &lt;%- 0 %&gt; b\n c", nil, '-').result == "a \n b\n c" or raise

# b is not whitespace: do nothing:
ERB.new("a \nb  &lt;%- 0 %&gt; c\n d", nil, '-').result == "a \nb   c\n d" or raise
</code></pre>

<p><strong>What <code>%-</code> and <code>-%</code> do together</strong></p>

<p>The exact combination of both effects separately. </p>
<h4> Daniel Jonsson, Comment 42273349 Score: 1: </h4>On the second line you have written that Rails uses eruby while linking to erubis.<br><h4> Ciro Santilli OurBigBook.com, Comment 42278457 Score: 1: </h4>@DanielJonsson thanks for the report: it was meant to be erubis. Going nuts with so many versions. Updated.<br>------------------------------------------------------------------ <br><h3> user8739984, Id: 51978363, Score: 11: </h3><ul>
<li><code>&lt;% %&gt;</code> : Executes the ruby code  </li>
<li><code>&lt;%= %&gt;</code> : Prints into Erb file. Or browser  </li>
<li><code>&lt;% -%&gt;</code> : Avoids line break after expression.  </li>
<li><code>&lt;%# %&gt;</code> : ERB comment</li>
</ul>
------------------------------------------------------------------ <br><h3> bkunzi01, Id: 37729560, Score: 8: </h3><p>I've added the <code>&lt;%%</code> literal tag delimiter as an answer to this because of its obscurity.  This will tell erb not to interpret the <code>&lt;%</code> part of the tag which is necessary for js apps like displaying chart.js tooltips etc.</p>

<p><strong>Update (Fixed broken link)</strong> </p>

<p>Everything about ERB can now be found here:
<a href="https://puppet.com/docs/puppet/5.3/lang_template_erb.html#tags" rel="nofollow noreferrer">https://puppet.com/docs/puppet/5.3/lang_template_erb.html#tags</a></p>
<h4> Ben Tinsley, Comment 81622894 Score: 1: </h4>this link answers the OP accurately<br><h4> andreofthecape, Comment 98458386 Score: 0: </h4>Link is now broken<br><h4> bkunzi01, Comment 98463815 Score: 0: </h4>Updated with the new link!<br>------------------------------------------------------------------ <br><h3> HeadAndTail, Id: 47249972, Score: 3: </h3><p><strong>These are use in ruby on rails</strong>   :-</p>

<p><strong>&lt;%   %> :-</strong></p>

<p>The &lt;% %> tags are used to execute Ruby code that does not return anything, such as conditions, loops or blocks. Eg :-</p>

<pre><code>&lt;h1&gt;Names of all the people&lt;/h1&gt;
&lt;% @people.each do |person| %&gt;
  Name: &lt;%= person.name %&gt;&lt;br&gt;
&lt;% end %&gt;
</code></pre>

<p><strong>&lt;%= %> :-</strong></p>

<p>use to display the content .</p>

<pre><code>Name: &lt;%= person.name %&gt;&lt;br&gt;
</code></pre>

<p><strong>&lt;%  -%>:-</strong></p>

<p>Rails extends ERB, so that you can suppress the newline simply by adding a trailing hyphen to tags in Rails templates</p>

<p><strong>&lt;%# %>:-</strong></p>

<p>comment out the code</p>

<pre><code>&lt;%# WRONG %&gt;
Hi, Mr. &lt;% puts "Frodo" %&gt;
</code></pre>
------------------------------------------------------------------ <br><h3> Aastha Kesarwani, Id: 50347783, Score: 1: </h3><p><code>&lt;%   %&gt;</code> executes the code in there but does not print the result, for eg:<br>
We can use it for if else in an erb file.  </p>

<pre><code>&lt;% temp = 1 %&gt;
&lt;% if temp == 1%&gt;
  temp is 1
&lt;% else %&gt;
  temp is not 1
&lt;%end%&gt;  
</code></pre>

<p>Will print <code>temp is 1</code></p>

<hr>

<p><code>&lt;%=  %&gt;</code> executes the code and also prints the output, for eg:<br>
We can print the value of a rails variable.</p>

<pre><code>&lt;% temp = 1 %&gt;
&lt;%= temp %&gt;  
</code></pre>

<p>Will print <code>1</code></p>

<hr>

<p><code>&lt;%  -%&gt;</code> It makes no difference as it does not print anything, <code>-%&gt;</code> only makes sense with <code>&lt;%= -%&gt;</code>, this will avoid a new line.</p>

<hr>

<p><code>&lt;%#  %&gt;</code> will comment out the code written within this.</p>
