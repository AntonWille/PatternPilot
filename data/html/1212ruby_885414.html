 <h2> Title: How to understand nil vs. empty vs. blank in Ruby </h2> <h4> Arrel, question_id: 885414, created_at: 2009-05-19 22:51:36+00:00 </h4>Score: 1212, Tags: {ruby-on-rails,ruby} <br><p>I find myself repeatedly looking for a clear definition of the differences of <code>nil?</code>, <code>blank?</code>, and <code>empty?</code> in Ruby on Rails.  Here's the closest I've come:</p>

<ul>
<li><p><code>blank?</code> objects are false, empty, or a whitespace string. For example, <code>""</code>, <code>" "</code>, <code>nil</code>, <code>[]</code>, and <code>{}</code> are blank.</p></li>
<li><p><code>nil?</code> objects are instances of NilClass.</p></li>
<li><p><code>empty?</code> objects are class-specific, and the definition varies from class to class. A string is empty if it has no characters, and an array is empty if it contains no items.</p></li>
</ul>

<p>Is there anything missing, or a tighter comparison that can be made?</p>
<h4> Comment by Kris, Score: 31, Id: 13276029, created_at: 2012-04-25 10:41:22+00:00 </h4>One gotcha is an empty array returns false for <code>present?</code>. Which is because <code>blank?</code> returns true for an empty array.<h4> Comment by rewritten, Score: 4, Id: 59939509, created_at: 2016-03-22 10:00:10+00:00 </h4>One nice thing is to see that <code>:nil?</code> is defined on <code>::Kernel</code> and overridden on <code>::NilClass</code>, while <code>:empty?</code> is implemented separately on many classes (natively on <code>::String</code>, <code>::Array</code>, <code>::Hash</code>, and non-natively on other classes like <code>::Set</code> from stdlib and <code>::ActiveRecord::Relation</code> from rails). So <code>:nil?</code> is available in all subclasses of <code>::Object</code> and also in every class that includes <code>::Kernel</code> by itself, where <code>:empty?</code> must be implemented or included specifically in your classes.<h4> Comment by totymedli, Score: 0, Id: 88690731, created_at: 2018-06-13 18:07:24+00:00 </h4>If you try to understand the whole <code>nil</code> concept <a href="https://lukaszwrobel.pl/blog/ruby-is-nil/" rel="nofollow noreferrer">start here</a>.<h4> Comment by Michael, Score: 0, Id: 97348431, created_at: 2019-03-23 03:46:15+00:00 </h4><code>[1] pry(main)&gt; [].blank? =&gt; true</code><hr><h3> ✔️ Answer by Corban Brook, Id: 888877, Score: 1493, created_at: 2009-05-20 16:14:58+00:00 </h3><p><code>.nil?</code> can be used on any object and is true if the object is nil.</p>

<p><code>.empty?</code> can be used on strings, arrays and hashes and returns true if:</p>

<ul>
<li>String length == 0</li>
<li>Array length == 0</li>
<li>Hash length == 0</li>
</ul>

<p>Running <code>.empty?</code> on something that is nil will throw a <code>NoMethodError</code>.</p>

<p>That is where <code>.blank?</code> comes in. It is <a href="http://apidock.com/rails/Object/blank%3F" rel="noreferrer">implemented by Rails</a> and will operate on any object as well as work like <code>.empty?</code> on strings, arrays and hashes.</p>

<pre><code>nil.blank? == true
false.blank? == true
[].blank? == true
{}.blank? == true
"".blank? == true
5.blank? == false
0.blank? == false
</code></pre>

<p><code>.blank?</code> also evaluates true on strings which are non-empty but contain only whitespace:</p>

<pre><code>"  ".blank? == true
"  ".empty? == false
</code></pre>

<p><a href="http://apidock.com/rails/Object/presence" rel="noreferrer">Rails also provides</a> <code>.present?</code>, which returns the negation of <code>.blank?</code>.</p>

<p>Array gotcha: <code>blank?</code> will return <code>false</code> even if all <em>elements</em> of an array are blank. To determine blankness in this case, use <code>all?</code> with <code>blank?</code>, for example:</p>

<pre><code>[ nil, '' ].blank? == false
[ nil, '' ].all? &amp;:blank? == true 
</code></pre>
<h4> Comment by Shannon, Score: 7, Id: 18034397, created_at: 2012-11-05 18:02:42+00:00 </h4>Also: <code>false.blank? == true</code><h4> Comment by Andrew Grimm, Score: 28, Id: 697800, created_at: 2009-05-20 23:20:55+00:00 </h4>As mentioned in the question, some non-empty strings count as blank.<h4> Comment by Houen, Score: 2, Id: 38948112, created_at: 2014-07-30 15:54:08+00:00 </h4>As an addition to the all-blank-array gotcha that Tom is mentioning in his answer, be aware that this can lead to security issues where an attacker can use unprepared code that simply checks for unless params.nil? or unless params.blank?, and is the cause of much discussion and work currently in Rails. See here for more information: <a href="https://github.com/rails/rails/issues/13420" rel="nofollow noreferrer">github.com/rails/rails/issues/13420</a><h4> Comment by tillda, Score: 1, Id: 5812844, created_at: 2011-03-02 23:01:14+00:00 </h4>Why haven&#39;t they overwritter nil&#39;s .empty? if they could add .blank?<h4> Comment by TrinitronX, Score: 1, Id: 22662466, created_at: 2013-04-09 20:23:08+00:00 </h4>I&#39;ve seen <code>blank?</code> erroneously used in non-rails contexts before.  If you <b>really</b> need it you can <a href="http://stackoverflow.com/a/4239625/645491">include it</a>: <code>require &#39;active_support&#47;core_ext&#47;object&#47;blank&#39;</code><h4> Comment by Brett, Score: 0, Id: 92308598, created_at: 2018-10-07 17:02:32+00:00 </h4>I&#39;ve used <code>x.to_s.empty?</code>  on a number of occasions where I want to do the same thing whether a variable is nil or a string / array that is empty. <code>nil.to_s == &quot;&quot;</code><h4> Comment by vishless, Score: 0, Id: 104633381, created_at: 2019-12-06 06:41:37+00:00 </h4><code>[ nil, &#39;&#39; ].all? &amp;:blank? == true</code> returns <code>TypeError (wrong argument type FalseClass (expected Proc))</code> for ruby ruby 2.5.0p0<h4> Comment by jcpennypincher, Score: 0, Id: 55354154, created_at: 2015-11-19 01:25:27+00:00 </h4>I am using something like this to avoid crashes on nil objects if (myString.to_s.strip.length != 0)     # do something end<h4> Comment by Factor Mystic, Score: 0, Id: 21435010, created_at: 2013-03-04 19:21:24+00:00 </h4>is <code>nil.blank?</code> something added by Rails? In <code>1.9.3p194</code> I get <code>NoMethodError: undefined method &#39;blank?&#39; for nil:NilClass</code> in irb.  E: Yep, here it is: <a href="http://api.rubyonrails.org/classes/Object.html#method-i-blank-3F" rel="nofollow noreferrer">api.rubyonrails.org/classes/Object.html#method-i-blank-3F</a><h4> Comment by 2called-chaos, Score: 0, Id: 34383473, created_at: 2014-03-23 00:33:03+00:00 </h4>When talking about <code>present?</code> don&#39;t forget to mention <code>presence</code>. <a href="http://blog.bmonkeys.net/2014/overview-about-nil-blank-present-presence-try-and-other-basic-things" rel="nofollow noreferrer">blog.bmonkeys.net/2014/&hellip;</a><hr><h3>  Answer by Julian Popov, Id: 20663389, Score: 712, created_at: 2013-12-18 16:29:23+00:00 </h3><p>I made this useful table with all the cases:</p>

<p><img src="https://i.stack.imgur.com/oXuhJ.png" alt="enter image description here"></p>

<p><code>blank?</code>, <code>present?</code> are provided by Rails.</p>
<h4> Comment by Lonny Eachus, Score: 58, Id: 33204621, created_at: 2014-02-20 23:27:55+00:00 </h4>It should be noted that blank? and present? are Rails-only. They return Exception: NoMethodError in Ruby 2.0.0.<h4> Comment by Dennis, Score: 17, Id: 40153543, created_at: 2014-09-05 17:07:14+00:00 </h4>Consider adding <code>any?</code> if you ever update the table.<h4> Comment by the Tin Man, Score: 0, Id: 106028618, created_at: 2020-01-28 18:16:52+00:00 </h4><code>blank?</code> and <code>present?</code> are not &quot;<i>Rails-only</i>&quot;, they&#39;re automatically included by Rails but can easily be included in non-Rails code by using ActiveSupport&#39;s Core extensions. See <a href="https://stackoverflow.com/questions/4238867/how-do-i-use-active-support-core-extensions?noredirect=1&amp;lq=1" title="how do i use active support core extensions">stackoverflow.com/questions/4238867/&hellip;</a><hr><h3>  Answer by Alexander Malfait, Id: 3236703, Score: 66, created_at: 2010-07-13 11:33:23+00:00 </h3><p>Quick tip: <code>!obj.blank? == obj.present?</code></p>

<p>Can be handy/easier on the eyes in some expressions</p>
<h4> Comment by Ajedi32, Score: 4, Id: 34348039, created_at: 2014-03-21 18:02:50+00:00 </h4>@MohamedHafez No it&#39;s not. <code>!!false</code><h4> Comment by Mohamed Hafez, Score: 2, Id: 30396399, created_at: 2013-12-03 20:34:16+00:00 </h4>@Kirk: !!obj is equivalent to !obj.nil?<h4> Comment by Kirk, Score: 0, Id: 16855585, created_at: 2012-09-20 21:27:17+00:00 </h4>is there something equivalent to !obj.nil?<h4> Comment by Factor Mystic, Score: 0, Id: 21013756, created_at: 2013-02-19 20:56:19+00:00 </h4><code>present?</code> is part of active_support, check here on what to include to get it: <a href="http://stackoverflow.com/a/4648704/1569">stackoverflow.com/a/4648704/1569</a><h4> Comment by Mohamed Hafez, Score: 0, Id: 34356199, created_at: 2014-03-21 22:14:23+00:00 </h4>Agh, @Ajedi32 good catch! equivalent with that one exception.<h4> Comment by k00ka, Score: 0, Id: 85609180, created_at: 2018-03-15 15:38:11+00:00 </h4>To built on this answer...Corollary: <code>if obj.present?</code> and <code>unless obj.blank?</code> are the same. Hint: An excellent <i>guard clause</i> is <code>return unless obj.present?</code>.<hr><h3>  Answer by Sibevin Wang, Id: 26877095, Score: 230, created_at: 2014-11-12 00:20:51+00:00 </h3><p>Just extend Julian's table:</p>

<p><a href="https://i.stack.imgur.com/qbe46.png"><img src="https://i.stack.imgur.com/qbe46.png" alt="enter image description here"></a></p>

<p>Ref: <a href="http://sibevin.github.io/posts/2014-11-11-103928-rails-empty-vs-blank-vs-nil">empty?blank?nil?傻傻分不清楚</a></p>
<h4> Comment by daniero, Score: 2, Id: 65965896, created_at: 2016-09-04 12:30:41+00:00 </h4><code>Enumerable#any?</code> is vanilla Ruby, it shouldn&#39;t be listed under &quot;rails only&quot;<h4> Comment by Lahiru Jayaratne, Score: 1, Id: 64392374, created_at: 2016-07-21 06:06:41+00:00 </h4>@Sibevin Wang, I have downloaded this table and used it in some of my answers adding the credits to you. Hope you won&#39;t mind :) Kudos to this great effort!<h4> Comment by Sibevin Wang, Score: 1, Id: 65967507, created_at: 2016-09-04 14:06:42+00:00 </h4>@daniero Thanks for your reminder, the table is updated.<h4> Comment by DaveMongoose, Score: 1, Id: 70298959, created_at: 2017-01-09 11:36:56+00:00 </h4>Numeric types also have <code>.zero?</code> and <code>.nonzero?</code><hr><h3>  Answer by steve, Id: 48268628, Score: 59, created_at: 2018-01-15 18:17:51+00:00 </h3><p><a href="https://i.stack.imgur.com/BdN1t.png" rel="noreferrer"><img src="https://i.stack.imgur.com/BdN1t.png" alt="enter image description here"></a></p>

<ul>
<li>Everything that is <code>nil?</code> is <code>blank?</code></li>
<li>Everything that is <code>empty?</code> is <code>blank?</code></li>
<li>Nothing that is <code>empty?</code> is <code>nil?</code></li>
<li>Nothing that is <code>nil?</code> is <code>empty?</code></li>
</ul>

<p>tl;dr -- only use <code>blank?</code> &amp; <code>present?</code> unless you want to distinguish between <code>""</code> and <code>"  "</code></p>
<hr><h3>  Answer by Andrew Grimm, Id: 885583, Score: 57, created_at: 2009-05-19 23:42:49+00:00 </h3><p>One difference is that <code>.nil?</code> and <code>.empty?</code> are methods that are provided by the programming language Ruby, whereas <code>.blank?</code> is something <a href="http://www.ruby-forum.com/topic/160638#706469" rel="noreferrer">added</a> by the web development framework Rails. </p>
<hr><h3>  Answer by Alan H, Id: 13380172, Score: 18, created_at: 2012-11-14 13:56:02+00:00 </h3><p>A special case is when trying to assess if a boolean value is nil:</p>

<pre><code>false.present? == false
false.blank? == true
false.nil? == false
</code></pre>

<p>In this case the recommendation would be to use <code>.nil?</code></p>
<hr><h3>  Answer by davemyron, Id: 1121550, Score: 16, created_at: 2009-07-13 19:25:16+00:00 </h3><p>Just a little note about the <code>any?</code> recommendation: He's right that it's <em>generally</em> equivalent to <code>!empty?</code>. However, <code>any?</code> will return <code>true</code> to a string of just whitespace (ala <code>" "</code>).</p>

<p>And of course, see the 1.9 comment above, too.</p>
<h4> Comment by Lonny Eachus, Score: 0, Id: 33204374, created_at: 2014-02-20 23:17:33+00:00 </h4>In Rails, any string containing just whitespace characters is &quot;blank&quot;:      &quot; \n\r\t&quot;.blank?  #=&gt; true<hr><h3>  Answer by Andy, Id: 885603, Score: 15, created_at: 2009-05-19 23:51:50+00:00 </h3><p>Don't forget <code>any?</code> which is generally <code>!empty?</code>. In Rails I typically check for the presence of something at the end of a statement with <code>if something</code> or <code>unless something</code> then use <code>blank?</code> where needed since it seems to work everywhere.  </p>
<h4> Comment by Andrew Grimm, Score: 4, Id: 692646, created_at: 2009-05-20 00:59:54+00:00 </h4>.any? doesn&#39;t work with strings in ruby 1.9, as .any? requires enumerable, and string#each by itself doesn&#39;t work in ruby 1.9.<h4> Comment by Kelvin, Score: 4, Id: 23378613, created_at: 2013-05-01 19:30:08+00:00 </h4>Careful about <code>any?</code> for checking non-emptiness. It returns false if you have an array of falsy values. A way to get around that is to pass a always-true block: <code>[nil, false].any?{ true }</code>, but <code>!empty?</code> is shorter and you don&#39;t have remember the weird behavior.<hr><h3>  Answer by mahatmanich, Id: 32097524, Score: 6, created_at: 2015-08-19 13:52:27+00:00 </h3><p>Rails 4</p>

<p>an alternative to @corban-brook 's <em>'Array gotcha: blank?'</em> for checking if an arrays only holds empty values and can be regarded as blank? true:</p>

<pre><code>[ nil, '' ].all? &amp;:blank? == true
</code></pre>

<p>one could also do:</p>

<pre><code>[nil, '', "", " ",' '].reject(&amp;:blank?).blank? == true
</code></pre>
<hr><h3>  Answer by neha, Id: 27597103, Score: 14, created_at: 2014-12-22 05:41:54+00:00 </h3><p><code>nil?</code> is a standard Ruby method that can be called on all objects and returns <code>true</code> if the object is <code>nil</code>:</p>

<pre><code>b = nil
b.nil? # =&gt; true
</code></pre>

<p><code>empty?</code> is a standard Ruby method that can be called on some objects such as Strings, Arrays and Hashes and returns <code>true</code> if these objects contain no element:</p>

<pre><code>a = []
a.empty? # =&gt; true

b = ["2","4"]
b.empty? # =&gt; false
</code></pre>

<p><code>empty?</code> cannot be called on <code>nil</code> objects.</p>

<p><code>blank?</code> is a Rails method that can be called on <code>nil</code> objects as well as empty objects.</p>
<hr><h3>  Answer by Manish Shrivastava, Id: 30343553, Score: 9, created_at: 2015-05-20 07:55:54+00:00 </h3><p>Everybody else has explained well what is the difference. </p>

<p>I would like to add in Ruby On Rails, it is better to use <code>obj.blank?</code> or <code>obj.present?</code> instead of <code>obj.nil?</code> or <code>obj.empty?</code>.</p>

<p><code>obj.blank?</code> handles all types <code>nil</code>, <code>''</code>, <code>[]</code>, <code>{}</code>,  and returns <code>true</code> if values are not available and returns <code>false</code> if values are  available on any type of object.</p>
<hr><h3>  Answer by shahjapan, Id: 66600720, Score: 8, created_at: 2021-03-12 13:22:07+00:00 </h3><p>Though there n-number of answers available to this question but I liked the way its being explained here so posted one more answer :-)</p>
<p><strong>Look at the data metric below</strong> - Its self explanatory with the various data-types used across available methods for it.</p>
<div class="s-table-container">
<table class="s-table">
<thead>
<tr>
<th></th>
<th>#nil?</th>
<th>#empty?</th>
<th>#blank?</th>
<th>#present?</th>
</tr>
</thead>
<tbody>
<tr>
<td>5</td>
<td>false</td>
<td>NoMethodError</td>
<td>false</td>
<td>true</td>
</tr>
<tr>
<td>&quot;&quot;</td>
<td>false</td>
<td>true</td>
<td>true</td>
<td>false</td>
</tr>
<tr>
<td>&quot; &quot;</td>
<td>false</td>
<td>false</td>
<td>true</td>
<td>false</td>
</tr>
<tr>
<td>&quot;\t\n&quot;</td>
<td>false</td>
<td>false</td>
<td>true</td>
<td>false</td>
</tr>
<tr>
<td>[]</td>
<td>false</td>
<td>true</td>
<td>true</td>
<td>false</td>
</tr>
<tr>
<td>[&quot;a&quot;]</td>
<td>false</td>
<td>false</td>
<td>false</td>
<td>true</td>
</tr>
<tr>
<td>{}</td>
<td>false</td>
<td>true</td>
<td>true</td>
<td>false</td>
</tr>
<tr>
<td>{a: &quot;b&quot;}</td>
<td>false</td>
<td>false</td>
<td>false</td>
<td>true</td>
</tr>
<tr>
<td>Set.new</td>
<td>false</td>
<td>true</td>
<td>true</td>
<td>false</td>
</tr>
<tr>
<td>nil</td>
<td>true</td>
<td>NoMethodError</td>
<td>true</td>
<td>false</td>
</tr>
<tr>
<td>true</td>
<td>false</td>
<td>NoMethodError</td>
<td>false</td>
<td>true</td>
</tr>
<tr>
<td>false</td>
<td>false</td>
<td>NoMethodError</td>
<td>true</td>
<td>false</td>
</tr>
</tbody>
</table>
</div>
<p>Reference: <a href="https://blog.appsignal.com/2018/09/11/differences-between-nil-empty-blank-and-present.html" rel="nofollow noreferrer">https://blog.appsignal.com/2018/09/11/differences-between-nil-empty-blank-and-present.html</a></p>
<hr><h3>  Answer by kelvin, Id: 35455359, Score: 7, created_at: 2016-02-17 11:25:21+00:00 </h3><p><code>exists?</code> method can be used to check whether the data exists in the database or not. It returns boolean values either <code>true</code> or <code>false</code>. </p>
<h4> Comment by Roger, Score: 0, Id: 69346307, created_at: 2016-12-09 22:00:39+00:00 </h4>Works only on model class!<hr><h3>  Answer by Chitra, Id: 32585672, Score: 5, created_at: 2015-09-15 12:06:44+00:00 </h3><p><code>nil?</code> can be used on any object. It determines if the object has any value or not, including 'blank' values.</p>

<p>For example:</p>

<pre><code>example = nil
example.nil?  # true

"".nil?  # false
</code></pre>

<p>Basically <code>nil?</code> will only ever return true if the object is in fact equal to 'nil'.</p>

<p><code>empty?</code> is only called on objects that are considered a collection. This includes things like strings (a collection of characters), hashes (a collection of key/value pairs) and arrays (a collection of arbitrary objects). <code>empty?</code> returns true is there are no items in the collection.</p>

<p>For example:</p>

<pre><code>"".empty? # true
"hi".empty?   # false
{}.empty?  # true
{"" =&gt; ""}.empty?   # false
[].empty?   # true
[nil].empty?  # false

nil.empty?  # NoMethodError: undefined method `empty?' for nil:NilClass
</code></pre>

<p>Notice that <code>empty?</code> can't be called on nil objects as nil objects are not a collection and it will raise an exception.</p>

<p>Also notice that even if the items in a collection are blank, it does not mean a collection is empty.</p>

<p><code>blank?</code> is basically a combination of <code>nil?</code> and <code>empty?</code> It's useful for checking objects that you assume are collections, but could also be nil.</p>
