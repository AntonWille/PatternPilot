 <h2> Title: How do I include functions from another file in my Perl script? </h2> <h3> Zain Rizvi, question_id: 1712016 </h3>Score: 78, Tags: {perl,include} <br><p>This seems like a really simple question but somehow my Google-Fu failed me.</p>

<p>What's the syntax for including functions from other files in Perl?  I'm looking for something like C's <code>#include "blah.h"</code></p>

<p>I saw the option for using Perl modules, but that seems like it'll require a not-insignificant rewrite of my current code.</p>
<h4> Comment 1589704 daotoad: </h4>Willy-nilly inclusion of scripts into each other is asking for pain.  The difference between a module and a script codewise is very slight, but the encapsulation is much better.  What specific things make you think a major  rewrite will be required to use modules?<br><h4> Comment 1595626 Zain Rizvi: </h4>The guides I was looking at online made creating and adding modules look like a much more complicated task than it actually was.  Thanks for showing me its simplicity<br>------------------------------------------------------------------ <br><h3> Answer 1712165 daotoad: </h3><p>Use a module.  Check out <a href="http://perldoc.perl.org/perlmod.html" rel="noreferrer">perldoc perlmod</a> and <a href="http://perldoc.perl.org/Exporter.html" rel="noreferrer">Exporter</a>.</p>

<p>In file Foo.pm</p>

<pre><code>package Foo;
use strict;
use warnings;
use Exporter;

our @ISA= qw( Exporter );

# these CAN be exported.
our @EXPORT_OK = qw( export_me export_me_too );

# these are exported by default.
our @EXPORT = qw( export_me );

sub export_me {
    # stuff
}

sub export_me_too {
    # stuff
}

1;
</code></pre>

<p>In your main program:</p>

<pre><code>use strict;
use warnings;

use Foo;  # import default list of items.

export_me( 1 );
</code></pre>

<p>Or to get both functions:</p>

<pre><code>use strict;
use warnings;

use Foo qw( export_me export_me_too );  # import listed items

export_me( 1 );
export_me_too( 1 );
</code></pre>

<p>You can also import package variables, but the practice is strongly discouraged.</p>
<h4> Comment 1595649 Zain Rizvi: </h4>Additionally, if you&#39;re not installing the module in one of the default locations for perl modules, just add this before the &quot;use Foo;&quot; line:      use lib (&#39;C:/Module/Location&#39;);<br><h4> Comment 1590830 Evan Carroll: </h4>Check out Sub::Exporter it is all the rave! <a href="http://search.cpan.org/~rjbs/Sub-Exporter-0.982/lib/Sub/Exporter.pm" rel="nofollow noreferrer">search.cpan.org/~rjbs/Sub-Exporter-0.982/lib/Sub/Exporter.pm</a><br><h4> Comment 2670497 daotoad: </h4>@Jeremy, check out <a href="http://stackoverflow.com/questions/2526804/how-is-perls-inc-constructed-aka-what-are-all-the-ways-of-affecting-where-per" title="how is perls inc constructed aka what are all the ways of affecting where per">stackoverflow.com/questions/2526804/&hellip;</a><br><h4> Comment 2670226 joejoeson: </h4>Lets say I have libs from the default location and I want to use a module that is located in the local directory because it is really only used by the current app and the module was created to better organize the script. will the use lib line tell perl to only look at the location I specify for all module or does it add to the lib path that perl searches?<br><h4> Comment 27437988 yonetpkbji: </h4>Is it possible to make variables global, across the main script and also the modules that you create? If so, how would it be done as I am having some trouble? thanks a lot<br><h4> Comment 27684613 daotoad: </h4>@perl-user, it is possible, but generally it is better to use accessors to manage the variables.  The most straight forward way to share a variable is to declare it with <code>our</code> in your module.  You can then access it using a fully qualified package + variable name:  <code>package Foo;  our @bar = 1..5;</code>  Access as <code>@Foo::bar</code>.<br><h4> Comment 34284755 joshlk: </h4>@daotoad I think its important to say in this answer that if you are going to have the Foo.pm in the same directory as your perl script that you need to add:  use File::Basename;  use lib dirname (<b>FILE</b>);  Before trying to import Foo<br><h4> Comment 34490050 daotoad: </h4>@Josh, the current directory is in <code>@INC</code> by default.  BTW, for searching for directories to add to my @INC, I find tye&#39;s File::FindLib meets my needs better than anything else out there. <a href="https://metacpan.org/pod/File::FindLib" rel="nofollow noreferrer">metacpan.org/pod/File::FindLib</a><br>------------------------------------------------------------------ <br><h3> Answer 1712036 martin clayton: </h3><p>Perl <a href="http://perldoc.perl.org/functions/require.html" rel="noreferrer">require</a> will do the job.  You will need to ensure that any 'require'd files return truth by adding</p>

<pre><code>1;
</code></pre>

<p>at the end of the file.</p>

<p>Here's a tiny sample:</p>

<pre><code>$ cat m1.pl 
use strict;
sub x { warn "aard"; }
1;

$ cat m2.pl 
use strict;
require "m1.pl";
x();

$ perl m2.pl 
aard at m1.pl line 2.
</code></pre>

<p>But migrate to modules <strong>as soon as you can</strong>.</p>

<p><strong>EDIT</strong></p>

<p>A few benefits of migrating code from scripts to modules:</p>

<ul>
<li>Without packages, everything occupies a single namespace, so you may hit a situation where two functions from separate files want the same name.</li>
<li>A package allows you to expose some functions, but hide others.  With no packages, all functions are visible.</li>
<li>Files included with <code>require</code> are only loaded at run time, whereas packages loaded with <code>use</code> are subject to earlier compile-time checks.</li>
</ul>
<h4> Comment 2757791 Herms: </h4>This one is more directly comparable to C&#39;s #include from what I can tell, and is exactly what I needed.<br><h4> Comment 40815710 N3Xg3N: </h4><code>A package allows you to expose some functions, but hide others. With no packages, all functions are visible.</code> How do we do this?<br>------------------------------------------------------------------ <br><h3> Answer 1721670 glenn jackman: </h3><p>Also, <code>do 'file.pl';</code> will work, but modules are the better solution.</p>
------------------------------------------------------------------ <br><h3> Answer 1712028 Daniel Plaisted: </h3><p>I believe you are looking for the <a href="http://perldoc.perl.org/functions/require.html" rel="noreferrer">require</a> or <a href="http://perldoc.perl.org/functions/use.html" rel="noreferrer">use</a> keywords.</p>
------------------------------------------------------------------ <br><h3> Answer 14424067 sdaau: </h3><p>I know the question specifically says "functions", but I get this post high up in search when I look for "perl include", and often times (like now) I want to include variables (in a simple way, without having to think about modules). And so I hope it's OK to post my example here (see also: <a href="http://www.sitepoint.com/forums/showthread.php?501379-Perl-require-and-variables" rel="noreferrer">Perl require and variables</a>; in brief: use <code>require</code>, and make sure both "includer" and "includee" files declare the variable as <code>our</code>): </p>

<pre><code>$ perl --version

This is perl, v5.10.1 (*) built for i686-linux-gnu-thread-multi ...

$ cat inc.pl
use warnings;
use strict;

our $xxx = "Testing";

1;

$ cat testA.pl 
use warnings;
use strict;

require "inc.pl";
our $xxx;

print "1-$xxx-\n";
print "Done\n";

$ perl testA.pl 
1-Testing-
Done


$ cat testB.pl 
use warnings;
use strict;

our $xxx;
print "1-$xxx-\n";

$xxx="Z";
print "2-$xxx-\n";

require "inc.pl";

print "3-$xxx-\n";
print "Done\n";

$ perl testB.pl 
Use of uninitialized value $xxx in concatenation (.) or string at testB.pl line 5.
1--
2-Z-
3-Testing-
Done
</code></pre>
<h4> Comment 105109567 iJames: </h4>EXACTLY what I was looking for.  And nobody&#39;s suggested that it&#39;s not a good idea?  So I&#39;m thinking that means it&#39;s still a good way to provide a set of values to multiple perl scripts?<br>------------------------------------------------------------------ <br><h3> Answer 1712029 Benj: </h3><p>You really should look into perl modules however, for a quick hack you could always run "perl -P" which runs your perl script through the C pre-processor.  That means you can do #include and friends....</p>

<p>Only a quick hack though, beware ;-)</p>
------------------------------------------------------------------ <br><h3> Answer 1712393 aartist: </h3><p>What are you looking for is 'require file.pl', but what you should be looking at is 'use module'.</p>
------------------------------------------------------------------ <br><h3> Answer 22229196 kakyo: </h3><p>The above answers all ignored the client part: How to import the module. </p>

<p>See the accepted answer here:
<a href="https://stackoverflow.com/questions/787899/how-do-i-use-a-perl-module-from-a-relative-location">How do I use a Perl module from a relative location?</a></p>

<p>Without the trick in this answer, you'll have plenty of trouble trying to get the module path right when you <code>use $mymodule;</code></p>
------------------------------------------------------------------ <br><h3> Answer 66566345 Able Mac: </h3><p><code>require</code> is roughly equivalent to include.  All of the namespace benefits can be achieved in a required perl script just like a perl module.  The &quot;magic&quot; is in what you put in the script.</p>
<p>The only caveat to including a script is you need to <code>return 1;</code> at the end of the script, or perl says it failed, even if you haven't called anything in the script.</p>
<p><code>require &quot;./trims.pl&quot;</code></p>
<p>Then in your perl script it can be as simple as:</p>
<pre><code>#!/usr/bin/perl

#use &quot;trims.pl&quot;;


sub ltrim { my $s = shift; $s =~ s/^\s+//;       return $s };
sub rtrim { my $s = shift; $s =~ s/\s+$//;       return $s };
sub  trim { my $s = shift; $s =~ s/^\s+|\s+$//g; return $s };
return 1;
</code></pre>
<p>This example removes white space from the left, right or both ends of the input string. <code>$string = trim($string);</code></p>
<p>The comment of <code>#use &quot;trims.pl&quot;</code> can be pasted in your perl script, uncommented (remove the #) and perl will look in the same folder your script is in to find trims.pl and this puts the functions ltrim(), rtrim(), and trim() in the global name space, so you can't have those  function names in any other global name space or perl will detect a conflict and stop the execution.</p>
<p>To learn more about controlling name spaces, look into &quot;perl packages &amp; modules&quot; <code>package Foo;</code></p>
<p><a href="https://perldoc.perl.org/functions/package" rel="nofollow noreferrer">https://perldoc.perl.org/functions/package</a></p>
------------------------------------------------------------------ <br><h3> Answer 76846186 ChiMoHe: </h3><p>Back in 2006 I wrote a Perl subroutine called includelife.  I thought you would appreciate it.  This year I download a ChatGPT 3.5 and had the app write white paper for the subroutine.</p>
<pre><code>sub includefile {
my $fname = shift;
my $file;

# Remove potentially harmful               
characters from the file name
$fname =~ s/([\&amp;;\`'\|\&quot;*\?\~\^\(\)\
[\]\{\}\$\n\r])//g;

# Open the file for reading
if (!fopen(INCLUDE, $fname)) {
    return '[an error occurred while processing this directive]';
}

# Read the content of the file and 
store it in $file
$file = join('', &lt;INCLUDE&gt;);

# Close the file
fclose(INCLUDE);

return $file;
</code></pre>
<p>}</p>
<h4> Comment 135474163 ChiMoHe: </h4>You can then use the <code>includefile</code> subroutine to process the file with the provided file name and return the results accordingly. Remember to sanitize and validate the user input before processing the file to ensure security.<br><h4> Comment 135474157 ChiMoHe: </h4>The server-side code will handle processing the file using the <code>includefile</code> subroutine we discussed earlier in Perl:  ```html &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt;     &lt;title&gt;Include File Form&lt;/title&gt; &lt;/head&gt; &lt;body&gt;     &lt;h2&gt;Include File Form&lt;/h2&gt;     &lt;form action=&quot;/process_file&quot; method=&quot;post&quot;&gt; &lt;!-- Replace &quot;/process_file&quot; with the URL to handle form submission on the server-side --&gt;         &lt;label for=&quot;filename&quot;&gt;Enter File Name:&lt;/label&gt;         &lt;input type=&quot;text&quot; id=&quot;filename&quot; name=&quot;filename&quot; required&gt;&lt;br&gt;          &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;     &lt;/form&gt; &lt;/body&gt; &lt;/html&gt;<br><h4> Comment 135474160 ChiMoHe: </h4>Save the above code in an HTML file, e.g., &quot;includefile_form.html,&quot; and open it in a web browser. The form will have a text input field where users can enter the file name they want to process using the <code>includefile</code> subroutine. When they click the &quot;Submit&quot; button, the form data will be sent to the URL specified in the <code>action</code> attribute of the <code>form</code> element.  On the server-side (e.g., using Perl), you need to handle the form submission at the specified URL (&quot;/process_file&quot;) and retrieve the value of the <code>filename</code> input field.<br>